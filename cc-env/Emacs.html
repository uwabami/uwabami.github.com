<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Emacs の設定</title>
<meta name="description" content="Youhei SASAKI's official site. My Interest: Fluid Dynamics, Convection, MHD Dynamo, Numerical Computing, Unix, Linux, Debian">
<link rel="stylesheet" href="/css/main.css" >
<link rel="stylesheet" href="/assets/fontawesome/css/all.min.css" >
<link rel="canonical" href="/cc-env/Emacs.html">

<link rel="alternate" hreflang="ja" href="/cc-env/Emacs.html" />
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
    <script src="/assets/js/html5shiv.min.js"></script>
    <script src="/assets/js/respond.min.js"></script>
<![endif]-->
<link rel="icon" type="image/x-icon" href="/favicon.ico">

    <link rel="stylesheet" href="/css/cc-env.css" >
  </head>
  <body>
    <span id="page-top"></span>
    <!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html">Youhei SASAKI's official site</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
        
        <li><a class="page-link" href="/research/index.html">Research</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Software<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/software/index.html">Repository</a></li>
            <li><a href="/cc-env/index.html">Computer Memo</a></li>
          </ul>
        </li>
        <li><a class="page-link" href="https://uwabami.junkhub.org/log">Blog</a></li>
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
        
          
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>

    <div class="container">
      <div class="content">
        <div class="row">
          <div class="page-header col-xs-12">
            
            <h1>Emacs の設定</h1>
            
            <ul class="breadcrumb">
  
  <li><a href="/index.html">Top</a></li>
  
  
    
    
      
  <li><a href="/cc-env/index.html">Cc-env</a></li>
      
    
  
    
    
  
</ul>

          </div>
          <div class="col-xs-12">
            <div id="toc-wrapper">
<nav id="table-of-contents">
<h2>&#30446;&#27425;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org801e03b">はじめに</a>
<ul>
<li><a href="#orgb6d1df6">Emacs のパッケージ(<code>package.el</code>)と quelpa, use-package を使う</a></li>
<li><a href="#org79d36bb">Debian パッケージがインストールされているならば，それを優先する</a></li>
<li><a href="#orgce9e1d2">設定は Org mode で書きたい</a></li>
</ul>
</li>
<li><a href="#org4b33838">ディレクトリ構成</a></li>
<li><a href="#orgdc85120">Package 関連: <code>package.el</code>, use-package, quelpa</a>
<ul>
<li><a href="#org4f3a5b0"><code>package.el</code></a></li>
<li><a href="#org7d3714e">use-package</a></li>
<li><a href="#org28ff918">quelpa</a></li>
</ul>
</li>
<li><a href="#org01bbc17">独自関数</a>
<ul>
<li><a href="#orgc5e17a6">カーソルのある位置の face を調べる関数</a></li>
<li><a href="#orga27b58a">機能を無効化するための関数の定義</a></li>
<li><a href="#org0799a41">dpkg-status</a></li>
<li><a href="#org17efdd3">行末の無駄な空白/改行を削除する</a></li>
<li><a href="#org57f6557">空になったファイルを尋ねずに自動削除</a></li>
<li><a href="#org0fd3d36">scratch を殺さない. 消したら再生成</a></li>
</ul>
</li>
<li><a href="#org0f3fa94">常に <code>cl-lib</code> を読み込む</a></li>
<li><a href="#org65590ab">後方互換性: <code>el-x</code></a></li>
<li><a href="#org6991624">環境変数の読み込み: <code>exec-path-from-shell</code></a></li>
<li><a href="#org39f7900">言語の設定</a>
<ul>
<li><a href="#org0620d4b">cp5022x.el</a></li>
<li><a href="#org35775c7">East Asian Ambiguos 対応</a></li>
<li><a href="#orgb5f7609">OSの違いに起因する条件分岐</a></li>
</ul>
</li>
<li><a href="#org4bcfea1">主にEmacs本体に同梱されている拡張に関する設定</a>
<ul>
<li><a href="#orgac4456d">標準機能の設定</a>
<ul>
<li><a href="#org7c8fad6">表示関連</a></li>
<li><a href="#orgf0533e4">編集関連</a></li>
</ul>
</li>
<li><a href="#org3c92ed6">ファイル，デイレクトリ整理</a></li>
<li><a href="#orgf4dce33"><code>recentf</code>: 最近使ったファイル履歴の保管</a></li>
<li><a href="#org68b15ff"><code>.elc</code> と <code>.el</code> の timestamp を比較し，新しい方を読み込む</a></li>
<li><a href="#org4a8b070">ガベージコレクションの <del>頻度を下げる</del> 表示をしない</a></li>
<li><a href="#org0697d39"><code>abbrev</code>: 略語展開</a></li>
<li><a href="#orgc5be4e8"><code>eldoc</code>: emacs-lisp document</a></li>
<li><a href="#orgf51ae85"><code>midnight</code>: 一定期間使用しなかった buffer を自動削除</a></li>
<li><a href="#orga2ec2c7"><code>uniquify</code>: モードラインのファイル名にディレクトリも表示する</a></li>
<li><a href="#orgef2c1af"><code>whitespace</code>: 空白の強調表示</a></li>
<li><a href="#org3185cdd"><code>saveplace</code>: 前回の修正位置を記憶する.</a></li>
<li><a href="#org1bcefa9"><code>time-stamp</code>: 保存時に timestamp を自動更新</a></li>
<li><a href="#org43716f0"><code>tramp</code>: ssh 越しにファイルを編集</a></li>
<li><a href="#org31056bc"><code>bookmark</code>: bookmark ファイル</a></li>
<li><a href="#orgcd6b08d"><code>eww</code>: 内蔵ブラウザ</a></li>
<li><a href="#orgdc6565c"><code>browse-url</code></a></li>
<li><a href="#org0a53ae3"><code>server</code>: Emacs server</a></li>
</ul>
</li>
<li><a href="#orgf307b6f">shell との連携</a></li>
<li><a href="#org20cef7f">日本語入力: <code>ddskk</code></a>
<ul>
<li><a href="#org8dd9f00">Emacs 本体側の設定</a></li>
<li><a href="#org354d5fc">DDSKK 本体の設定</a>
<ul>
<li><a href="#org153e129">編集関連</a></li>
<li><a href="#orgb3789b6">インクリメンタルサーチ</a></li>
<li><a href="#orgd49a0fa">辞書の設定</a></li>
<li><a href="#org7ae87ad">動的補完</a></li>
<li><a href="#orgac78492">部首変換, 総画数変換</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb11ba43">Copy &amp; Paste: <code>xclip</code></a></li>
<li><a href="#org705f598">インクリメンタル検索: <code>migemo</code></a></li>
<li><a href="#orgf98f111">補完: <code>ido</code></a>
<ul>
<li><a href="#org8cd9ee1"><code>ido</code> の設定</a></li>
<li><a href="#org50cf891"><code>flx-ido</code>: flex match の強化</a></li>
<li><a href="#org13c9200"><code>ido-grid-mode</code>: 候補を並べて表示</a></li>
<li><a href="#org6a76b72"><code>ido-recentf</code>: recentf を ido で</a></li>
<li><a href="#orgcd00f31"><code>smex</code></a></li>
</ul>
</li>
<li><a href="#orgf001ca3">Elscreen <code>[/]</code></a></li>
<li><a href="#orga885b12">zoom-window</a></li>
<li><a href="#org435050d">認証関連: <code>id-manager</code>, <code>plstore</code>, <code>oauth2</code>, <code>password-store</code></a>
<ul>
<li><a href="#orga447244">id-manager の設定</a></li>
<li><a href="#org0142bfe">plstore</a></li>
<li><a href="#org36f8337">oauth2</a></li>
<li><a href="#org6b11f8c">password-store</a></li>
</ul>
</li>
<li><a href="#org58ad1d2">Emacs-w3m</a></li>
<li><a href="#orgcd929ce">MUA の設定: <code>wanderlust</code></a>
<ul>
<li><a href="#org40c40af">Emacs 本体側の設定</a></li>
<li><a href="#orgd207f75">Wanderlust 本体の設定</a>
<ul>
<li><a href="#orgcf338be">依存/追加ライブラリのインストールと読み込み</a>
<ul>
<li><a href="#org394649a">rail</a></li>
<li><a href="#org675876b">cp5022x を使う</a></li>
<li><a href="#org411297a">elscreen-wl</a></li>
<li><a href="#orgc3022aa">SEMI の追加設定</a></li>
</ul>
</li>
<li><a href="#org166bc79">個人情報の設定</a>
<ul>
<li><a href="#org7f4ebb1">自身のメールアドレスと購読メーリングリストの設定</a></li>
<li><a href="#org48cec54">送受信用サーバの設定</a></li>
<li><a href="#org80c64b0">From に応じて送信サーバをきりかえる.</a></li>
</ul>
</li>
<li><a href="#org8e2b14d">基本設定</a>
<ul>
<li><a href="#org8067a24">imap 関連</a></li>
<li><a href="#org80afc48">非同期チェック</a></li>
<li><a href="#org3edc3e5">フォルダの位置の default からの変更</a></li>
<li><a href="#org2c6df6a">フォルダ編集時に backup を作成しない.</a></li>
<li><a href="#org4dea883">FCC, BCC の設定</a></li>
<li><a href="#orgf8b4200">起動時に <code>%INBOX</code> のみをチェック</a></li>
<li><a href="#orgf90feff">フォルダ選択時の初期設定</a></li>
<li><a href="#org894fd4c">confirm 関連の設定</a></li>
<li><a href="#org00b1792">misc.</a></li>
<li><a href="#org15ac414">dispose, delete の設定</a></li>
<li><a href="#org625e547">折り返しの設定</a></li>
<li><a href="#org1a2d9b3">mode-line の設定</a></li>
</ul>
</li>
<li><a href="#orgcba00f7">キーバインド関連</a></li>
<li><a href="#org924aa7e">flag とフォルダを行き来する関数の追加</a></li>
<li><a href="#org7c1d416">summary-mode の表示のカスタマイズ</a>
<ul>
<li><a href="#orgc9ed339">自分が差出人である mail は To:某 と表示</a></li>
<li><a href="#orga1e88c9">サマリ行の表示関連</a></li>
<li><a href="#org51af989">Gmail 風に, 自分宛のメールに "&gt;" をつけて表示する</a></li>
<li><a href="#org6fe3938">添付ファイルがあったら, サマリ行に "@" を付ける</a></li>
<li><a href="#org2efb71b">クォートされた文字列もデコードする</a></li>
<li><a href="#org42c8e31">Subject が変わってもスレッドを切らない</a></li>
<li><a href="#org87607e8">Subject での Tab や複数スペースを無視</a></li>
<li><a href="#org1ba5636">重複メッセージを非表示に</a></li>
<li><a href="#org69381b1">sort 順: 返信が来た順</a></li>
</ul>
</li>
<li><a href="#orga1321a2">振り分け設定</a>
<ul>
<li><a href="#orgac181ea">振り分け判定に使用するヘッダ</a></li>
</ul>
</li>
<li><a href="#org47dabd4">メッセージ表示</a>
<ul>
<li><a href="#orgec81f33">いったん全て非表示に</a></li>
<li><a href="#org126035e">見たいヘッダだけ表示</a></li>
<li><a href="#org8a94db3">表示順の変更</a></li>
<li><a href="#org18b4949">From, To を省略表示しない</a></li>
</ul>
</li>
<li><a href="#orga9c7e46">作成/返信設定</a>
<ul>
<li><a href="#org3454017">メール本文の文字コード</a></li>
<li><a href="#org021e4af">draft mode で orgtbl を有効に</a></li>
<li><a href="#org0173c6a">c-sig</a></li>
</ul>
</li>
<li><a href="#orgedc685c">Face の設定</a></li>
<li><a href="#org8bb44b0">GPG 署名</a></li>
<li><a href="#orge6f1fa9">検索</a></li>
</ul>
</li>
<li><a href="#org0a6c269">Linux Desktop で <code>mailto:</code> リンクを扱うために</a></li>
<li><a href="#org52e6c6b">メールからの予定の取り込み: <code>mhc</code></a></li>
</ul>
</li>
<li><a href="#org38ecdb5">校正，辞書等</a>
<ul>
<li><a href="#org2fd1a6c">spell checker</a></li>
<li><a href="#org6389823">辞書</a></li>
</ul>
</li>
<li><a href="#org7ec7ade">カレンダー: <code>japanese-holidays</code></a></li>
<li><a href="#orga0ec7b3">Org</a>
<ul>
<li><a href="#org8e67c0e">基本設定: <code>org</code></a></li>
<li><a href="#org125f283">Org-Id, Orglink</a></li>
<li><a href="#org1f625ee">Org-journal: 日記</a></li>
<li><a href="#org76b0d85">Capture: メモ取り</a></li>
<li><a href="#org3fbcc3a">Agenda: スケジュール，TODO 表示</a></li>
<li><a href="#orgc3af6e6">Babel</a>
<ul>
<li><a href="#org7e2c56a">org-src</a></li>
<li><a href="#orgcaf668d">org-ditaa</a></li>
</ul>
</li>
<li><a href="#orgf6a1a21">OrgとGoogle カレンダーの連携: <code>org-gcal</code></a>
<ul>
<li><a href="#org6c0c67c">token 等の置き場所の変更</a></li>
<li><a href="#org5145f84">org-gcal 本体の設定</a></li>
</ul>
</li>
<li><a href="#org7bc46db">OrgとRedmine の連携: <code>orgmine</code></a></li>
<li><a href="#org11356aa">Org-Export</a>
<ul>
<li><a href="#org962447a">一般設定</a></li>
<li><a href="#org81b75c9">Beamer export</a></li>
<li><a href="#org2aabc57">HTML export</a></li>
<li><a href="#org763dd29">Jekyll 用の Backend の定義</a></li>
</ul>
</li>
<li><a href="#org8489a30">Org-Wiki</a></li>
<li><a href="#org6f47a64">Org-Project</a></li>
</ul>
</li>
<li><a href="#orgdd9121d">Howm</a></li>
<li><a href="#org063216c">日記: <code>tDiary</code></a></li>
<li><a href="#orge537040">MoinMoin: <code>moinmoin-mode</code>, <code>moomin.el</code></a>
<ul>
<li><a href="#orga90f25b"><code>moinmoin-mode</code></a></li>
<li><a href="#org19e2ce0"><code>moomin</code></a></li>
</ul>
</li>
<li><a href="#orgf8825e1">プログラム環境</a>
<ul>
<li><a href="#orgef0f195">VCS: <code>magit</code></a></li>
<li><a href="#org53a4498">VCS: <code>ido-ghq</code></a></li>
<li><a href="#orgb98a563">対応する括弧を見易く: <code>rainbow-delimiters</code></a></li>
<li><a href="#org80a0cd9">設定ファイル: <code>generic-x</code></a></li>
<li><a href="#orgf50558b">Textile</a></li>
<li><a href="#org524a4c9">Markdown</a></li>
<li><a href="#org2934785">SCSS</a></li>
<li><a href="#orgc73f534">rainbow-mode</a></li>
<li><a href="#org423a5fe">YAML</a></li>
<li><a href="#org2624c9f">Ruby</a></li>
<li><a href="#orgdbc034c">C</a></li>
<li><a href="#org507e517">Fortran</a></li>
<li><a href="#org85ed76a">AUCTeX</a></li>
<li><a href="#orgee12fc9">AUCTeX と Zotero との連携</a></li>
<li><a href="#org9fcfe2c">補完: <code>auto-complete</code></a></li>
</ul>
</li>
<li><a href="#org429fe53">基本的なキーバインドの設定</a></li>
<li><a href="#org6c61839"><code>diminish</code>: モードラインの短縮表示</a></li>
<li><a href="#org035bcc6">フォントと色</a></li>
<li><a href="#orgf83f40f"><code>powerline</code>: モードラインを綺麗に</a>
<ul>
<li><a href="#orge4c002a">ddskk の表示のカスタマイズ</a></li>
<li><a href="#org8e6b879">powerline 本体の設定．</a></li>
</ul>
</li>
<li><a href="#orgc441e9b">起動時間の計測</a></li>
<li><a href="#org58506ac">LICENSE</a></li>
</ul>
</div>
</nav>
</div>
<a href="#toc-toggle" class="btn toc-btn" id="toc-toggle">&#30446;&#27425;</a>
<p>
Related: <a href='index.html'>Index</a>
</p>
<div id="outline-container-org801e03b" class="outline-2">
<h2 id="org801e03b">はじめに</h2>
<div class="outline-text-2" id="text-org801e03b">
<p>
ここでは，私の Emacs の設定についてまとめています．
</p>

<p>
<img src="https://travis-ci.org/uwabami/emacs.svg?branch=master" class="travis_badge">
<object type="image/svg+xml" data="https://img.shields.io/badge/License-GPLv3-blue.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
<style>#forkongithub a{background:#000;color:#fff;text-decoration:none;font-family:arial,sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:1rem;line-height:2rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#c11;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:fixed;display:block;top:0;right:0;width:200px;overflow:hidden;height:200px;z-index:9999;}#forkongithub a{width:200px;position:absolute;top:120px;right:15px;transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);box-shadow:4px 4px 10px rgba(0,0,0,0.8);}}</style><span id="forkongithub"><a href="https://github.com/uwabami/emacs">Fork me on GitHub</a></span>
</p>

<p>
基本方針は以下の通り:
</p>
</div>
<div id="outline-container-orgb6d1df6" class="outline-3">
<h3 id="orgb6d1df6">Emacs のパッケージ(<code>package.el</code>)と <a href="https://github.com/quelpa/quelpa">quelpa</a>, <a href="https://github.com/jwiegley/use-package">use-package</a> を使う</h3>
<div class="outline-text-3" id="text-orgb6d1df6">
<p>
基本は <code>package.el</code> を使いますが、
VCS からインストールしたいパッケージが幾つかあるので、
それらについては <a href="https://github.com/quelpa/quelpa">quelpa</a> を使います。
</p>
</div>
</div>
<div id="outline-container-org79d36bb" class="outline-3">
<h3 id="org79d36bb">Debian パッケージがインストールされているならば，それを優先する</h3>
<div class="outline-text-3" id="text-org79d36bb">
<p>
:<a href="https://en.wikipedia.org/wiki/Eating_your_own_dog_food">Eating your own dog food - Wikipedia</a>
</p>

<p>
Emacsに関連するDebianパッケージを幾つかメンテナンスしているので，
可能な限りDebianパッケージを使うことにしています.
</p>
</div>
</div>
<div id="outline-container-orgce9e1d2" class="outline-3">
<h3 id="orgce9e1d2">設定は <a href="http://orgmode.org/">Org mode</a> で書きたい</h3>
<div class="outline-text-3" id="text-orgce9e1d2">
<p>
以前こんなブログ記事を書きました: <a href="http://uwabami.junkhub.org/log/20111213.html#p01">Emacsの設定ファイルをorgで書く</a>
</p>

<p>
というわけで，設定は <a href="http://orgmode.org/worg/org-contrib/babel/intro.html">Org Babel</a> で書いています．
本ファイル(<code>README.org</code>) から，
Makefile 内の以下のスクリプトで <code>~/init.el</code> を生成し，byte-compile します．
</p>
<div class="org-src-container">
<pre class="src src-makefile-gmake"><span style="color: #BF7FFF;">init.el</span>: README.org
    $(<span style="color: #7F7FFF;">EMACS</span>) -q --batch --eval \
         <span style="color: #7FFF7F;">"(progn \</span>
<span style="color: #7FFF7F;">            (require 'ob-tangle) \</span>
<span style="color: #7FFF7F;">            (org-babel-tangle-file \"$</span><span style="color: #FFBF7F;">&lt;</span><span style="color: #7FFF7F;">\" \"</span><span style="color: #7FFF7F;">$</span><span style="color: #FFBF7F;">@</span><span style="color: #7FFF7F;">\" \"emacs-lisp\")))"</span>
<span style="color: #BF7FFF;">%.elc</span>: %.el
    $(<span style="color: #7F7FFF;">EMACS</span>) -l $<span style="color: #FFBF7F;">&lt;</span> -batch -f batch-byte-compile $<span style="color: #FFBF7F;">&lt;</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4b33838" class="outline-2">
<h2 id="org4b33838">ディレクトリ構成</h2>
<div class="outline-text-2" id="text-org4b33838">
<p>
分割した設定ファイル群やパッケージで install したパッケージ
の置き場所は <code>user-emacs-directory</code> 以下にまとめています．
</p>

<p>
試行錯誤の結果，ディレクトリ構成は以下のようにしました:
</p>
<pre class="example">
    ~/.emacs.d/
     |-- Makefile    ←  byte-compile 用の rule
     |-- README.org  ←  本ファイル．`org-babel-tangle' で init.el を生成
     |-- elpa/       ←  package.el で導入したパッケージが置かれる場所
     |-- quelpa/     ←  quelpa で導入したパッケージが置かれる場所
     |-- share/      ←  (基本的に)参照するだけの資源置き場所
     `-- tmp/        ←  一次ファイルの置き場所
</pre>
<p>
上記ディレクトリ構成を設定ファイルで使用するためにディレクトリ配置を宣言しておきます．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">when</span> load-file-name
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> user-emacs-directory <span style="color: #b0b1a3;">(</span>file-name-directory load-file-name<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defconst</span> <span style="color: #7F7FFF;">my:d:share</span>
  <span style="color: #93a8c6;">(</span>expand-file-name <span style="color: #7FFF7F;">"share/"</span> user-emacs-directory<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defconst</span> <span style="color: #7F7FFF;">my:d:tmp</span>
  <span style="color: #93a8c6;">(</span>expand-file-name <span style="color: #7FFF7F;">"tmp/"</span> user-emacs-directory<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
ついでに，
<code>custom-set-variables</code> は別ファイルに出力，終了時に削除するようにしています．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> custom-file <span style="color: #93a8c6;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"custom.el"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'kill-emacs-hook
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #97b098;">(</span>file-exists-p custom-file<span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span>delete-file custom-file<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<del>init.elが汚れる気がしてあまり好きではないのですが&#x2026;皆さん気にしてないんですかね</del>
</p>
</div>
</div>
<div id="outline-container-orgdc85120" class="outline-2">
<h2 id="orgdc85120">Package 関連: <code>package.el</code>, <a href="https://github.com/jwiegley/use-package">use-package</a>, <a href="https://github.com/quelpa/quelpa">quelpa</a></h2>
<div class="outline-text-2" id="text-orgdc85120">
<p>
<a href="https://github.com/jwiegley/use-package">use-package</a> のおかけで、
無いと途方に暮れるパッケージ以外のインストールは無視できるようになります。
</p>
</div>
<div id="outline-container-org4f3a5b0" class="outline-3">
<h3 id="org4f3a5b0"><code>package.el</code></h3>
<div class="outline-text-3" id="text-org4f3a5b0">
<p>
パッケージは基本的に <code>pacakge.el</code> で導入するので、先ずはその設定.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> url-http-attempt-keepalives nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">package</span> nil 'noerror<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> package-enable-at-startup t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-to-list 'package-archives '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"melpa"</span> . <span style="color: #7FFF7F;">"https://melpa.org/packages/"</span><span style="color: #93a8c6;">)</span> t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-to-list 'package-archives '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"org"</span>   . <span style="color: #7FFF7F;">"http://orgmode.org/elpa/"</span><span style="color: #93a8c6;">)</span> t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">eval-when-compile</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>file-exists-p <span style="color: #97b098;">(</span>concat user-emacs-directory <span style="color: #7FFF7F;">"tmp/bootstrap-stamp"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>package-refresh-contents<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>package-initialize<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>package-installed-p 'package-utils<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>package-install 'package-utils<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
また，初回起動時に <code>make</code> で org の最新版等を導入するために
batch でインストールできる様に，以下を <code>emacs-batch-install.el</code> として出力します．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> url-http-attempt-keepalives nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">package</span> nil 'noerror<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-to-list 'package-archives '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"melpa"</span> . <span style="color: #7FFF7F;">"https://melpa.org/packages/"</span><span style="color: #93a8c6;">)</span> t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-to-list 'package-archives '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"org"</span>   . <span style="color: #7FFF7F;">"http://orgmode.org/elpa/"</span><span style="color: #93a8c6;">)</span> t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>package-refresh-contents<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>package-initialize<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>package-install pkg-install<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
batch でのインストールは例えば
</p>
<div class="org-src-container">
<pre class="src src-makefile">    $(<span style="color: #7F7FFF;">EMACS</span>) -q --batch --eval \
      <span style="color: #7FFF7F;">"(deconst pkg-install 'org-plus-contrib)"</span> -l emacs-batch-install.el
</pre>
</div>
<p>
とすれば良いかと.
</p>
</div>
</div>
<div id="outline-container-org7d3714e" class="outline-3">
<h3 id="org7d3714e"><a href="https://github.com/jwiegley/use-package">use-package</a></h3>
<div class="outline-text-3" id="text-org7d3714e">
<p>
個々のパッケージの設定には <a href="https://github.com/jwiegley/use-package">use-package</a> を利用します．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">use-package</span> nil t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>package-install 'use-package<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org28ff918" class="outline-3">
<h3 id="org28ff918"><a href="https://github.com/quelpa/quelpa">quelpa</a></h3>
<div class="outline-text-3" id="text-org28ff918">
<p>
melpa に登録されていないパッケージや自作の elisp 等をインストールできる様に
<a href="https://github.com/quelpa/quelpa">quelpa</a> を入れておきます．とはいえ、これでパッケージを入れる訳ではないので、
melpa の同期はしません。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">quelpa</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> quelpa-upgrade-p nil
        quelpa-checkout-melpa-p nil
        quelpa-update-melpa-p nil
        quelpa-melpa-recipe-stores nil<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org01bbc17" class="outline-2">
<h2 id="org01bbc17">独自関数</h2>
<div class="outline-text-2" id="text-org01bbc17">
<p>
細かい独自関数，など．
</p>
</div>
<div id="outline-container-orgc5e17a6" class="outline-3">
<h3 id="orgc5e17a6">カーソルのある位置の face を調べる関数</h3>
<div class="outline-text-3" id="text-orgc5e17a6">
<p>
わりと良く使う. 地味に便利
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:describe-face-at-point</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>message <span style="color: #7FFF7F;">"%s"</span> <span style="color: #b0b1a3;">(</span>get-char-property <span style="color: #97b098;">(</span>point<span style="color: #97b098;">)</span> 'face<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga27b58a" class="outline-3">
<h3 id="orga27b58a">機能を無効化するための関数の定義</h3>
<div class="outline-text-3" id="text-orga27b58a">
<p>
<code>line-number-mode</code> など「有効無効をtoggleする関数」は
慣習的に <code>0</code> 以下の数字を指定すると明示的に無効化できるので，
<code>-1</code> を設定する関数を定義しておく.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:disable-builtin-mode</span> <span style="color: #93a8c6;">(</span>mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"&#19982;&#12360;&#12425;&#12428;&#12383; mode &#12364;&#23384;&#22312;&#12377;&#12427;&#12398;&#12391;&#12354;&#12428;&#12400; -1 &#12434;&#12475;&#12483;&#12488;&#12375;&#12390;&#28961;&#21177;&#21270;"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #b0b1a3;">(</span>fboundp mode<span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span>funcall mode -1<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0799a41" class="outline-3">
<h3 id="org0799a41">dpkg-status</h3>
<div class="outline-text-3" id="text-org0799a41">
<p>
もっと良い方法がありそうなモンですが．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:dpkg-status</span> <span style="color: #93a8c6;">(</span>package<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Return the package status from dpkg --get-selections."</span>
  <span style="color: #93a8c6;">(</span>string-match <span style="color: #7FFF7F;">"^ii"</span> <span style="color: #b0b1a3;">(</span>shell-command-to-string <span style="color: #97b098;">(</span>format <span style="color: #7FFF7F;">"dpkg -l %s"</span> package<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org17efdd3" class="outline-3">
<h3 id="org17efdd3">行末の無駄な空白/改行を削除する</h3>
<div class="outline-text-3" id="text-org17efdd3">
<p>
@see <a href="http://d.hatena.ne.jp/tototoshi/20101202/1291289625">無駄な行末の空白を削除する(Emacs Advent Calendar jp:2010)</a>
</p>

<p>
ただし, RD や Markdown だと空白行に意味があったりするので，
必要に応じて拡張子で判断して外している．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defvar</span> <span style="color: #7F7FFF;">my:delete-trailing-whitespace-exclude-suffix</span>
  <span style="color: #93a8c6;">(</span>list <span style="color: #7FFF7F;">"\\.rd$"</span> <span style="color: #7FFF7F;">"\\.md$"</span> <span style="color: #7FFF7F;">"\\.rbt$"</span> <span style="color: #7FFF7F;">"\\.rab$"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:delete-trailing-whitespace</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">cond</span>
   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>equal nil
           <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">cl-loop</span> for pattern in my:delete-trailing-whitespace-exclude-suffix
                    thereis <span style="color: #b0b0b3;">(</span>string-match pattern buffer-file-name<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
    <span style="color: #97b098;">(</span>delete-trailing-whitespace<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'before-save-hook 'my:delete-trailing-whitespace<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org57f6557" class="outline-3">
<h3 id="org57f6557">空になったファイルを尋ねずに自動削除</h3>
<div class="outline-text-3" id="text-org57f6557">
<p>
ゴミが残らないし，地味に便利．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:delete-file-if-no-contents</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #97b098;">(</span>buffer-file-name <span style="color: #aebed8;">(</span>current-buffer<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
             <span style="color: #97b098;">(</span>= <span style="color: #aebed8;">(</span>point-min<span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>point-max<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>delete-file
     <span style="color: #97b098;">(</span>buffer-file-name <span style="color: #aebed8;">(</span>current-buffer<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #93a8c6;">(</span>not <span style="color: #b0b1a3;">(</span>memq 'my:delete-file-if-no-contents after-save-hook<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> after-save-hook
          <span style="color: #b0b1a3;">(</span>cons 'my:delete-file-if-no-contents after-save-hook<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0fd3d36" class="outline-3">
<h3 id="org0fd3d36">scratch を殺さない. 消したら再生成</h3>
<div class="outline-text-3" id="text-org0fd3d36">
<p>
&#x2026;元ネタがどこだったのか忘れてしまった&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:make-scratch</span> <span style="color: #93a8c6;">(</span><span style="color: #FFFF7F;">&amp;optional</span> arg<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">progn</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">"*scratch*" &#12434;&#20316;&#25104;&#12375;&#12390; buffer-list &#12395;&#25918;&#12426;&#36796;&#12416;</span>
    <span style="color: #b0b1a3;">(</span>set-buffer <span style="color: #97b098;">(</span>get-buffer-create <span style="color: #7FFF7F;">"*scratch*"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>funcall initial-major-mode<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>erase-buffer<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">and</span> initial-scratch-message <span style="color: #aebed8;">(</span>not inhibit-startup-message<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>insert initial-scratch-message<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">or</span> arg
        <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">progn</span>
          <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">setq</span> arg 0<span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span>switch-to-buffer <span style="color: #7FFF7F;">"*scratch*"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">cond</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>= arg 0<span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>message <span style="color: #7FFF7F;">"*scratch* is cleared up."</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>= arg 1<span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>message <span style="color: #7FFF7F;">"another *scratch* is created"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:buffer-name-list</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>mapcar <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">function</span> buffer-name<span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span>buffer-list<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'kill-buffer-query-functions
          <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">*scratch* &#12496;&#12483;&#12501;&#12449;&#12391; kill-buffer &#12375;&#12383;&#12425;&#20869;&#23481;&#12434;&#28040;&#21435;&#12377;&#12427;&#12384;&#12369;&#12395;&#12377;&#12427;</span>
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">function</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
                      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #aebed8;">(</span>string= <span style="color: #7FFF7F;">"*scratch*"</span> <span style="color: #b0b0b3;">(</span>buffer-name<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                          <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">progn</span> <span style="color: #b0b0b3;">(</span>my:make-scratch 0<span style="color: #b0b0b3;">)</span> nil<span style="color: #aebed8;">)</span>
                        t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'after-save-hook
          <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">*scratch* &#12496;&#12483;&#12501;&#12449;&#12398;&#20869;&#23481;&#12434;&#20445;&#23384;&#12375;&#12383;&#12425;</span>
          <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">*scratch* &#12496;&#12483;&#12501;&#12449;&#12434;&#26032;&#12375;&#12367;&#20316;&#12427;.</span>
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">function</span>
           <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
             <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #aebed8;">(</span>member <span style="color: #7FFF7F;">"*scratch*"</span> <span style="color: #b0b0b3;">(</span>my:buffer-name-list<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
               <span style="color: #aebed8;">(</span>my:make-scratch 1<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0f3fa94" class="outline-2">
<h2 id="org0f3fa94">常に <code>cl-lib</code> を読み込む</h2>
<div class="outline-text-2" id="text-org0f3fa94">
<p>
以前は(今も?)「 <code>cl.el</code> は名前衝突があるので byte compile 時以外は読み込まない様にしよう」
というお話でした．つまり，
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">eval-when-compile</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">cl</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
としておくこと，という．
</p>

<p>
今は「 <code>cl.el</code> は deprecated なので <code>cl-lib</code> を使いましょう」ということみたいです．
名前衝突の回避のために，関数の接頭詞として <code>cl-</code> が付くようになったのは御愛嬌．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">eval-and-compile</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">cl-lib</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org65590ab" class="outline-2">
<h2 id="org65590ab">後方互換性: <code>el-x</code></h2>
<div class="outline-text-2" id="text-org65590ab">
<p>
古い <code>flet</code> と同じ挙動をする <code>dflet</code> を使うために <code>el-x</code> を導入しておく
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">el-x</span>
  <span style="color: #7FBFFF;">:ensure</span> t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6991624" class="outline-2">
<h2 id="org6991624">環境変数の読み込み: <code>exec-path-from-shell</code></h2>
<div class="outline-text-2" id="text-org6991624">
<p>
zsh で設定した <code>PATH</code> などの環境変数を Emacs に引き継ぐために
<a href="https://github.com/purcell/exec-path-from-shell">purcell/exec-path-from-shell</a> を使います．
今の所
</p>
<ul class="org-ul">
<li><code>SHELL</code></li>
<li><code>DEBFULLNAME</code></li>
<li><code>DEBEMAIL</code></li>
<li><code>TEXMFHOME</code></li>
<li><code>SKKSERVER</code></li>
<li><code>http_proxy</code></li>
<li><code>GPG_KEY_ID</code></li>
<li><code>GPG_AGENT_INFO</code></li>
<li><code>PASSWORD_STORE_DIR</code></li>
<li><code>PATH</code></li>
</ul>
<p>
を読み込んでいます．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defvar</span> <span style="color: #7F7FFF;">my:d:password-store</span> nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">exec-path-from-shell</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #b0b1a3;">(</span>memq window-system '<span style="color: #97b098;">(</span>mac ns<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span>exec-path-from-shell-initialize<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>exec-path-from-shell-copy-envs
   '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"SHELL"</span>
     <span style="color: #7FFF7F;">"DEBFULLNAME"</span>
     <span style="color: #7FFF7F;">"DEBEMAIL"</span>
     <span style="color: #7FFF7F;">"SKKSERVER"</span>
     <span style="color: #7FFF7F;">"TEXMFHOME"</span>
     <span style="color: #7FFF7F;">"http_proxy"</span>
     <span style="color: #7FFF7F;">"GPG_KEY_ID"</span>
     <span style="color: #7FFF7F;">"GPG_AGENT_INFO"</span>
     <span style="color: #7FFF7F;">"PASSWORD_STORE_DIR"</span>
     <span style="color: #7FFF7F;">"PATH"</span>
     <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> user-full-name <span style="color: #b0b1a3;">(</span>concat <span style="color: #97b098;">(</span>getenv <span style="color: #7FFF7F;">"DEBFULLNAME"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        user-mail-address <span style="color: #b0b1a3;">(</span>concat <span style="color: #97b098;">(</span>getenv <span style="color: #7FFF7F;">"DEBEMAIL"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        my:d:password-store <span style="color: #b0b1a3;">(</span>concat <span style="color: #97b098;">(</span>getenv <span style="color: #7FFF7F;">"PASSWORD_STORE_DIR"</span><span style="color: #97b098;">)</span> <span style="color: #7FFF7F;">"/Emacs/"</span> system-name<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org39f7900" class="outline-2">
<h2 id="org39f7900">言語の設定</h2>
<div class="outline-text-2" id="text-org39f7900">
<p>
日本語, UTF-8 にしています.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>set-language-environment <span style="color: #7FFF7F;">"Japanese"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>prefer-coding-system 'utf-8<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>set-file-name-coding-system 'utf-8<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>set-keyboard-coding-system 'utf-8<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>set-terminal-coding-system 'utf-8<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>set-default 'buffer-file-coding-system 'utf-8<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
その他, 機種依存文字等についての設定をアレコレ.
</p>
</div>
<div id="outline-container-org0620d4b" class="outline-3">
<h3 id="org0620d4b">cp5022x.el</h3>
<div class="outline-text-3" id="text-org0620d4b">
<p>
Emacs23 から内部が Unicode ベースになっています．
</p>

<p>
しかし文字コードの変換は GNU libc の iconv をベースにしているため，
環境によっては文字の変換がうまく行なえません．
そこで言語設定前に <code>cp5022x.el</code> をインストールすることにしています．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">cp5022x</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>set-charset-priority 'ascii 'japanese-jisx0208 'latin-jisx0201
                        'katakana-jisx0201 'iso-8859-1 'unicode<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>set-coding-system-priority 'utf-8 'euc-jp 'iso-2022-jp 'cp932<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org35775c7" class="outline-3">
<h3 id="org35775c7">East Asian Ambiguos 対応</h3>
<div class="outline-text-3" id="text-org35775c7">
<p>
CJK 以外の East Asian Ambiguos，絵文字も2文字幅にするようにしています．
拙作の修正ロケールはこちら: <a href="https://github.com/uwabami/locale-eaw-emoji">https://github.com/uwabami/locale-eaw-emoji</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>package-installed-p 'locale-eaw-emoji<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>locale-eaw-emoji
            <span style="color: #7FBFFF;">:fetcher</span> url
            <span style="color: #7FBFFF;">:url</span> <span style="color: #7FFF7F;">"https://raw.githubusercontent.com/uwabami/locale-eaw-emoji/master/locale-eaw-emoji.el"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">locale-eaw-emoji</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>eaw-and-emoji-fullwidth<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb5f7609" class="outline-3">
<h3 id="orgb5f7609">OSの違いに起因する条件分岐</h3>
<div class="outline-text-3" id="text-orgb5f7609">
<p>
Mac と Linux では同じ Unicode でも正規化が異なります
(具体的には Mac のファイルシステムである HFS+ では Unicode の正規化が異なります).
Unicode の正規化と Mac OS X 特有の事情については
</p>
<ul class="org-ul">
<li><a href="http://homepage1.nifty.com/nomenclator/unicode/normalization.htm">Unicode正規化とは</a></li>
<li><a href="http://www.sakito.com/2010/05/mac-os-x-normalization.html">Mac OS X におけるファイル名に関するメモ(NFC, NFD等)</a></li>
</ul>
<p>
等が参考になるでしょう.
</p>

<p>
日本語のファイル名を扱うことは滅多にないものの,
たまに祟りがあるのでそれを回避するための設定をしています.
</p>

<p>
Windows の場合はファイル名などは cp932 にしているものの,
最近 Windows 使っていないので良く知りません(というわけで，設定を捨てました).
<del>さらに，最近は Mac OS でも Emacs 使ってないから，これが正しのか良くわからない&#x2026;</del>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ucs-normalize</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>eq system-type 'darwin<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>set-file-name-coding-system 'utf-8-hfs<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> locale-coding-system 'utf-8-hfs<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12388;&#12356;&#12391;&#12395;&#12461;&#12540;&#12496;&#12452;&#12531;&#12489;: Ctrl &#12434; Mac &#12363;&#12425;&#22890;&#12356;&#21462;&#12427;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> mac-pass-control-to-system t<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">Cmd &#12392; Option &#12434;&#36870;&#12395;&#12377;&#12427;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ns-command-modifier 'meta<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ns-alternate-modifier 'super<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-set-key <span style="color: #b0b1a3;">[</span>ns-drag-file<span style="color: #b0b1a3;">]</span> 'ns-find-file<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4bcfea1" class="outline-2">
<h2 id="org4bcfea1"><a id="ID-1621568c-82d3-455a-8a12-5b356ba79e89"></a>主にEmacs本体に同梱されている拡張に関する設定</h2>
<div class="outline-text-2" id="text-org4bcfea1">
</div>
<div id="outline-container-orgac4456d" class="outline-3">
<h3 id="orgac4456d">標準機能の設定</h3>
<div class="outline-text-3" id="text-orgac4456d">
</div>
<div id="outline-container-org7c8fad6" class="outline-4">
<h4 id="org7c8fad6">表示関連</h4>
<div class="outline-text-4" id="text-org7c8fad6">
<p>
起動時のスプラッシュ画面を表示しない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> inhibit-startup-screen t
      inhibit-startup-message t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
大抵の場合ターミナル内で <code>-nw</code> として起動するし,
メニューは触ったことないので使わないので，
フレーム, ツールバー等を非表示にする．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>my:disable-builtin-mode 'tool-bar-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:disable-builtin-mode 'scroll-bar-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:disable-builtin-mode 'menu-bar-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:disable-builtin-mode 'blink-cursor-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:disable-builtin-mode 'column-number-mode<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
ベル無効化
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> ring-bell-function 'ignore<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
現在行のハイライト
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>global-hl-line-mode t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
選択リージョンに色付け
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> transient-mark-mode t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
対応する括弧を強調表示
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>show-paren-mode +1<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> show-paren-style 'mixed<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
行番号を表示する <code>linum-mode</code> は基本使わない(必要に応じて有効にする)
ので通常はモードラインに行番号や桁番号を表示しないようする.
ついでに <code>linum-mode</code> を有効にした場合の桁表示を 5 桁に.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>my:disable-builtin-mode 'line-number-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> linum-format <span style="color: #7FFF7F;">"%5d "</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
debug は表示しない: 必要に応じて t に変更する
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> debug-on-error nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
Compile-Log の非表示:     ほとんど見ないし．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>win <span style="color: #97b098;">(</span>get-buffer-window <span style="color: #7FFF7F;">"*Compile-Log*"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">when</span> win <span style="color: #b0b1a3;">(</span>delete-window win<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
Warning の抑制: これもほとんど見ないし．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> byte-compile-warnings
      '<span style="color: #93a8c6;">(</span>not
        free-vars
        unresolved
        callargs
        redefine
        obsolete
        noruntime
        cl-functions
        interactive-only
        make-local
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf0533e4" class="outline-4">
<h4 id="orgf0533e4">編集関連</h4>
<div class="outline-text-4" id="text-orgf0533e4">
<p>
yes or no を y or n に
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>fset 'yes-or-no-p 'y-or-n-p<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
ファイル名の大文字小文字を区別しない(zsh風)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> read-file-name-completion-ignore-case t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
tab 幅 4, tab でのインデントはしない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq-default</span> tab-width 4<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq-default</span> indent-tabs-mode nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
文字列は 72 文字で折り返し(RFC2822風味)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq-default</span> fill-column 72<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> paragraph-start '<span style="color: #7FFF7F;">"^</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">[ &#12288;&#12539;&#9675;&lt;\t\n\f]</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">(?[0-9a-zA-Z]+)</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq-default</span> auto-fill-mode nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
長い行の折り返し:
デフォルトは折り返し有で <code>\C-c M-l</code> で toggle
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>set-default 'truncate-lines nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> truncate-partial-width-windows nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>define-key global-map <span style="color: #93a8c6;">(</span>kbd <span style="color: #7FFF7F;">"C-c M-l"</span><span style="color: #93a8c6;">)</span> 'toggle-truncate-lines<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
バッファ終端で newline を入れない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> next-line-add-newlines nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
symlink は常においかける
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> vc-follow-symlinks t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
変更のあったファイルの自動再読み込み
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>global-auto-revert-mode 1<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
バックアップとauto-saveの作成/位置の変更:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> auto-save-list-file-prefix <span style="color: #93a8c6;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">".saves-"</span><span style="color: #93a8c6;">)</span>
      auto-save-default t
      auto-save-timeout 15
      auto-save-interval 60
      make-backup-files t
      backup-by-copying t <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">symlink &#12399;&#20351;&#12431;&#12394;&#12356;</span>
      backup-directory-alist `<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"."</span> . ,my:d:tmp<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
      auto-save-file-name-transforms `<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">".*"</span> ,my:d:tmp t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
      version-control t
      kept-new-versions 5
      kept-old-versions 5
      delete-old-versions t
      delete-auto-save-files t
      <span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
Undo/Redo:
そのうち undohist と undo-tree を試そうと思っているのですが，
今のところ特に弄ってません． <code>undo-limit</code> は無限大にしたいのですが，どうするのかな&#x2026;?
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> undo-limit 200000
      undo-strong-limit 260000<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>savehist-mode 1<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> history-length t  <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">t &#12391;&#28961;&#21046;&#38480;</span>
      savehist-file <span style="color: #93a8c6;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"history"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3c92ed6" class="outline-3">
<h3 id="org3c92ed6">ファイル，デイレクトリ整理</h3>
<div class="outline-text-3" id="text-org3c92ed6">
<p>
他にもイロイロありそう．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">url</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> url-configuration-directory <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"url"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">nsm</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">featurep</span> '<span style="color: #FFBF7F;">nsm</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> nsm-settings-file <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"network-settings.data"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf4dce33" class="outline-3">
<h3 id="orgf4dce33"><code>recentf</code>: 最近使ったファイル履歴の保管</h3>
<div class="outline-text-3" id="text-orgf4dce33">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">recentf</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'after-init-hook 'recentf-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> recentf-max-saved-items 256
        recentf-save-file <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #97b098;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"recentf"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        recentf-auto-cleanup 'never
        recentf-exclude '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">".recentf"</span>
                          <span style="color: #7FFF7F;">"^/tmp\\.*"</span>
                          <span style="color: #7FFF7F;">"^/private\\.*"</span>
                          <span style="color: #7FFF7F;">"^/var/folders\\.*"</span>
                          <span style="color: #7FFF7F;">"/TAGS$"</span>
                          <span style="color: #7FFF7F;">"^/home/uwabami/.mozilla/\\.*"</span>
                          <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org68b15ff" class="outline-3">
<h3 id="org68b15ff"><code>.elc</code> と <code>.el</code> の timestamp を比較し，新しい方を読み込む</h3>
<div class="outline-text-3" id="text-org68b15ff">
<p>
<code>load-prefer-newer</code> は Emacs &gt;= 24.4 から．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #93a8c6;">(</span>boundp 'load-prefer-newer<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> load-prefer-newer t<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org4a8b070" class="outline-3">
<h3 id="org4a8b070">ガベージコレクションの <del>頻度を下げる</del> 表示をしない</h3>
<div class="outline-text-3" id="text-org4a8b070">
<p>
message に gc が走っていることを表示しない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> gc-cons-threshold <span style="color: #93a8c6;">(</span>* 8 1024 1024<span style="color: #93a8c6;">)</span>
      garbage-collection-messages nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>gc-cons-threshold</code> はとりあえず default の設定に.
メモリ喰いな拡張を入れている場合には, 安易に <code>gc-cons-threshold</code> を上げるのは考えものである.
「gc が走る→大きな領域を掃除するのでその間 emacs が止まる」という事を頻繁に経験することになるだろう.
</p>
</div>
</div>
<div id="outline-container-org0697d39" class="outline-3">
<h3 id="org0697d39"><code>abbrev</code>: 略語展開</h3>
<div class="outline-text-3" id="text-org0697d39">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">abbrev</span>
  <span style="color: #7FBFFF;">:diminish</span> abbrev-mode
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> abbrev-file-name <span style="color: #b0b1a3;">(</span>concat my:d:share <span style="color: #7FFF7F;">"abbrev_defs"</span><span style="color: #b0b1a3;">)</span>
        save-abbrevs t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq-default</span> abbrev-mode t<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc5be4e8" class="outline-3">
<h3 id="orgc5be4e8"><code>eldoc</code>: emacs-lisp document</h3>
<div class="outline-text-3" id="text-orgc5be4e8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">eldoc</span>
  <span style="color: #7FBFFF;">:diminish</span> eldoc-mode
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'emacs-lisp-mode-hook 'turn-on-eldoc-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf51ae85" class="outline-3">
<h3 id="orgf51ae85"><code>midnight</code>: 一定期間使用しなかった buffer を自動削除</h3>
<div class="outline-text-3" id="text-orgf51ae85">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">midnight</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> clean-buffer-list-delay-general 1<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga2ec2c7" class="outline-3">
<h3 id="orga2ec2c7"><code>uniquify</code>: モードラインのファイル名にディレクトリも表示する</h3>
<div class="outline-text-3" id="text-orga2ec2c7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">uniquify</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> uniquify-buffer-name-style 'post-forward-angle-brackets
        uniquify-min-dir-content 1<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgef2c1af" class="outline-3">
<h3 id="orgef2c1af"><code>whitespace</code>: 空白の強調表示</h3>
<div class="outline-text-3" id="text-orgef2c1af">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">whitespace</span>
  <span style="color: #7FBFFF;">:diminish</span> global-whitespace-mode
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> whitespace-line-column 72
        whitespace-style '<span style="color: #b0b1a3;">(</span>face              <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">face&#12434;&#20351;&#12387;&#12390;&#35222;&#35226;&#21270;&#12377;&#12427;&#65294;</span>
                           trailing          <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#34892;&#26411;&#12398;&#31354;&#30333;&#12434;&#23550;&#35937;&#12392;&#12377;&#12427;&#65294;</span>
                           tabs              <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">tab</span>
                           spaces            <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">space</span>
                           <span style="color: #b0b1a3;">)</span>
        whitespace-display-mappings '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>space-mark ?\u3000 <span style="color: #aebed8;">[</span>?\&#9633;<span style="color: #aebed8;">]</span><span style="color: #97b098;">)</span>
                                      <span style="color: #97b098;">(</span>tab-mark ?\t <span style="color: #aebed8;">[</span>?\u00BB ?\t<span style="color: #aebed8;">]</span> <span style="color: #aebed8;">[</span>?\\ ?\t<span style="color: #aebed8;">]</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        whitespace-space-regexp <span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">\u3000+</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span>
        whitespace-global-modes '<span style="color: #b0b1a3;">(</span>not
                                  eww-mode
                                  term-mode
                                  eshell-mode
                                  org-agenda-mode
                                  calendar-mode<span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-whitespace-mode 1<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3185cdd" class="outline-3">
<h3 id="org3185cdd"><code>saveplace</code>: 前回の修正位置を記憶する.</h3>
<div class="outline-text-3" id="text-org3185cdd">
<p>
記憶の保存先は <code>~/.emacs.d/tmp/emacs-places</code> に変更.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">saveplace</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq-default</span> save-place t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> save-place-file <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"emacs-places"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1bcefa9" class="outline-3">
<h3 id="org1bcefa9"><code>time-stamp</code>: 保存時に timestamp を自動更新</h3>
<div class="outline-text-3" id="text-org1bcefa9">
<p>
デフォルトではいろいろと衝突したので
更新文字列を変更し， <code>＄Lastupdate: 2</code> (＄は半角) があったら timestamp を更新する様にした．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">time-stamp</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> time-stamp-active t
        time-stamp-line-limit 10
        time-stamp-start <span style="color: #7FFF7F;">"$Lastupdate: 2"</span>
        time-stamp-end <span style="color: #7FFF7F;">"\\$"</span>
        time-stamp-format <span style="color: #7FFF7F;">"%03y-%02m-%02d %02H:%02M:%02S"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'before-save-hook 'time-stamp<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
モード独自の設定(例えば Org とか)に関しては別途．
</p>
</div>
</div>
<div id="outline-container-org43716f0" class="outline-3">
<h3 id="org43716f0"><code>tramp</code>: ssh 越しにファイルを編集</h3>
<div class="outline-text-3" id="text-org43716f0">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">tramp</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> tramp-persistency-file-name <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"tramp"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org31056bc" class="outline-3">
<h3 id="org31056bc"><code>bookmark</code>: bookmark ファイル</h3>
<div class="outline-text-3" id="text-org31056bc">
<p>
イマイチ使いこなせてない. 場所だけ変更しておく.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> bookmark-default-file <span style="color: #93a8c6;">(</span>concat my:d:share <span style="color: #7FFF7F;">"bookmarks"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcd6b08d" class="outline-3">
<h3 id="orgcd6b08d"><code>eww</code>: 内蔵ブラウザ</h3>
<div class="outline-text-3" id="text-orgcd6b08d">
<p>
内蔵ブラウザの設定: 幅と背景色の指定がメインだが、上手くうごいてくれていない、ような。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">eww</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">bind-keys</span> <span style="color: #7FBFFF;">:map</span> eww-mode-map
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"r"</span>  . eww-reload<span style="color: #b0b1a3;">)</span>
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"o"</span>  . eww<span style="color: #b0b1a3;">)</span>
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"&amp;"</span>  . eww-browse-with-external-browser<span style="color: #b0b1a3;">)</span>
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"b"</span>  . eww-back-url<span style="color: #b0b1a3;">)</span>
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"]"</span>  . eww-next-url<span style="color: #b0b1a3;">)</span>
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"["</span>  . eww-previous-url<span style="color: #b0b1a3;">)</span>
             <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"g"</span>  . eww-top-url<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">eww</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>file-directory-p <span style="color: #97b098;">(</span>expand-file-name <span style="color: #7FFF7F;">"eww"</span> my:d:tmp<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>make-directory <span style="color: #97b098;">(</span>expand-file-name <span style="color: #7FFF7F;">"eww"</span> my:d:tmp<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> eww-bookmarks-directory <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #7FFF7F;">"eww"</span> my:d:tmp<span style="color: #b0b1a3;">)</span>
        eww-search-prefix <span style="color: #7FFF7F;">"https://www.google.com/search?&amp;gws_rd=cr&amp;complete=0&amp;pws=0&amp;tbs=li:1&amp;lr=lang_ja|lang_en&amp;q="</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#32972;&#26223;&#33394;&#31561;&#12398;&#35373;&#23450;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defvar eww-disable-colorize nil)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defun shr-colorize-region--disable (orig start end fg &amp;optional bg &amp;rest _)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(unless eww-disable-colorize</span>
  <span style="color: #a5a5a6;">;;     </span><span style="color: #a5a5a6;">(funcall orig start end fg)))</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(advice-add 'shr-colorize-region :around 'shr-colorize-region--disable)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(advice-add 'eww-colorize-region :around 'shr-colorize-region--disable)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defun eww-disable-color ()</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">"eww &#12391;&#25991;&#23383;&#33394;&#12434;&#21453;&#26144;&#12373;&#12379;&#12394;&#12356;"</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(interactive)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(setq-local eww-disable-colorize t)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(eww-reload))</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defun eww-enable-color ()</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">"eww &#12391;&#25991;&#23383;&#33394;&#12434;&#21453;&#26144;&#12373;&#12379;&#12427;"</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(interactive)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(setq-local eww-disable-colorize nil)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(eww-reload))</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12486;&#12461;&#12473;&#12488;&#24133;&#12398;&#25351;&#23450;. setq &#12391; shr-width &#12434;&#25351;&#23450;&#12375;&#12390;&#12418;&#21453;&#26144;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;, &#27096;&#12394;?</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defun my:shr-insert-document--for-eww (&amp;rest them)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(let ((shr-width 68)) (apply them)))</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defun my:eww-display-html--fill-column (&amp;rest them)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(advice-add 'shr-insert-document :around 'my:shr-insert-document--for-eww)</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(unwind-protect</span>
  <span style="color: #a5a5a6;">;;       </span><span style="color: #a5a5a6;">(apply them)</span>
  <span style="color: #a5a5a6;">;;     </span><span style="color: #a5a5a6;">(advice-remove 'shr-insert-document 'my:shr-insert-document--for-eww)))</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(advice-add 'eww-display-html :around 'my:eww-display-html--fill-column)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">buffer &#12434; rename</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(defun eww-mode-hook--rename-buffer ()</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">"Rename eww browser's buffer so sites open in new page."</span>
  <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(rename-buffer "eww" t))</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(add-hook 'eww-mode-hook 'eww-mode-hook--rename-buffer)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdc6565c" class="outline-3">
<h3 id="orgdc6565c"><code>browse-url</code></h3>
<div class="outline-text-3" id="text-orgdc6565c">
<p>
Firefox の呼び出し方が変わったので，そのために関数を追加．
詳細は <a href="http://www.emacswiki.org/emacs/BrowseUrl">http://www.emacswiki.org/emacs/BrowseUrl</a> を参照のこと．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">browse-url</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-j"</span> . browse-url-at-point<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">browse-url-firefox</span> <span style="color: #b0b1a3;">(</span>url <span style="color: #FFFF7F;">&amp;optional</span> new-window<span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"@see http://www.emacswiki.org/emacs/BrowseUrl"</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">interactive</span> <span style="color: #97b098;">(</span>browse-url-interactive-arg <span style="color: #7FFF7F;">"URL: "</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> url <span style="color: #97b098;">(</span>browse-url-encode-url url<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">let*</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>process-environment <span style="color: #b0b0b3;">(</span>browse-url-process-environment<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
           <span style="color: #aebed8;">(</span>window-args <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">browse-url-maybe-new-window</span> new-window<span style="color: #90a890;">)</span>
                            <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">if</span> browse-url-firefox-new-window-is-tab
                                '<span style="color: #a2b6da;">(</span><span style="color: #7FFF7F;">"-new-tab"</span><span style="color: #a2b6da;">)</span>
                              '<span style="color: #a2b6da;">(</span><span style="color: #7FFF7F;">"-new-window"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
           <span style="color: #aebed8;">(</span>ff-args <span style="color: #b0b0b3;">(</span>append browse-url-firefox-arguments window-args <span style="color: #90a890;">(</span>list url<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
           <span style="color: #aebed8;">(</span>process-name <span style="color: #b0b0b3;">(</span>concat <span style="color: #7FFF7F;">"firefox "</span> url<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
           <span style="color: #aebed8;">(</span>process <span style="color: #b0b0b3;">(</span>apply 'start-process process-name nil
                           browse-url-firefox-program ff-args<span style="color: #b0b0b3;">)</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #b0b1a3;">(</span>executable-find <span style="color: #7FFF7F;">"firefox"</span><span style="color: #b0b1a3;">)</span>
      <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> browse-url-browser-function 'browse-url-firefox
            shr-external-browser 'browse-url-firefox<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> browse-url-browser-function 'eww-browse-url<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0a53ae3" class="outline-3">
<h3 id="org0a53ae3"><code>server</code>: Emacs server</h3>
<div class="outline-text-3" id="text-org0a53ae3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">server</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>server-running-p<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>server-start<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf307b6f" class="outline-2">
<h2 id="orgf307b6f">shell との連携</h2>
<div class="outline-text-2" id="text-orgf307b6f">
<p>
詳細は
</p>
<ul class="org-ul">
<li><a href="https://masutaka.net/chalow/2011-09-28-1.html">ターミナルの zsh と Emacs を風のように駆け抜ける！</a></li>
<li><a href="http://syohex.hatenablog.com/entry/20111026/1319606395">cdeを改良</a></li>
<li><a href="https://qiita.com/__hage/items/2dd732b4dd68e124e8bd">cdeとelscreen-separate-buffer-listの相性が悪い</a></li>
</ul>
<p>
などを参考に.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">return-current-working-directory-to-shell</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>expand-file-name
   <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">with-current-buffer</span>
       <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">featurep</span> '<span style="color: #FFBF7F;">elscreen</span><span style="color: #aebed8;">)</span>
           <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">let*</span> <span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span>frame-confs <span style="color: #a2b6da;">(</span>elscreen-get-frame-confs <span style="color: #9cb6ad;">(</span>selected-frame<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #90a890;">(</span>num <span style="color: #a2b6da;">(</span>nth 1 <span style="color: #9cb6ad;">(</span>assoc 'screen-history frame-confs<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #90a890;">(</span>cur-window-conf
                   <span style="color: #a2b6da;">(</span>assoc 'window-configuration
                          <span style="color: #9cb6ad;">(</span>assoc num <span style="color: #8a8a8a;">(</span>assoc 'screen-property frame-confs<span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #90a890;">(</span>marker <span style="color: #a2b6da;">(</span>nth 2 cur-window-conf<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
             <span style="color: #b0b0b3;">(</span>marker-buffer marker<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
         <span style="color: #aebed8;">(</span>nth 1
              <span style="color: #b0b0b3;">(</span>assoc 'buffer-list
                     <span style="color: #90a890;">(</span>nth 1 <span style="color: #a2b6da;">(</span>nth 1 <span style="color: #9cb6ad;">(</span>current-frame-configuration<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
     default-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org20cef7f" class="outline-2">
<h2 id="org20cef7f">日本語入力: <code>ddskk</code></h2>
<div class="outline-text-2" id="text-org20cef7f">
<p>
<a href="http://openlab.ring.gr.jp/skk/ddskk-ja.html">Daredevil SKK (DDSKK)</a> をメインで使用中．無いと途方に暮れる．
ちなみにGTKが有効になっていると <code>gtk-immodule</code> なんかと衝突するので
<code>~/.Xresources</code> で xim を無効にしておくと良い．
例えば以下の様に:
</p>
<div class="org-src-container">
<pre class="src src-conf">! disable XIM
Emacs*useXIM: false
</pre>
</div>
</div>
<div id="outline-container-org8dd9f00" class="outline-3">
<h3 id="org8dd9f00">Emacs 本体側の設定</h3>
<div class="outline-text-3" id="text-org8dd9f00">
<p>
実際の設定は別ファイルで行なわれるため
ここでは設定ファイルの位置変更を変更している．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">skk</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x j"</span>   . skk-mode<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x C-j"</span> . skk-mode<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-\\"</span>    . skk-mode<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> skk-user-directory <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"skk"</span><span style="color: #b0b1a3;">)</span>
        skk-init-file <span style="color: #b0b1a3;">(</span>concat user-emacs-directory <span style="color: #7FFF7F;">"init-ddskk"</span><span style="color: #b0b1a3;">)</span>
        default-input-method <span style="color: #7FFF7F;">"japanese-skk"</span> <span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org354d5fc" class="outline-3">
<h3 id="org354d5fc">DDSKK 本体の設定</h3>
<div class="outline-text-3" id="text-org354d5fc">
<p>
sticky shift: <a href="http://homepage1.nifty.com/blankspace/emacs/sticky.html">sticky shift</a> を参照のこと.
ddskk の 14.2 以降から同梱されるようになった(ありがたい)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-sticky-key <span style="color: #7FFF7F;">";"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
変換候補の表示位置
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-show-candidates-always-pop-to-buffer t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
候補表示件数を2列に
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-henkan-show-candidates-rows 2<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
日本語表示しない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-japanese-message-and-error nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
メニューを日本語にしない -&gt; toolbar 非表示だし.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-show-japanese-menu nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
注釈の表示
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-show-annotation nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
インジケータの表示のカスタマイズ
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-latin-mode-string <span style="color: #7FFF7F;">"[_A]"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-hiragana-mode-string <span style="color: #7FFF7F;">"[&#12354;]"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-katakana-mode-string <span style="color: #7FFF7F;">"[&#12450;]"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-jisx0208-latin-mode-string <span style="color: #7FFF7F;">"[&#65313;]"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-jisx0201-mode-string <span style="color: #7FFF7F;">"[_&#65393;]"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-abbrev-mode-string <span style="color: #7FFF7F;">"[aA]"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-indicator-use-cursor-color nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
インジケータを左端に表示
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-status-indicator 'left<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
mode-line が動くのが許せないので，ちょっと修正
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defadvice</span> <span style="color: #BF7FFF;">skk-make-indicator-alist</span>
    <span style="color: #93a8c6;">(</span>after my:set-skk-default-indicator activate<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">dolist</span> <span style="color: #b0b1a3;">(</span>elem
           '<span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>abbrev <span style="color: #7FFF7F;">" [aA]"</span> . <span style="color: #7FFF7F;">"--[aA]:"</span><span style="color: #aebed8;">)</span>
             <span style="color: #aebed8;">(</span>latin <span style="color: #7FFF7F;">" [_A]"</span> . <span style="color: #7FFF7F;">"--[_A]:"</span><span style="color: #aebed8;">)</span>
             <span style="color: #aebed8;">(</span>default <span style="color: #7FFF7F;">" [--]"</span> . <span style="color: #7FFF7F;">"--[--]:"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> ad-return-value
          <span style="color: #97b098;">(</span>append <span style="color: #aebed8;">(</span>cons elem nil<span style="color: #aebed8;">)</span>
                  <span style="color: #aebed8;">(</span>delq <span style="color: #b0b0b3;">(</span>assoc <span style="color: #90a890;">(</span>car elem<span style="color: #90a890;">)</span> ad-return-value<span style="color: #b0b0b3;">)</span> ad-return-value<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-show-inline t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
カーソルには色をつけない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-use-color-cursor nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
<div id="outline-container-org153e129" class="outline-4">
<h4 id="org153e129">編集関連</h4>
<div class="outline-text-4" id="text-org153e129">
<p>
キーバインド
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>global-set-key <span style="color: #7FFF7F;">"\C-x\C-j"</span> 'skk-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>global-set-key <span style="color: #7FFF7F;">"\C-xj"</span> 'skk-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>global-set-key <span style="color: #7FFF7F;">"\C-j"</span> 'skk-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>global-set-key <span style="color: #7FFF7F;">"\C-\\"</span> 'skk-mode<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
半角カナを入力
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-use-jisx0201-input-method t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
Enter で改行しない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-egg-like-newline t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
"「"を入力したら"」"も自動で挿入
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-auto-insert-paren t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
句読点変換ルール
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-kuten-touten-alist
      '<span style="color: #93a8c6;">(</span>
        <span style="color: #b0b1a3;">(</span>jp    . <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"&#12290;"</span> . <span style="color: #7FFF7F;">"&#12289;"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span>en-jp . <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"&#65294;"</span> . <span style="color: #7FFF7F;">"&#65292;"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span>en    . <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">". "</span> . <span style="color: #7FFF7F;">", "</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq-default</span> skk-kutouten-type 'en<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
全角記号の変換: @ での日付入力は使わない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-rom-kana-rule-list
      <span style="color: #93a8c6;">(</span>append skk-rom-kana-rule-list
              '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"!"</span> nil <span style="color: #7FFF7F;">"!"</span><span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">":"</span> nil <span style="color: #7FFF7F;">":"</span><span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">";"</span> nil <span style="color: #7FFF7F;">";"</span><span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"?"</span> nil <span style="color: #7FFF7F;">"?"</span><span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"z "</span> nil <span style="color: #7FFF7F;">"&#12288;"</span><span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\"</span> nil <span style="color: #7FFF7F;">"\\"</span><span style="color: #97b098;">)</span>
                <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"@"</span> nil <span style="color: #7FFF7F;">"@"</span><span style="color: #97b098;">)</span>
                <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
送り仮名が厳密に正しい候補を優先
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-henkan-strict-okuri-precedence t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
辞書の共有
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-share-private-jisyo t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb3789b6" class="outline-4">
<h4 id="orgb3789b6">インクリメンタルサーチ</h4>
<div class="outline-text-4" id="text-orgb3789b6">
<p>
minibuffer 内では強制的に skk off.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-hook 'skk-mode-hook
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #97b098;">(</span>skk-in-minibuffer-p<span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span>skk-mode-exit<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-isearch-start-mode 'latin<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
インクリメンタルサーチは migemo に任せることに．
</p>
</div>
</div>
<div id="outline-container-orgd49a0fa" class="outline-4">
<h4 id="orgd49a0fa">辞書の設定</h4>
<div class="outline-text-4" id="text-orgd49a0fa">
<p>
追加している辞書の一覧は
</p>
<ul class="org-ul">
<li><a href="http://www.chibutsu.org/jisho/">地球物理辞書</a></li>
<li><a href="http://www.geocities.jp/living_with_plasma/tanudic.html">天文・天体物理用語の漢字変換用辞書</a></li>
<li>はてなキーワード</li>
<li><a href="http://matsucon.net/material/dic/">2ちゃんねる顔文字辞書 MatsuCon</a></li>
<li><a href="http://matsucon.net/">MatsuCon</a></li>
</ul>
<p>
といった所.
はてなキーワードからの辞書の抽出は <a href="http://d.hatena.ne.jp/znz">znz</a> さんの
</p>
<ul class="org-ul">
<li><a href="http://rubyist.g.hatena.ne.jp/znz/20060924/p1">「はてなダイアリーキーワードふりがなリスト」を SKK の辞書に変換</a></li>
</ul>
<p>
を参考に.
<a href="http://matsucon.net/">MatsuCon</a> で公開されている顔文字に関しては
顔文字に ; や が含まれている場合に, 適宜quoteする必要があるので
以下のスクリプトで適当に変換.
</p>
<div class="org-src-container">
<pre class="src src-ruby"><span style="color: #a5a5a6;">#</span><span style="color: #a5a5a6;">!/usr/bin/env ruby</span>
<span style="color: #7FBFFF;">require</span> <span style="color: #7FFF7F;">'nkf'</span>
src = <span style="color: #FFFF7F;">ARGV</span>[0]
<span style="color: #FF7F7F;">if</span> <span style="color: #FFFF7F;">ARGV</span>.size &lt; 1
  <span style="color: #7FBFFF;">puts</span> <span style="color: #7FFF7F;">"usage: ime2skk.rb ime_dictionary"</span>
  <span style="color: #7FBFFF;">exit</span> 0
<span style="color: #FF7F7F;">end</span>
<span style="color: #FFFF7F;">File</span>.open(src, <span style="color: #7FFF7F;">"r"</span>) {|f|
  f.each <span style="color: #FF7F7F;">do</span> |line|
    line_euc = <span style="color: #FFFF7F;">NKF</span>.nkf(<span style="color: #7FFF7F;">"-S -e"</span>,line)
    <span style="color: #FF7F7F;">if</span> line_euc =~ <span style="color: #7FFF7F;">/^([^!]+?)\t(.+?)\t.+$/</span>
      entry = <span style="color: #7FBFFF;">$1</span>
      content = <span style="color: #7FBFFF;">$2</span>
      <span style="color: #FF7F7F;">if</span> content =~<span style="color: #7FFF7F;">/;/</span>
        <span style="color: #7FBFFF;">puts</span> entry + <span style="color: #7FFF7F;">" /(concat \""</span> + content.gsub(<span style="color: #7FFF7F;">';'</span>,<span style="color: #7FFF7F;">'\\\\073'</span>) + <span style="color: #7FFF7F;">"\")/"</span>
      <span style="color: #FF7F7F;">elsif</span> content =~<span style="color: #7FFF7F;">/\//</span>
        <span style="color: #7FBFFF;">puts</span> entry + <span style="color: #7FFF7F;">" /(concat \""</span> + content.gsub(<span style="color: #7FFF7F;">'/'</span>,<span style="color: #7FFF7F;">'\\\\057'</span>) + <span style="color: #7FFF7F;">"\")/"</span>
      <span style="color: #FF7F7F;">else</span>
        <span style="color: #7FBFFF;">puts</span> entry + <span style="color: #7FFF7F;">" /"</span> + content + <span style="color: #7FFF7F;">"/"</span>
      <span style="color: #FF7F7F;">end</span>
    <span style="color: #FF7F7F;">end</span>
  <span style="color: #FF7F7F;">end</span>
}
</pre>
</div>
<p>
他にも quote する必要あるような気もするけれど, それは気がついた時に.
</p>

<p>
辞書サーバの指定は以下.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">cond</span>
 <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>getenv <span style="color: #7FFF7F;">"SKKSERVER"</span><span style="color: #b0b1a3;">)</span>
  <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> skk-server-host <span style="color: #7FFF7F;">"127.0.0.1"</span>
        skk-server-portnum <span style="color: #7FFF7F;">"1178"</span>
        skk-large-jisyo  nil<span style="color: #b0b1a3;">)</span>
  <span style="color: #b0b1a3;">(</span>add-to-list 'skk-search-prog-list
               '<span style="color: #97b098;">(</span>skk-server-completion-search<span style="color: #97b098;">)</span> t<span style="color: #b0b1a3;">)</span>
  <span style="color: #b0b1a3;">(</span>add-to-list 'skk-search-prog-list
               '<span style="color: #97b098;">(</span>skk-comp-by-server-completion<span style="color: #97b098;">)</span> t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span>t
  <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> skk-get-jisyo-directory <span style="color: #97b098;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"skk-jisyo"</span><span style="color: #97b098;">)</span>
        skk-large-jisyo <span style="color: #97b098;">(</span>concat skk-get-jisyo-directory <span style="color: #7FFF7F;">"/SKK-JISYO.L"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
辞書登録の際に送り仮名を削除
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-check-okurigana-on-touroku 'auto<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
漢字登録のミスをチェックする
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> skk-check-okurigana-on-touroku t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7ae87ad" class="outline-4">
<h4 id="org7ae87ad">動的補完</h4>
<div class="outline-text-4" id="text-org7ae87ad">
<p>
まだ設定していない&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">;; &#21205;&#30340;&#35036;&#23436;</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq skk-dcomp-activate t)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq skk-dcomp-multiple-activate t)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq skk-dcomp-multiple-rows 5)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">;; &#21205;&#30340;&#35036;&#23436;&#12398;&#35079;&#25968;&#34920;&#31034;&#32676;&#12398;&#12501;&#12455;&#12452;&#12473;</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-foreground 'skk-dcomp-multiple-face "Black")</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-background 'skk-dcomp-multiple-face "LightGoldenrodYellow")</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-bold-p 'skk-dcomp-multiple-face nil)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">;; &#21205;&#30340;&#35036;&#23436;&#12398;&#35079;&#25968;&#34920;&#31034;&#37089;&#12398;&#35036;&#23436;&#37096;&#20998;&#12398;&#12501;&#12455;&#12452;&#12473;</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-foreground 'skk-dcomp-multiple-trailing-face "dim gray")</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-bold-p 'skk-dcomp-multiple-trailing-face nil)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">;; &#21205;&#30340;&#35036;&#23436;&#12398;&#35079;&#25968;&#34920;&#31034;&#37089;&#12398;&#36984;&#25246;&#23550;&#35937;&#12398;&#12501;&#12455;&#12452;&#12473;</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-foreground 'skk-dcomp-multiple-selected-face "White")</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-background 'skk-dcomp-multiple-selected-face "LightGoldenrod4")</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-face-bold-p 'skk-dcomp-multiple-selected-face nil)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac78492" class="outline-4">
<h4 id="orgac78492">部首変換, 総画数変換</h4>
<div class="outline-text-4" id="text-orgac78492">
<p>
上手く使いこなせていない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-to-list 'skk-search-prog-list
             '<span style="color: #93a8c6;">(</span>skk-tankan-search 'skk-search-jisyo-file
                                 skk-large-jisyo 10000<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb11ba43" class="outline-2">
<h2 id="orgb11ba43">Copy &amp; Paste: <code>xclip</code></h2>
<div class="outline-text-2" id="text-orgb11ba43">
<p>
<code>xclip</code> で clipboard とデータをやりとり．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">xclip</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>executable-find <span style="color: #7FFF7F;">"xclip"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>xclip-mode 1<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
clipboard と PRIMARY の同期には <code>gpaste</code> を使っている．
</p>
</div>
</div>

<div id="outline-container-org705f598" class="outline-2">
<h2 id="org705f598">インクリメンタル検索: <code>migemo</code></h2>
<div class="outline-text-2" id="text-org705f598">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">migemo</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>executable-find <span style="color: #7FFF7F;">"cmigemo"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> migemo-command <span style="color: #7FFF7F;">"cmigemo"</span>
        migemo-options '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"-q"</span> <span style="color: #7FFF7F;">"--emacs"</span><span style="color: #b0b1a3;">)</span>
        migemo-dictionary <span style="color: #7FFF7F;">"/usr/share/cmigemo/utf-8/migemo-dict"</span>
        migemo-user-dictionary nil
        migemo-regex-dictionary nil
        migemo-coding-system 'utf-8-unix<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>migemo-init<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf98f111" class="outline-2">
<h2 id="orgf98f111">補完: <code>ido</code></h2>
<div class="outline-text-2" id="text-orgf98f111">
<p>
補完は <code>ido</code> が軽いし速いので好み.
見た目がちょっと簡素すぎる気もするので、なんとか弄りたい所ではある。
</p>
</div>
<div id="outline-container-org8cd9ee1" class="outline-3">
<h3 id="org8cd9ee1"><code>ido</code> の設定</h3>
<div class="outline-text-3" id="text-org8cd9ee1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ido</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x C-f"</span> . ido-find-file<span style="color: #b0b1a3;">)</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">("C-x d"   . ido-dired)</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">("C-x C-d" . ido-dired)</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">("C-x b"   . ibuffer)</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">("C-x C-b" . ibuffer)</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">("C-x M-b" . ibuffer)</span>
         <span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>ido-mode t<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(ido-everywhere t)  &lt;- Wanderlust &#12415;&#12383;&#12356;&#12395;&#65292;&#36942;&#21435;&#12398;&#36984;&#25246;&#12434;&#35226;&#12360;&#12390;&#12356;&#12427;&#22900;&#12392;&#30456;&#24615;&#24746;&#12356;.</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ido-enable-prefix nil             <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">prefix match &#20837;&#21147;&#12434;&#20808;&#38957;&#19968;&#33268;&#21487;&#33021;</span>
        ido-confirm-unique-completion t   <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">TAB &#12391;&#21517;&#21069;&#12398;&#19968;&#33268;&#12414;&#12391;. &#12381;&#12398;&#24460; RET &#12391;&#23455;&#34892;</span>
        ido-enable-flex-matching t        <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">flx matching &#12434;&#35430;&#12377;&#38555;&#12395;&#12399; prefix &#12434;&#28961;&#21177;&#21270;&#12377;&#12427;&#12371;&#12392;</span>
        ido-enable-dot-prefix t           <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">. &#12434; prefix &#12392;&#12375;&#12390;&#25201;&#12358;</span>
        ido-default-file-method   'selected-window
        ido-default-buffer-method 'selected-window
        ido-max-directory-size 10000
        ido-enable-tramp-completion nil
        ido-use-faces t
        ido-ignore-extensions t
        ido-cannot-complete-command 'ido-next-match
        ido-save-directory-list-file <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"ido.last"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#35036;&#23436;&#12391;&#28961;&#35222;&#12377;&#12427;&#25313;&#24373;&#23376;&#12398;&#36861;&#21152;&#65294;&#12381;&#12398;&#12358;&#12385;&#22679;&#12360;&#12427;&#65294;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">cl-loop</span> for ext in
           '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">".dvi"</span>
             <span style="color: #7FFF7F;">".fdb_latexmk"</span>
             <span style="color: #7FFF7F;">".fls"</span>
             <span style="color: #7FFF7F;">".ilg"</span>
             <span style="color: #7FFF7F;">".jqz"</span>
             <span style="color: #7FFF7F;">".mod"</span>
             <span style="color: #7FFF7F;">".nav"</span>
             <span style="color: #7FFF7F;">".out"</span>
             <span style="color: #7FFF7F;">".snm"</span>
             <span style="color: #7FFF7F;">".synctex.gz"</span>
             <span style="color: #7FFF7F;">".vrb"</span>
             <span style="color: #b0b1a3;">)</span>
           do <span style="color: #b0b1a3;">(</span>add-to-list 'completion-ignored-extensions ext<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'ido-setup-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>define-key ido-completion-map <span style="color: #aebed8;">(</span>kbd <span style="color: #7FFF7F;">"C-h"</span><span style="color: #aebed8;">)</span> 'ido-delete-backward-updir<span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>define-key ido-completion-map <span style="color: #aebed8;">(</span>kbd <span style="color: #7FFF7F;">"C-l"</span><span style="color: #aebed8;">)</span> 'ido-delete-backward-updir<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:ido-disable-line-trucation</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>set <span style="color: #97b098;">(</span>make-local-variable 'truncate-lines<span style="color: #97b098;">)</span> nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'ido-minibuffer-setup-hook 'my:ido-disable-line-trucation<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org50cf891" class="outline-3">
<h3 id="org50cf891"><code>flx-ido</code>: flex match の強化</h3>
<div class="outline-text-3" id="text-org50cf891">
<p>
曖昧マッチが非常に直感的になった．地味に便利で手放せない．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">flx-ido</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>flx-ido-mode 1<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> flx-ido-use-faces nil
        flx-ido-threshold 10000<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org13c9200" class="outline-3">
<h3 id="org13c9200"><code>ido-grid-mode</code>: 候補を並べて表示</h3>
<div class="outline-text-3" id="text-org13c9200">
<p>
横に並ぶと正直シンドイので並べてみる。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>package-installed-p 'ido-grid<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>ido-grid
            <span style="color: #7FBFFF;">:fetcher</span> github
            <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"larkery/ido-grid.el"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ido-grid</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ido-grid-enabled t
        ido-grid-start-small nil
        ido-grid-rows 0.15
        ido-grid-max-columns nil
        ido-grid-indent 1
        ido-grid-column-padding 3
        ido-grid-bind-keys t
        <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>ido-grid-enable<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:ido-grid-force-one-columns</span> <span style="color: #b0b1a3;">(</span>o <span style="color: #FFFF7F;">&amp;rest</span> args<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>ido-grid-max-columns 1<span style="color: #aebed8;">)</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">single vertical col</span>
          <span style="color: #aebed8;">(</span>ido-grid-start-small nil<span style="color: #aebed8;">)</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">popup immediately</span>
          <span style="color: #aebed8;">(</span>ido-grid-rows 0.15<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">15% of frame height</span>
      <span style="color: #97b098;">(</span>apply o args<span style="color: #97b098;">)</span>
      <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6a76b72" class="outline-3">
<h3 id="org6a76b72"><code>ido-recentf</code>: recentf を ido で</h3>
<div class="outline-text-3" id="text-org6a76b72">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">ido-recentf-open</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Use `</span><span style="color: #FFBF7F;">ido-completing-read</span><span style="color: #7FFF7F;">' to \\[</span><span style="color: #FFBF7F;">find-file</span><span style="color: #7FFF7F;">] a recent file"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #b0b1a3;">(</span>find-file <span style="color: #97b098;">(</span>ido-completing-read <span style="color: #7FFF7F;">"Find recent file: "</span> recentf-list<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
      <span style="color: #b0b1a3;">(</span>message <span style="color: #7FFF7F;">"Opening file..."</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>message <span style="color: #7FFF7F;">"Aborting"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">bind-key</span> <span style="color: #7FFF7F;">"C-x C-r"</span> 'ido-recentf-open<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcd00f31" class="outline-3">
<h3 id="orgcd00f31"><code>smex</code></h3>
<div class="outline-text-3" id="text-orgcd00f31">
<p>
M-x を ido で。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">smex</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"M-x"</span> . smex<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> smex-auto-update t
        smex-save-file <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"smex-items"</span><span style="color: #b0b1a3;">)</span>
        smex-prompt-string <span style="color: #7FFF7F;">"smex: "</span>
        smex-flex-matching nil
        <span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf001ca3" class="outline-2">
<h2 id="orgf001ca3">Elscreen <code>[/]</code></h2>
<div class="outline-text-2" id="text-orgf001ca3">
<p>
modeline の表示そのものは無効化しておく．
</p>
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Debian パッケージ版は古い．更新すべき</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">elscreen</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> elscreen-tab-display-control nil
        elscreen-prefix-key <span style="color: #b0b1a3;">(</span>kbd <span style="color: #7FFF7F;">"C-o"</span><span style="color: #b0b1a3;">)</span>
        elscreen-display-tab 8
        elscreen-display-screen-number nil<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>elscreen-start<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga885b12" class="outline-2">
<h2 id="orga885b12"><a href="http://syohex.hatenablog.com/entry/20130914/1379166283">zoom-window</a></h2>
<div class="outline-text-2" id="text-orga885b12">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">zoom-window</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-x C-z"</span> . zoom-window-zoom<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> zoom-window-use-elscreen t<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>zoom-window-setup<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> zoom-window-mode-line-color <span style="color: #7FFF7F;">"#7fff7f"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org435050d" class="outline-2">
<h2 id="org435050d">認証関連: <code>id-manager</code>, <code>plstore</code>, <code>oauth2</code>, <code>password-store</code></h2>
<div class="outline-text-2" id="text-org435050d">
</div>
<div id="outline-container-orga447244" class="outline-3">
<h3 id="orga447244">id-manager の設定</h3>
<div class="outline-text-3" id="text-orga447244">
<p>
ID と Password の簡単な組の管理をするのに非常に重宝している．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">id-manager</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-exists-p <span style="color: #7FFF7F;">"~/.gnupg/idm-db.gpg"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"M-7"</span> . idm-open-list-command<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> idm-database-file
        <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #7FFF7F;">"~/.gnupg/idm-db.gpg"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> idm-clipboard-expire-time-sec 30<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0142bfe" class="outline-3">
<h3 id="org0142bfe">plstore</h3>
<div class="outline-text-3" id="text-org0142bfe">
<p>
デフォルトは対称鍵暗号化なので， <code>GPG_KEY_ID</code> を設定しておく
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">plstore</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> plstore-secret-keys 'silent
        plstore-encrypt-to <span style="color: #b0b1a3;">(</span>getenv <span style="color: #7FFF7F;">"GPG_KEY_ID"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org36f8337" class="outline-3">
<h3 id="org36f8337">oauth2</h3>
<div class="outline-text-3" id="text-org36f8337">
<p>
oauth2 の認証情報は <code>plstore</code> で保存される．
ファイルの置き場所と暗号鍵の設定をしておく
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">oauth2</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> oauth2-token-file <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"oauth2.plstore"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6b11f8c" class="outline-3">
<h3 id="org6b11f8c">password-store</h3>
<div class="outline-text-3" id="text-org6b11f8c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">password-store</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:if</span> my:d:password-store
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org58ad1d2" class="outline-2">
<h2 id="org58ad1d2">Emacs-w3m</h2>
<div class="outline-text-2" id="text-org58ad1d2">
<p>
あまり使わないけれど, 一応設定しておく.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">w3m</span>
  <span style="color: #7FBFFF;">:defer</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> w3m-search-default-engine <span style="color: #7FFF7F;">"google"</span>
        w3m-use-cookies t<span style="color: #93a8c6;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(with-eval-after-load "w3m-search"</span>
<span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">'(add-to-list 'w3m-search-engine-alist</span>
<span style="color: #a5a5a6;">;;                 </span><span style="color: #a5a5a6;">'("google" "https://encrypted.google.com/search?num=100&amp;ie=utf-8&amp;oe=utf-8&amp;hl=ja&amp;safe=off&amp;filter=0&amp;pws=0&amp;complete=0&amp;gbv=1&amp;q=%s" utf-8)))</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd929ce" class="outline-2">
<h2 id="orgcd929ce"><a id="ID-544e8091-614a-4784-a889-78651a923d6c"></a>MUA の設定: <code>wanderlust</code></h2>
<div class="outline-text-2" id="text-orgcd929ce">
<p>
MUA として Wanderlust を使っている
</p>
</div>
<div id="outline-container-org40c40af" class="outline-3">
<h3 id="org40c40af">Emacs 本体側の設定</h3>
<div class="outline-text-3" id="text-org40c40af">
<p>
Emacs 本体での設定は以下の通り. Wanderlust 自体の設定は別ファイルで行なわれる．
ここでは <code>wl-init-file</code> を指定することで，設定ファイルを明示している．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">wl</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">or</span> <span style="color: #97b098;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"wl"</span><span style="color: #97b098;">)</span>
               <span style="color: #97b098;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"wl-beta"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
           <span style="color: #b0b1a3;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"rail"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:commands</span> <span style="color: #93a8c6;">(</span>wl wl-other-frame wl-draft wl-user-agent wl-user-agent-compose wl-draft-send wl-draft-kill<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>define-mail-user-agent
    'wl-user-agent
    'wl-user-agent-compose
    'wl-draft-send
    'wl-draft-kill
    'mail-send-hook<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> elmo-msgdb-directory <span style="color: #7FFF7F;">"~/.cache/wanderlust"</span>
        elmo-maildir-folder-path <span style="color: #7FFF7F;">"~/.cache/wanderlust"</span>
        elmo-cache-directory <span style="color: #7FFF7F;">"~/.cache/wanderlust"</span>
        wl-score-files-directory <span style="color: #7FFF7F;">"~/.cache/wanderlust"</span>
        wl-init-file <span style="color: #b0b1a3;">(</span>concat user-emacs-directory <span style="color: #7FFF7F;">"init-wl"</span><span style="color: #b0b1a3;">)</span>
        mail-user-agent 'wl-user-agent
        read-mail-command 'wl<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>file-directory-p elmo-msgdb-directory<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>make-directory elmo-msgdb-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>file-directory-p <span style="color: #97b098;">(</span>concat elmo-msgdb-directory <span style="color: #7FFF7F;">"/local"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>make-directory <span style="color: #97b098;">(</span>concat elmo-msgdb-directory <span style="color: #7FFF7F;">"/local"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>file-directory-p <span style="color: #97b098;">(</span>concat elmo-msgdb-directory <span style="color: #7FFF7F;">"/local/Trash"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>make-directory <span style="color: #97b098;">(</span>concat elmo-msgdb-directory <span style="color: #7FFF7F;">"/local/Trash"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
割と <code>/etc/emacs/site-start.d/65wl-beta.el</code> と重複している気がするが&#x2026;
</p>
</div>
</div>
<div id="outline-container-orgd207f75" class="outline-3">
<h3 id="orgd207f75">Wanderlust 本体の設定</h3>
<div class="outline-text-3" id="text-orgd207f75">
<p>
実際の設定は以下の通り
</p>
</div>
<div id="outline-container-orgcf338be" class="outline-4">
<h4 id="orgcf338be">依存/追加ライブラリのインストールと読み込み</h4>
<div class="outline-text-4" id="text-orgcf338be">
</div>
<div id="outline-container-org394649a" class="outline-5">
<h5 id="org394649a">rail</h5>
<div class="outline-text-5" id="text-org394649a">
<p>
SEMI や FLIM などの UA の表示に <a href="http://uwabami.github.com/rail/">rail</a> を使っている.
ちなみに rail を有効にすると, 以下の様に User-Agent が表示される
</p>

<figure>
<img src="https://uwabami.github.io/software/rail/images/wanderlust_with_or_without_rail.png" alt="wanderlust_with_or_without_rail.png">

</figure>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">eval-when-compile</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">mime-def</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">rail</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> rail-emulate-genjis t<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org675876b" class="outline-5">
<h5 id="org675876b">cp5022x を使う</h5>
<div class="outline-text-5" id="text-org675876b">
<p>
ISO-2022-JP を CP50220 として扱う.
<a href="http://d.hatena.ne.jp/kiwanami/20091103/1257243524">Wanderlustと文字コード</a> も参照のこと.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-to-list 'mime-charset-coding-system-alist '<span style="color: #93a8c6;">(</span>iso-2022-jp . cp50220<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-mime-charset 'iso-2022-jp<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org411297a" class="outline-5">
<h5 id="org411297a">elscreen-wl</h5>
<div class="outline-text-5" id="text-org411297a">
<p>
メール作成時に <code>elscreen</code> と連携してくれる．便利
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">elscreen-wl</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc3022aa" class="outline-5">
<h5 id="orgc3022aa">SEMI の追加設定</h5>
<div class="outline-text-5" id="text-orgc3022aa">
<p>
HTML メールを表示するために emacs-w3m を使う.
本当は eww でやりたいのだけれど base64 decode に難あり.
mime-setup がロードされる前に記述する必要あり.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq mime-view-text/html-previewer 'shr)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq mime-setup-enable-inline-html 'shr)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">w3m</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">mime-w3m</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> w3m-fill-column 72
        mime-view-text/html-previewer 'w3m
        mime-setup-enable-inline-html 'w3m<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>locate-library <span style="color: #7FFF7F;">"w3m"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">progn</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mime-view-text/html-previewer 'shr
          mime-setup-enable-inline-html 'shr<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">with-eval-after-load</span> 'shr
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">shr-colorize-region</span> <span style="color: #b0b1a3;">(</span>start end fg <span style="color: #FFFF7F;">&amp;optional</span> bg<span style="color: #b0b1a3;">)</span> nil<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">mime-setup</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
どのアプリケーションで開くか → <code>xdg-open</code> に丸投げ．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq mime-view-mailcap-files '("~/.mailcap"))</span>
</pre>
</div>
<p>
<code>~/.mailcap</code> 自体は以下
</p>
<div class="org-src-container">
<pre class="src src-conf">applications/*; xdg-open %s;
image/*; xdg-open %s;
video/*; xdg-open %s;
</pre>
</div>
<p>
MIME の例の保存先の変更
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> mime-situation-examples-file
      <span style="color: #93a8c6;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"mime-example"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
text/plain を html より優先 → 最近は html を表示している
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(set-alist 'mime-view-type-subtype-score-alist '(text . html) 0)</span>
</pre>
</div>
<p>
音を鳴らすアレやコレの無効化
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> mime-play-find-every-situations nil
      mime-play-delete-file-immediately nil
      process-connection-type nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org166bc79" class="outline-4">
<h4 id="org166bc79">個人情報の設定</h4>
<div class="outline-text-4" id="text-org166bc79">
<p>
具体的な設定内容は以下のファイルに置いている
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">     <span style="color: #8a8a8a;">(</span>load <span style="color: #93a8c6;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/wl-info.gpg"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
設定している内容は以下の通り
</p>
</div>
<div id="outline-container-org7f4ebb1" class="outline-5">
<h5 id="org7f4ebb1">自身のメールアドレスと購読メーリングリストの設定</h5>
<div class="outline-text-5" id="text-org7f4ebb1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">From: &#12398;&#35373;&#23450;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-from <span style="color: #93a8c6;">(</span>concat user-full-name <span style="color: #7FFF7F;">" &lt;"</span> user-mail-address <span style="color: #7FFF7F;">"&gt;"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(system-name) &#12364; FQDN &#12434;&#36820;&#12373;&#12394;&#12356;&#22580;&#21512;&#12289;</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">`</span><span style="color: #FFBF7F;">wl-local-domain</span><span style="color: #a5a5a6;">' &#12395;&#12507;&#12473;&#12488;&#21517;&#12434;&#38500;&#12356;&#12383;&#12489;&#12513;&#12452;&#12531;&#21517;&#12434;&#35373;&#23450;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-local-domain <span style="color: #7FFF7F;">"example.com"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#33258;&#20998;&#12398;&#12513;&#12540;&#12523;&#12450;&#12489;&#12524;&#12473;&#12398;&#12522;&#12473;&#12488;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-user-mail-address-list
      <span style="color: #93a8c6;">(</span>list <span style="color: #b0b1a3;">(</span>wl-address-header-extract-address wl-from<span style="color: #b0b1a3;">)</span>
            <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">"e-mail2@example.com"</span>
            <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">"e-mail3@example.net" ...</span>
            <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#33258;&#20998;&#12398;&#21442;&#21152;&#12375;&#12390;&#12356;&#12427;&#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;&#12398;&#12522;&#12473;&#12488;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-subscribed-mailing-list
      '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"wl@lists.airs.net"</span>
        <span style="color: #7FFF7F;">"apel-ja@m17n.org"</span>
        <span style="color: #7FFF7F;">"emacs-mime-ja@m17n.org"</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">"ml@example.com" ...</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org48cec54" class="outline-5">
<h5 id="org48cec54">送受信用サーバの設定</h5>
<div class="outline-text-5" id="text-org48cec54">
<p>
受信(IMAP)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-imap4-default-server <span style="color: #7FFF7F;">"your imap server"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-imap4-default-port '993<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-imap4-default-stream-type 'ssl<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
送信(SMTP)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-smtp-posting-server <span style="color: #7FFF7F;">"your smtp server"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-smtp-posting-user <span style="color: #7FFF7F;">"your account"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-smtp-posting-port 587<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-smtp-connection-type 'starttls<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-smtp-authenticate-type <span style="color: #7FFF7F;">"login"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org80c64b0" class="outline-5">
<h5 id="org80c64b0">From に応じて送信サーバをきりかえる.</h5>
<div class="outline-text-5" id="text-org80c64b0">
<p>
本来はメール作成時/返信時の template の切り替えなのだれど,
送信時の SMTP の設定を from に合わせてきりかえるようにする.
default に二重に指定しているのは，
一度別のアカウントに切り替えた後に再びトグルして戻って来た際に元に戻す(上書き)するため.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-template-alist
      '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"default"</span>
         <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"From"</span> . wl-from<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-server . <span style="color: #7FFF7F;">"your smtp server"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-user . <span style="color: #7FFF7F;">"your account"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-port . 587<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-connection-type . 'starttls<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-authenticate-type . <span style="color: #7FFF7F;">"login"</span><span style="color: #97b098;">)</span>
         <span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"example1"</span>
         <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"From"</span> . <span style="color: #7FFF7F;">"Your Name &lt;<a href="mailto:account&#64;example1.com">account&#64;example1.com</a>&gt;"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-server . <span style="color: #7FFF7F;">"smtp.example1.com"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-user . <span style="color: #7FFF7F;">"your account"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-port . 587<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-connection-type . 'starttls<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-authenticate-type . <span style="color: #7FFF7F;">"login"</span><span style="color: #97b098;">)</span>
         <span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"example2"</span>
         <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"From"</span> . <span style="color: #7FFF7F;">"Your Name &lt;<a href="mailto:account&#64;example2.com">account&#64;example2.com</a>&gt;"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-server . <span style="color: #7FFF7F;">"smtp.example2.com"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-user . <span style="color: #7FFF7F;">"your account"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-port . 587<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-connection-type . 'starttls<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-authenticate-type . <span style="color: #7FFF7F;">"plain"</span><span style="color: #97b098;">)</span>
         <span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"ssh:smtp"</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">need ssh tunnel</span>
         <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">ssh -f -N -L 20025:localhost:25 smtp.server.com</span>
         <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"From"</span> . <span style="color: #7FFF7F;">"Your Name &lt;<a href="mailto:account&#64;example3.com">account&#64;example3.com</a>&gt;"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-server . <span style="color: #7FFF7F;">"localhost"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-user . <span style="color: #7FFF7F;">"your ssh account"</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-posting-port . 20025<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-connection-type . 'nil<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>wl-smtp-authenticate-type . 'nil<span style="color: #97b098;">)</span>
         <span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
ssh tunnel を自動的にやる事はできないモンだろうか
(送信時に open して, 送信後に close する, みたいなの).
</p>

<p>
ついでに template の切り替えに関して幾つか設定.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">template &#20999;&#12426;&#26367;&#12360;&#26178;&#12395; &#20869;&#23481;&#12434;&#34920;&#31034;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-template-visible-select t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>draft-mode</code> で <code>C-c C-n</code> をするとテンプレートを切り替え
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>define-key wl-draft-mode-map <span style="color: #7FFF7F;">"\C-c\C-n"</span> 'wl-template-select<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
from に応じて wl-from, wl-envelope-from,
送信 smtp サーバを変更する送信時に変更
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-hook 'wl-draft-send-hook
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span>set <span style="color: #97b098;">(</span>make-local-variable 'wl-from<span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span>std11-fetch-field <span style="color: #7FFF7F;">"From"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
送信時に自動的に wl-draft-config-alist を適用&#x2026;しない?
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>remove-hook 'wl-draft-send-hook 'wl-draft-config-exec<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8e2b14d" class="outline-4">
<h4 id="org8e2b14d">基本設定</h4>
<div class="outline-text-4" id="text-org8e2b14d">
</div>
<div id="outline-container-org8067a24" class="outline-5">
<h5 id="org8067a24">imap 関連</h5>
<div class="outline-text-5" id="text-org8067a24">
<p>
デフォルトの認証設定
フォルダ名は UTF-7 でエンコードされているので,
表示する際にこれをデコードする
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-imap4-use-modified-utf7 t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org80afc48" class="outline-5">
<h5 id="org80afc48">非同期チェック</h5>
<div class="outline-text-5" id="text-org80afc48">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-folder-check-async t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3edc3e5" class="outline-5">
<h5 id="org3edc3e5">フォルダの位置の default からの変更</h5>
<div class="outline-text-5" id="text-org3edc3e5">
<p>
<code>~/.cache/wanderlust/</code> に集約している
local の Mail folder の位置
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-maildir-folder-path <span style="color: #7FFF7F;">"~/.cache/wanderlust"</span>
      elmo-localdir-folder-path <span style="color: #7FFF7F;">"~/.cache/wanderlust/local"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
local フォルダの設定:
<code>.lost+found</code> は <code>elmo-maildir-folder-path</code> からの相対パスになっていることに注意
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-lost+found-folder <span style="color: #7FFF7F;">".lost+found"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-queue-folder <span style="color: #7FFF7F;">"+queue"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
folders の位置の変更
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-folders-file <span style="color: #93a8c6;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/wl-folders.gpg"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
Drafts, Trash の置き場所
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-draft-folder <span style="color: #7FFF7F;">"+Drafts"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-trash-folder <span style="color: #7FFF7F;">"+Trash"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-lost+found-folder <span style="color: #7FFF7F;">"+lost+found"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-temporary-file-directory <span style="color: #7FFF7F;">"~/Downloads/"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
アドレス帳
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-use-petname t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-address-file  <span style="color: #7FFF7F;">"~/.mua/Address"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
LDAP サーバからアドレスを引くことも可能.
以前は GCALDaemon を使って local に ldap サーバを上げていたのだけれども,
Google Contacts の API が変わったらしく
GCALDaemon で LDAP サーバは使えなくなったのでコメントアウト.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-use-ldap t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-ldap-server <span style="color: #7FFF7F;">"localhost"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-ldap-port <span style="color: #7FFF7F;">"389"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-ldap-base <span style="color: #7FFF7F;">"dc=math,dc=kyoto-u,dc=ac,dc=jp"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
パスワードの保存先
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-passwd-alist-file-name <span style="color: #93a8c6;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/wl-passwd.gpg"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2c6df6a" class="outline-5">
<h5 id="org2c6df6a">フォルダ編集時に backup を作成しない.</h5>
<div class="outline-text-5" id="text-org2c6df6a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-fldmgr-make-backup nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org4dea883" class="outline-5">
<h5 id="org4dea883">FCC, BCC の設定</h5>
<div class="outline-text-5" id="text-org4dea883">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-fcc nil<span style="color: #8a8a8a;">)</span>
     <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq wl-fcc "%Sent")</span>
</pre>
</div>
<p>
fcc を既読にする場合は以下．=wl-fcc= が nil の場合には意味は無い
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-fcc-force-as-read t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
bcc は常に自身に.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-bcc <span style="color: #93a8c6;">(</span>concat user-mail-address<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf8b4200" class="outline-5">
<h5 id="orgf8b4200">起動時に <code>%INBOX</code> のみをチェック</h5>
<div class="outline-text-5" id="text-orgf8b4200">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-auto-check-folder-name <span style="color: #7FFF7F;">"%INBOX"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf90feff" class="outline-5">
<h5 id="orgf90feff">フォルダ選択時の初期設定</h5>
<div class="outline-text-5" id="text-orgf90feff">
<p>
imap の namespace を毎度入力するのが面倒なので，これを追加しておく.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-default-spec <span style="color: #7FFF7F;">"%"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org894fd4c" class="outline-5">
<h5 id="org894fd4c">confirm 関連の設定</h5>
<div class="outline-text-5" id="text-org894fd4c">
<p>
スキャン時の問い合わせの無効化.
ちなみに confirm を nil にしても 問い合わせが無いだけで
threshold は効くので, 明示的に nil に.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-folder-update-confirm nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-folder-update-threshold nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-message-fetch-confirm nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-message-fetch-threshold nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-prefetch-confirm nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-prefetch-threshold nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
終了時に確認しない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-interactive-exit nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
送信時は確認する   :tangle init-wl.el
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-interactive-send t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org00b1792" class="outline-5">
<h5 id="org00b1792">misc.</h5>
<div class="outline-text-5" id="text-org00b1792">
<p>
大きいメッセージを送信時に分割しない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> mime-edit-split-message nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
スレッドは常に閉じる
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-thread-insert-opened nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
3 pain 表示 -&gt; 使わない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-stay-folder-window nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
未読を優先的に読む
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-move-order 'unread<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
改ページ無視
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-break-pages nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
icon を使わない → GUI でもメニュー表示してないし, 体感的には遅くなる
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-highlight-folder-with-icon nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org15ac414" class="outline-5">
<h5 id="org15ac414">dispose, delete の設定</h5>
<div class="outline-text-5" id="text-org15ac414">
<p>
Gmail用に%INBOXでは削除を <code>wl-trash-folder</code> への移動ではなく，「delete」に．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-to-list 'wl-dispose-folder-alist
             '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"^%INBOX"</span> . remove<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
迷惑メール関連も
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-to-list 'wl-dispose-folder-alist
             '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">".*Junk$"</span> . remove<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org625e547" class="outline-5">
<h5 id="org625e547">折り返しの設定</h5>
<div class="outline-text-5" id="text-org625e547">
<p>
message は折り返す.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-message-truncate-lines nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
draft も折り返す
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-draft-truncate-lines nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1a2d9b3" class="outline-5">
<h5 id="org1a2d9b3">mode-line の設定</h5>
<div class="outline-text-5" id="text-org1a2d9b3">
<p>
長いと嫌なのでイロイロ削る
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-mode-line-format <span style="color: #7FFF7F;">""</span><span style="color: #8a8a8a;">)</span> <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">"%f &#123;%t}(%n/%u/%a)"</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-message-mode-line-format <span style="color: #7FFF7F;">""</span><span style="color: #8a8a8a;">)</span> <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">"&lt;&lt; %f:%F&gt;&gt; [%m]"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgcba00f7" class="outline-4">
<h4 id="orgcba00f7">キーバインド関連</h4>
<div class="outline-text-4" id="text-orgcba00f7">
<p>
<code>use-package</code> で設定しておいた方が良いかなぁ&#x2026;
<code>C-c C-j</code> を browse-url に明け渡す
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>define-key wl-draft-mode-map <span style="color: #7FFF7F;">"\C-c\C-j"</span> 'browse-url-at-point<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>M-u</code> で unread にする
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>define-key wl-summary-mode-map <span style="color: #7FFF7F;">"\M-u"</span> 'wl-summary-mark-as-unread<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>i</code> で sync &lt;- Mew 風
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>define-key wl-summary-mode-map <span style="color: #7FFF7F;">"i"</span> 'wl-summary-sync-update<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>C-o</code> は elscreen で使う
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>define-key wl-summary-mode-map <span style="color: #7FFF7F;">"\C-o"</span> nil <span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>M-o</code> で <code>auto-refile</code>  (Mew 風)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>define-key wl-summary-mode-map <span style="color: #7FFF7F;">"\M-o"</span> 'wl-summary-auto-refile<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org924aa7e" class="outline-4">
<h4 id="org924aa7e">flag とフォルダを行き来する関数の追加</h4>
<div class="outline-text-4" id="text-org924aa7e">
<p>
"=" でフラグ付きフォルダと
実際にメッセージのあるフォルダを行き来する.
Gmail の「スター付き」フォルダでも有効
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">elmo</span> nil 'noerror<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:wl-summary-jump-to-referer-message</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #b0b1a3;">(</span>wl-summary-message-number<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #97b098;">(</span>eq <span style="color: #aebed8;">(</span>elmo-folder-type-internal wl-summary-buffer-elmo-folder<span style="color: #aebed8;">)</span> 'flag<span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">progn</span>
          <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">let*</span> <span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span>referer <span style="color: #a2b6da;">(</span>elmo-flag-folder-referrer
                           wl-summary-buffer-elmo-folder
                           <span style="color: #9cb6ad;">(</span>wl-summary-message-number<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                 <span style="color: #90a890;">(</span>folder <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #9cb6ad;">(</span>&gt; <span style="color: #8a8a8a;">(</span>length referer<span style="color: #8a8a8a;">)</span> 1<span style="color: #9cb6ad;">)</span>
                             <span style="color: #9cb6ad;">(</span>completing-read
                              <span style="color: #8a8a8a;">(</span>format <span style="color: #7FFF7F;">"Jump to (%s): "</span> <span style="color: #93a8c6;">(</span>car <span style="color: #b0b1a3;">(</span>car referer<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
                              referer
                              nil t nil nil <span style="color: #8a8a8a;">(</span>car <span style="color: #93a8c6;">(</span>car referer<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span>
                           <span style="color: #9cb6ad;">(</span>car <span style="color: #8a8a8a;">(</span>car referer<span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>wl-summary-goto-folder-subr folder 'no-sync nil nil t<span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>wl-summary-jump-to-msg <span style="color: #90a890;">(</span>cdr <span style="color: #a2b6da;">(</span>assoc folder referer<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #aebed8;">(</span>eq <span style="color: #b0b0b3;">(</span>elmo-folder-type wl-summary-last-visited-folder<span style="color: #b0b0b3;">)</span> 'internal<span style="color: #aebed8;">)</span>
        <span style="color: #aebed8;">(</span>wl-summary-goto-last-visited-folder<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>define-key wl-summary-mode-map <span style="color: #7FFF7F;">"="</span> 'my:wl-summary-jump-to-referer-message<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7c1d416" class="outline-4">
<h4 id="org7c1d416">summary-mode の表示のカスタマイズ</h4>
<div class="outline-text-4" id="text-org7c1d416">
</div>
<div id="outline-container-orgc9ed339" class="outline-5">
<h5 id="orgc9ed339">自分が差出人である mail は To:某 と表示</h5>
<div class="outline-text-5" id="text-orgc9ed339">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-showto-folder-regexp <span style="color: #7FFF7F;">".*"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-from-function 'wl-summary-default-from<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga1e88c9" class="outline-5">
<h5 id="orga1e88c9">サマリ行の表示関連</h5>
<div class="outline-text-5" id="text-orga1e88c9">
<p>
サマリ行のフォーマット指定
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-line-format
      <span style="color: #7FFF7F;">"%T%P%1@%1&gt;%Y/%M/%D %21(%t%[%19(%c %f%)%]%) %#%~%s"</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
サマリ表示は切り詰めない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-subject-length-limit t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
スレッドの幅の指定
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-thread-indent-level 2<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-thread-have-younger-brother-str <span style="color: #7FFF7F;">"+"</span>
      wl-thread-youngest-child-str <span style="color: #7FFF7F;">"+"</span>
      wl-thread-vertical-str <span style="color: #7FFF7F;">"|"</span>
      wl-thread-horizontal-str <span style="color: #7FFF7F;">"-"</span>
      wl-thread-space-str <span style="color: #7FFF7F;">" "</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>

<p>
以下の二つの設定を有効にするには
<code>elmo-msgdb-extra-fields</code> を設定する必要がある.
この変数は振り分け判定にも使用するのでそこで設定している
</p>
</div>
</div>
<div id="outline-container-org51af989" class="outline-5">
<h5 id="org51af989">Gmail 風に, 自分宛のメールに "&gt;" をつけて表示する</h5>
<div class="outline-text-5" id="text-org51af989">
<p>
元ネタ <a href="http://d.hatena.ne.jp/khiker/20080206/wanderlust">http://d.hatena.ne.jp/khiker/20080206/wanderlust</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-user-mail-address-regexp <span style="color: #7FFF7F;">"^uwabami.*</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">^sasakyh.*"</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#19968;&#35239;&#34920;&#31034;&#12391;&#12398;&#32622;&#12365;&#25563;&#12360;&#35215;&#21063;&#12395;&#36861;&#21152;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:wl-summary-line-for-me</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">catch</span> '<span style="color: #FFBF7F;">found</span>
        <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>to <span style="color: #90a890;">(</span>elmo-message-entity-field wl-message-entity 'to<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
              <span style="color: #b0b0b3;">(</span>cc <span style="color: #90a890;">(</span>elmo-message-entity-field wl-message-entity 'cc<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">or</span> <span style="color: #90a890;">(</span>stringp to<span style="color: #90a890;">)</span> cc<span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">setq</span> to
                  <span style="color: #90a890;">(</span>append <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #9cb6ad;">(</span>stringp to<span style="color: #9cb6ad;">)</span> <span style="color: #9cb6ad;">(</span>list to<span style="color: #9cb6ad;">)</span> to<span style="color: #a2b6da;">)</span>
                          <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">when</span> cc
                            <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #8a8a8a;">(</span>stringp cc<span style="color: #8a8a8a;">)</span> <span style="color: #8a8a8a;">(</span>list cc<span style="color: #8a8a8a;">)</span> cc<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">dolist</span> <span style="color: #b0b0b3;">(</span>i to<span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #90a890;">(</span>wl-address-user-mail-address-p <span style="color: #a2b6da;">(</span>eword-decode-string i<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
              <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">throw</span> '<span style="color: #FFBF7F;">found</span> t<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
      <span style="color: #7FFF7F;">"&gt;"</span>
    <span style="color: #7FFF7F;">""</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&gt; &#12434; summary-line-format &#12395;&#36861;&#21152;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-line-format-spec-alist
      <span style="color: #93a8c6;">(</span>append wl-summary-line-format-spec-alist
              '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>?&gt; <span style="color: #aebed8;">(</span>my:wl-summary-line-for-me<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6fe3938" class="outline-5">
<h5 id="org6fe3938">添付ファイルがあったら, サマリ行に "@" を付ける</h5>
<div class="outline-text-5" id="text-org6fe3938">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-line-format-spec-alist
      <span style="color: #93a8c6;">(</span>append wl-summary-line-format-spec-alist
              '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>?@ <span style="color: #aebed8;">(</span>wl-summary-line-attached<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2efb71b" class="outline-5">
<h5 id="org2efb71b">クォートされた文字列もデコードする</h5>
<div class="outline-text-5" id="text-org2efb71b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> mime-header-lexical-analyzer
      '<span style="color: #93a8c6;">(</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">eword-analyze-quoted-string</span>
        eword-analyze-domain-literal
        eword-analyze-comment
        eword-analyze-spaces
        eword-analyze-special
        eword-analyze-encoded-word
        eword-analyze-atom<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org42c8e31" class="outline-5">
<h5 id="org42c8e31">Subject が変わってもスレッドを切らない</h5>
<div class="outline-text-5" id="text-org42c8e31">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-divide-thread-when-subject-changed nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org87607e8" class="outline-5">
<h5 id="org87607e8">Subject での Tab や複数スペースを無視</h5>
<div class="outline-text-5" id="text-org87607e8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defadvice</span> <span style="color: #BF7FFF;">std11-unfold-string</span> <span style="color: #93a8c6;">(</span>after simply activate<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ad-return-value
        <span style="color: #b0b1a3;">(</span>elmo-replace-in-string ad-return-value <span style="color: #7FFF7F;">"[ \t]+"</span> <span style="color: #7FFF7F;">" "</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1ba5636" class="outline-5">
<h5 id="org1ba5636">重複メッセージを非表示に</h5>
<div class="outline-text-5" id="text-org1ba5636">
<p>
フォルダ内の Message-ID が同じメールを非表示にする
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-folder-process-duplicates-alist
      '<span style="color: #93a8c6;">(</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">".*"</span> . hide<span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org69381b1" class="outline-5">
<h5 id="org69381b1">sort 順: 返信が来た順</h5>
<div class="outline-text-5" id="text-org69381b1">
<p>
<code>flet</code> を書き換えるのが面倒で <code>el-x</code> にある <code>dflet</code> を使うように変更
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">wl-summary-overview-entity-compare-by-reply-date</span> <span style="color: #93a8c6;">(</span>a b<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Compare message A and B by latest date of replies including thread."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">dflet</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>string-max2 <span style="color: #aebed8;">(</span>x y<span style="color: #aebed8;">)</span>
                       <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">cond</span> <span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span>string&lt; x y<span style="color: #90a890;">)</span> y<span style="color: #b0b0b3;">)</span>
                             <span style="color: #b0b0b3;">(</span>'t x<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>thread-number-get-date <span style="color: #aebed8;">(</span>x<span style="color: #aebed8;">)</span>
                                  <span style="color: #aebed8;">(</span>timezone-make-date-sortable <span style="color: #b0b0b3;">(</span>elmo-msgdb-overview-entity-get-date
                                                                <span style="color: #90a890;">(</span>elmo-message-entity
                                                                 wl-summary-buffer-elmo-folder x<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>thread-get-family <span style="color: #aebed8;">(</span>x<span style="color: #aebed8;">)</span>
                             <span style="color: #aebed8;">(</span>cons x <span style="color: #b0b0b3;">(</span>wl-thread-entity-get-descendant <span style="color: #90a890;">(</span>wl-thread-get-entity x<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>max-reply-date <span style="color: #aebed8;">(</span>x<span style="color: #aebed8;">)</span>
                          <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">cond</span> <span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span>eq 'nil x<span style="color: #90a890;">)</span>
                                 'nil<span style="color: #b0b0b3;">)</span>
                                <span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span>eq 'nil <span style="color: #a2b6da;">(</span>cdr x<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                                 <span style="color: #90a890;">(</span>thread-number-get-date <span style="color: #a2b6da;">(</span>car x<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
                                <span style="color: #b0b0b3;">(</span>'t
                                 <span style="color: #90a890;">(</span>string-max2 <span style="color: #a2b6da;">(</span>thread-number-get-date <span style="color: #9cb6ad;">(</span>car x<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
                                              <span style="color: #a2b6da;">(</span>max-reply-date <span style="color: #9cb6ad;">(</span>cdr x<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>string&lt;
     <span style="color: #97b098;">(</span>max-reply-date <span style="color: #aebed8;">(</span>thread-get-family <span style="color: #b0b0b3;">(</span>elmo-message-entity-number a<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
     <span style="color: #97b098;">(</span>max-reply-date <span style="color: #aebed8;">(</span>thread-get-family <span style="color: #b0b0b3;">(</span>elmo-message-entity-number b<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-to-list 'wl-summary-sort-specs 'reply-date<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-default-sort-spec 'reply-date<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga1321a2" class="outline-4">
<h4 id="orga1321a2">振り分け設定</h4>
<div class="outline-text-4" id="text-orga1321a2">
<p>
<code>$</code> 以外を振り分け対象に
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-summary-auto-refile-skip-marks '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"$"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
<div id="outline-container-orgac181ea" class="outline-5">
<h5 id="orgac181ea">振り分け判定に使用するヘッダ</h5>
<div class="outline-text-5" id="text-orgac181ea">
<p>
添付の有無の表示にも使うので <code>Content-Type</code> も登録.
あと <code>Delivered-To</code> はメールの検索の時に結構重宝している.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-msgdb-extra-fields
      '<span style="color: #93a8c6;">(</span>
        <span style="color: #7FFF7F;">"List-Post"</span>
        <span style="color: #7FFF7F;">"List-Id"</span>
        <span style="color: #7FFF7F;">"List-ID"</span>                  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12383;&#12414;&#12395; List-ID &#12391;&#26469;&#12427;&#12513;&#12540;&#12523;&#12354;&#12427;&#12424;&#12397;?</span>
        <span style="color: #7FFF7F;">"Resent-CC"</span>
        <span style="color: #7FFF7F;">"Mailing-List"</span>
        <span style="color: #7FFF7F;">"X-Mailing-List"</span>
        <span style="color: #7FFF7F;">"X-ML-Address"</span>
        <span style="color: #7FFF7F;">"X-ML-Name"</span>
        <span style="color: #7FFF7F;">"X-ML-To"</span>
        <span style="color: #7FFF7F;">"Delivered-To"</span>
        <span style="color: #7FFF7F;">"Content-Type"</span>              <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#28155;&#20184;&#12398;&#26377;&#28961;&#12398;&#34920;&#31034;&#12398;&#28858;&#12395;&#36861;&#21152;</span>
        <span style="color: #7FFF7F;">"X-Google-Appengine-App-Id"</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">GAE&#12398;&#36865;&#20449;&#12377;&#12427;&#12513;&#12540;&#12523;&#12398;&#25391;&#12426;&#20998;&#12369;&#29992;</span>
        <span style="color: #7FFF7F;">"To"</span>
        <span style="color: #7FFF7F;">"Cc"</span>
        <span style="color: #7FFF7F;">"From"</span>
        <span style="color: #7FFF7F;">"Subject"</span>
        <span style="color: #7FFF7F;">"Reply-To"</span>
        <span style="color: #7FFF7F;">"Auto-Submitted"</span>            <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">Git commit/Cron notify</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org47dabd4" class="outline-4">
<h4 id="org47dabd4">メッセージ表示</h4>
<div class="outline-text-4" id="text-org47dabd4">
</div>
<div id="outline-container-orgec81f33" class="outline-5">
<h5 id="orgec81f33">いったん全て非表示に</h5>
<div class="outline-text-5" id="text-orgec81f33">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-message-ignored-field-list '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"^.*:"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org126035e" class="outline-5">
<h5 id="org126035e">見たいヘッダだけ表示</h5>
<div class="outline-text-5" id="text-org126035e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-message-visible-field-list
      '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"^Subject:"</span>
        <span style="color: #7FFF7F;">"^From:"</span>
        <span style="color: #7FFF7F;">"^To:"</span>
        <span style="color: #7FFF7F;">"^Cc:"</span>
        <span style="color: #7FFF7F;">"^Date:"</span>
        <span style="color: #7FFF7F;">"^Message-ID:"</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8a94db3" class="outline-5">
<h5 id="org8a94db3">表示順の変更</h5>
<div class="outline-text-5" id="text-org8a94db3">
<p>
Mew 風&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-message-sort-field-list
      '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"^Subject:"</span>
        <span style="color: #7FFF7F;">"^From:"</span>
        <span style="color: #7FFF7F;">"^To:"</span>
        <span style="color: #7FFF7F;">"^Cc:"</span>
        <span style="color: #7FFF7F;">"^Date:"</span>
        <span style="color: #7FFF7F;">"^Message-ID:"</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org18b4949" class="outline-5">
<h5 id="org18b4949">From, To を省略表示しない</h5>
<div class="outline-text-5" id="text-org18b4949">
<p>
To や From にアドレスが沢山指定されていると省略されるので，これを無効化
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-message-use-header-narrowing nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga9c7e46" class="outline-4">
<h4 id="orga9c7e46">作成/返信設定</h4>
<div class="outline-text-4" id="text-orga9c7e46">
<p>
自分宛のメールに返信する場合は <code>To:</code>, <code>Cc:</code> から自分のアドレスを削除
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-draft-always-delete-myself t<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
"a" (without-argument)では <code>Reply-To:</code> や <code>From:</code> などで
指定された唯一人または唯一つの投稿先に返信.
また, <code>X-ML-Name:</code> と <code>Reply-To:</code> がついているなら <code>Reply-To:</code> 宛に返信
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-draft-reply-without-argument-list
      '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"X-ML-Name"</span> <span style="color: #7FFF7F;">"Reply-To"</span><span style="color: #97b098;">)</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Reply-To"</span><span style="color: #aebed8;">)</span> nil nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"X-ML-Name"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"To"</span> <span style="color: #7FFF7F;">"Cc"</span><span style="color: #aebed8;">)</span> nil nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Followup-To"</span> . <span style="color: #97b098;">(</span>nil nil <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Followup-To"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Newsgroups"</span> . <span style="color: #97b098;">(</span>nil nil <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Newsgroups"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Reply-To"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Reply-To"</span><span style="color: #aebed8;">)</span> nil nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Mail-Reply-To"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Mail-Reply-To"</span><span style="color: #aebed8;">)</span> nil nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"From"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"From"</span><span style="color: #aebed8;">)</span> nil nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>C-u a</code> (with-argument)であれば関係する全ての人・投稿先に返信
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-draft-reply-with-argument-list
      '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Followup-To"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"From"</span><span style="color: #aebed8;">)</span> nil <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Followup-To"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Newsgroups"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"From"</span><span style="color: #aebed8;">)</span> nil <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Newsgroups"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Mail-Followup-To"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Mail-Followup-To"</span><span style="color: #aebed8;">)</span> nil <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Newsgroups"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"From"</span> . <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"From"</span><span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"To"</span> <span style="color: #7FFF7F;">"Cc"</span><span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"Newsgroups"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
サマリ表示には petname を使うが, 引用には使わない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-default-draft-cite-decorate-author nil<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
<div id="outline-container-org3454017" class="outline-5">
<h5 id="org3454017">メール本文の文字コード</h5>
<div class="outline-text-5" id="text-org3454017">
<p>
丸囲み数字なんかが入ってしまうと
勝手にエンコーディングが変わってしまって鬱陶しい. どうしたモンだろうかね.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-hook 'wl-draft-mode-hook
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span>add-to-list 'mime-charset-type-list '<span style="color: #97b098;">(</span>utf-8 8 nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org021e4af" class="outline-5">
<h5 id="org021e4af">draft mode で orgtbl を有効に</h5>
<div class="outline-text-5" id="text-org021e4af">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-hook 'wl-draft-mode-hook 'turn-on-orgtbl<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0173c6a" class="outline-5">
<h5 id="org0173c6a">c-sig</h5>
<div class="outline-text-5" id="text-org0173c6a">
<p>
署名の選択に c-sig を使用している.
設定は以下の通り. Mew 風に <code>C-c &lt;tab&gt;</code> で signature を挿入するようにしている
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">c-sig</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">eval-when-compile</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">wl</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> sig-insert-end t
        sig-save-to-sig-name-alist nil
        message-signature-file nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>define-key wl-draft-mode-map <span style="color: #7FFF7F;">"\C-c\t"</span> 'insert-signature-eref<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'wl-draft-mode-hook
            '<span style="color: #b0b1a3;">(</span>lambda <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
               <span style="color: #97b098;">(</span>define-key <span style="color: #aebed8;">(</span>current-local-map<span style="color: #aebed8;">)</span> <span style="color: #7FFF7F;">"\C-c\C-w"</span>
                 'insert-signature-eref<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgedc685c" class="outline-4">
<h4 id="orgedc685c">Face の設定</h4>
<div class="outline-text-4" id="text-orgedc685c">
<p>
デフォルトより細かく指定するために幾つかの face 定義を追加.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> wl-highlight-message-header-alist
      '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Subject[ \t]*:"</span>
         . wl-highlight-message-subject-header-contents<span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"From[ \t]*:"</span>
         . wl-highlight-message-from-header-contents<span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Date[ \t]*:"</span>
         . wl-highlight-message-date-header-contents<span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">.*To</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">Cc</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">Newsgroups</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">[ \t]*:"</span>
         . wl-highlight-message-important-header-contents<span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">User-Agent</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">X-Mailer</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">X-Newsreader</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">[ \t]*:"</span> .
         wl-highlight-message-unimportant-header-contents<span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:wl-set-face</span> <span style="color: #93a8c6;">(</span>face spec<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>make-face face<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">cond</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>fboundp 'face-spec-set<span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>face-spec-set face spec<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span>t
         <span style="color: #97b098;">(</span>wl-declare-face face spec<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-folder-closed-face                  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4cff4c"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #7FBFFF;">:weight</span> normal <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-folder-few-face                     '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF4C4C"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #7FBFFF;">:weight</span> normal <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-folder-killed-face                  '((t (:foreground ,my:h:black :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-folder-many-face                    '((t (:foreground ,my:h:magenta :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-folder-opened-face                  '((t (:foreground "#4cffff" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-folder-path-face                    '((t (:underline t :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-folder-unknown-face                 '((t (:foreground "#4cffff" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-folder-unread-face                  '((t (:foreground ,my:n:blue :bold nil :italic nil :weight normal ))))</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-folder-zero-face                    '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #7FBFFF;">:weight</span> normal <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-header-separator-face               '((t (:inherit highlight :bold t ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-message-citation-header             '((t (:foreground ,my:h:green :bold nil :italic nil ))))</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-1                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7fff7f"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-2                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#ffff7f"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-3                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7f7fff"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-4                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7fffff"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-5                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#ff7fff"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-6                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#ff7f7f"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-7                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4cff4c"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-8                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#ffff4c"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-9                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4c4cff"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-10               '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4cffff"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-11               '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#ff4cff"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-cited-text-12               '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#ff4c4c"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-date-header-contents        '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFF4C"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-header-contents             '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#aaaaaa"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-headers                     '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFFFF"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-important-header-contents2  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFF4C"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-signature                   '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#aaaaaa"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-important-header-contents   '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF4CFF"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-subject-header-contents     '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF4C4C"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-from-header-contents        '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFF4C"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-message-unimportant-header-contents '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#aaaaaa"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-summary-answered-face               '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFF4C"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #7FBFFF;">:weight</span> normal <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-copied-face                 '((t (:foreground "#4CFFFF" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-deleted-face                '((t (:foreground ,my:h:black :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-displaying-face             '((t (:underline t :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-disposed-face               '((t (:foreground "#aaaaaa" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-flagged-face                '((t (:foreground ,my:h:yellow :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-forwarded-face              '((t (:foreground ,my:h:blue :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-high-read-face              '((t (:foreground ,my:h:green :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-high-unread-face            '((t (:foreground ,my:h:orange :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-important-face              '((t (:foreground "#ffff4c" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-important-flag-face         '((t (:foreground "#ffff4c" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-killed-face                 '((t (:foreground ,my:h:black :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-l:read-face                 '((t (:foreground "#4CFF4C" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-l:unread-face               '((t (:foreground ,my:h:lightb :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-new-face                    '((t (:foreground "#ff4c4c" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-normal-face                 '((t (:foreground "#f6f3e8" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-prefetch-face               '((t (:foreground ,my:n:blue :bold nil :italic nil :weight normal ))))</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-summary-refiled-face                '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7F7FFF"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #7FBFFF;">:weight</span> normal <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-resend-face                 '((t (:foreground ,my:h:orange :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-target-face                 '((t (:foreground "#4CFFFF" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-temp-face                   '((t (:foreground ,my:n:violet :bold nil :italic nil :weight normal ))))</span>
<span style="color: #8a8a8a;">(</span>my:wl-set-face 'wl-highlight-summary-thread-top-face             '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:italic</span> nil <span style="color: #7FBFFF;">:weight</span> normal <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-summary-unread-face                 '((t (:foreground "#ff4c4c" :bold nil :italic nil :weight normal ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(my:wl-set-face 'wl-highlight-thread-indent-face                  '((t (:underline t :bold nil :italic nil :weight normal ))))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8bb44b0" class="outline-4">
<h4 id="org8bb44b0">GPG 署名</h4>
<div class="outline-text-4" id="text-org8bb44b0">
<p>
以前は mailcrypt を使っていたけれど,
epa があるので主にキーバインドの設定のみ.
<code>draft-mode</code> の文字コードをあらかじめ指定しておかないと,
送信時に文字コードが変換されるので不正な署名となってしまう.
</p>

<p>
もっとうまい方法/正攻法がありそうな気がするけれど,
使えてるから, まあ良いかな, とか.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> mime-pgp-verify-when-preview nil<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:epa-wl-decrypt-message</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">save-window-excursion</span>
    <span style="color: #b0b1a3;">(</span>wl-summary-jump-to-current-message<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>wl-message-decrypt-pgp-nonmime<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:epa-wl-verify-message</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">save-selected-window</span>
    <span style="color: #b0b1a3;">(</span>wl-summary-jump-to-current-message<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>wl-message-verify-pgp-nonmime<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">bind-keys</span> <span style="color: #7FBFFF;">:map</span> wl-summary-mode-map
           <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c : d"</span> . my:epa-wl-decrypt-message<span style="color: #93a8c6;">)</span>
           <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c : v"</span> . my:epa-wl-verify-message<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">bind-keys</span> <span style="color: #7FBFFF;">:map</span> wl-draft-mode-map
           <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c : s"</span> . epa-mail-sign<span style="color: #93a8c6;">)</span>
           <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c : e"</span> . epa-mail-encrypt<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge6f1fa9" class="outline-4">
<h4 id="orge6f1fa9">検索</h4>
<div class="outline-text-4" id="text-orge6f1fa9">
<p>
mu(maildir-utils)を使う. 偶にセグフォるので悩み所
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">elmo-search</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #7FBFFF;">:map</span> wl-summary-mode-map
              <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"v"</span> . wl-quicksearch-goto-search-folder-wrapper<span style="color: #b0b1a3;">)</span>
              <span style="color: #7FBFFF;">:map</span> wl-folder-mode-map
              <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"v"</span> . wl-quicksearch-goto-search-folder-wrapper<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>elmo-search-register-engine
   'mu 'local-file
   <span style="color: #7FBFFF;">:prog</span> <span style="color: #7FFF7F;">"mu"</span>
   <span style="color: #7FBFFF;">:args</span> '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"find"</span> <span style="color: #7FFF7F;">"-u"</span> elmo-search-split-pattern-list <span style="color: #7FFF7F;">"--fields"</span> <span style="color: #7FFF7F;">"l"</span> <span style="color: #7FFF7F;">"--sortfield"</span> <span style="color: #7FFF7F;">"date"</span> <span style="color: #7FFF7F;">"-r"</span><span style="color: #b0b1a3;">)</span>
   <span style="color: #7FBFFF;">:charset</span> 'utf-8<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> elmo-search-default-engine 'mu<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> wl-quicksearch-folder <span style="color: #7FFF7F;">"[]"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
検索時にメールが多すぎると怒られるので. 数字は適当.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-multi-divide-number 2000000000<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> elmo-multi-number 2000000000<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0a6c269" class="outline-3">
<h3 id="org0a6c269">Linux Desktop で <code>mailto:</code> リンクを扱うために</h3>
<div class="outline-text-3" id="text-org0a6c269">
<p>
ついでに <code>mailto</code> のリンクを emacsclient で扱うために，以下の関数を定義しておく
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:mailto-compose-mail</span> <span style="color: #93a8c6;">(</span>mailto-url<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #97b098;">(</span>stringp mailto-url<span style="color: #97b098;">)</span>
           <span style="color: #97b098;">(</span>string-match <span style="color: #7FFF7F;">"\\`mailto:"</span> mailto-url<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
      <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">progn</span>
        <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">require</span> '<span style="color: #FFBF7F;">rfc2368</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">let*</span> <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>headers <span style="color: #90a890;">(</span>mapcar <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #9cb6ad;">(</span>h<span style="color: #9cb6ad;">)</span> <span style="color: #9cb6ad;">(</span>cons <span style="color: #8a8a8a;">(</span>intern <span style="color: #93a8c6;">(</span>car h<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span> <span style="color: #8a8a8a;">(</span>cdr h<span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
                                <span style="color: #a2b6da;">(</span>rfc2368-parse-mailto-url mailto-url<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
               <span style="color: #b0b0b3;">(</span>good-headers <span style="color: #90a890;">(</span>remove-if <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #9cb6ad;">(</span>h<span style="color: #9cb6ad;">)</span> <span style="color: #9cb6ad;">(</span>member <span style="color: #8a8a8a;">(</span>car h<span style="color: #8a8a8a;">)</span> '<span style="color: #8a8a8a;">(</span>Body<span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span> headers<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
               <span style="color: #b0b0b3;">(</span>body <span style="color: #90a890;">(</span>cdr <span style="color: #a2b6da;">(</span>assoc 'Body headers<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span>wl-draft good-headers nil nil body<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
Desktop の設定では
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #a5a5a6;">#</span><span style="color: #a5a5a6;">!/bin/</span><span style="color: #FF7F7F;">sh</span>
<span style="color: #a5a5a6;"># </span><span style="color: #a5a5a6;">emacs-mailto-handler</span>

<span style="color: #7F7FFF;">mailto</span>=$<span style="color: #7F7FFF;">1</span>
<span style="color: #7F7FFF;">mailto</span>=<span style="color: #7FFF7F;">"mailto:${mailto#mailto:}"</span>
<span style="color: #7F7FFF;">mailto</span>=$(printf <span style="color: #7FFF7F;">'%s\n'</span> <span style="color: #7FFF7F;">"$mailto"</span> | sed -e <span style="color: #7FFF7F;">'s/[\"]/\\&amp;/g'</span>)
<span style="color: #7F7FFF;">elisp_expr</span>=<span style="color: #7FFF7F;">"(my:mailto-compose-mail \"$mailto\")"</span>

emacsclient -a <span style="color: #7FFF7F;">""</span> -n --eval <span style="color: #7FFF7F;">"$elisp_expr"</span> <span style="color: #7FFF7F;">\</span>
    <span style="color: #7FFF7F;">'(set-window-dedicated-p (selected-window) t)'</span>
</pre>
</div>
<p>
をメーラとして指定すれば良い．
GNOME は <code>.desktop</code> ファイルが無いと「お気に入り」登録ができないので
以下のファイルを適当な名前で <code>~/.local/share/applications/</code> 以下に放り込んでおくと良いだろう
</p>
<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #FFFF7F;">Desktop Entry</span>]
<span style="color: #7F7FFF;">Name</span>=Emacs Mail Handler
<span style="color: #7F7FFF;">GenericName</span>=Mail User Agent
<span style="color: #7F7FFF;">X-GNOME-FullName</span>=Emacs Mail Handler
<span style="color: #7F7FFF;">Comment</span>=Use emacsclient as MUA, handling mailto link
<span style="color: #7F7FFF;">Keywords</span>=email
<span style="color: #7F7FFF;">Exec</span>=/home/uwabami/bin/emacs-mailto-handler %U
<span style="color: #7F7FFF;">Icon</span>=emacs25
<span style="color: #7F7FFF;">Terminal</span>=false
<span style="color: #7F7FFF;">Type</span>=Application
<span style="color: #7F7FFF;">Categories</span>=GNOME;GTK;Office;Email;
<span style="color: #7F7FFF;">StartupNotify</span>=false
<span style="color: #7F7FFF;">MimeType</span>=application/mbox;message/rfc822;x-scheme-handler/mailto;
</pre>
</div>
</div>
</div>
<div id="outline-container-org52e6c6b" class="outline-3">
<h3 id="org52e6c6b">メールからの予定の取り込み: <code>mhc</code></h3>
<div class="outline-text-3" id="text-org52e6c6b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">mhc</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>executable-find <span style="color: #7FFF7F;">"mhc"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org38ecdb5" class="outline-2">
<h2 id="org38ecdb5">校正，辞書等</h2>
<div class="outline-text-2" id="text-org38ecdb5">
</div>
<div id="outline-container-org2fd1a6c" class="outline-3">
<h3 id="org2fd1a6c">spell checker</h3>
<div class="outline-text-3" id="text-org2fd1a6c">
<p>
ispell はコマンドとして <code>aspell</code> を利用する．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ispell</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq-default</span> ispell-program-name <span style="color: #7FFF7F;">"aspell"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'ispell-skip-region-alist '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">\000-\377]+"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
flyspell-mode は別途有効化しておいた方が良いのかもしれない
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">flyspell</span>
  <span style="color: #7FBFFF;">:diminish</span> flyspell-mode
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:flyspell-popup-choose</span> <span style="color: #b0b1a3;">(</span>orig event poss word<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #97b098;">(</span>window-system<span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>funcall orig event poss word<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>flyspell-emacs-popup-textual event poss word<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>advice-add 'flyspell-emacs-popup <span style="color: #7FBFFF;">:around</span> #'my:flyspell-popup-choose<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6389823" class="outline-3">
<h3 id="org6389823">辞書</h3>
<div class="outline-text-3" id="text-org6389823">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">lookup</span>
  <span style="color: #7FBFFF;">:commands</span> <span style="color: #93a8c6;">(</span>lookup lookup-region lookup-pattern<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #b0b1a3;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"lookup-el"</span><span style="color: #b0b1a3;">)</span>
           <span style="color: #b0b1a3;">(</span>file-exists-p <span style="color: #7FFF7F;">"/usr/local/share/dict/lookup-enabled"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c w"</span> . lookup-pattern<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c W"</span> . lookup-word<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> lookup-search-agents
        '<span style="color: #b0b1a3;">(</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/eijiro"</span>    <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#33521;&#36766;&#37070;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/waeijiro"</span>  <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#21644;&#33521;&#36766;&#37070;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/rikagaku5"</span> <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#29702;&#21270;&#23398;&#36766;&#20856; &#31532;5&#29256;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/koujien4"</span>  <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#24195;&#36766;&#33489; &#31532;4&#29256;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/wadai5"</span>    <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#30740;&#31350;&#31038; &#21644;&#33521;&#22823;&#36766;&#20856; &#31532;5&#29256;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/eidai6"</span>    <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#30740;&#31350;&#31038; &#33521;&#21644;&#22823;&#36766;&#20856; &#31532;6&#29256;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>ndeb <span style="color: #7FFF7F;">"/usr/local/share/dict/colloc"</span>    <span style="color: #7FBFFF;">:alias</span> <span style="color: #7FFF7F;">"&#30740;&#31350;&#31038; &#33521;&#21644;&#27963;&#29992;&#22823;&#36766;&#20856; "</span><span style="color: #97b098;">)</span>
          <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org7ec7ade" class="outline-2">
<h2 id="org7ec7ade">カレンダー: <code>japanese-holidays</code></h2>
<div class="outline-text-2" id="text-org7ec7ade">
<p>
日本の祝日を表示するために <code>japanese-holidays</code> をインストール
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">japanese-holidays</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'calendar-today-visible-hook   'japanese-holiday-mark-weekend<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'calendar-today-invisible-hook 'japanese-holiday-mark-weekend<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'calendar-today-visible-hook   'calendar-mark-today<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> calendar-holidays               <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#12392;&#12426;&#12354;&#12360;&#12378;&#26085;&#26412;&#12398;&#12415;&#12434;&#34920;&#31034;</span>
        <span style="color: #b0b1a3;">(</span>append japanese-holidays holiday-local-holidays<span style="color: #b0b1a3;">)</span>
        mark-holidays-in-calendar t     <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#31069;&#26085;&#12434;&#12459;&#12524;&#12531;&#12480;&#12540;&#12395;&#34920;&#31034;</span>
        calendar-month-name-array       <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#26376;&#12392;&#26332;&#26085;&#12398;&#34920;&#31034;&#35519;&#25972;</span>
        <span style="color: #b0b1a3;">[</span><span style="color: #7FFF7F;">"01"</span> <span style="color: #7FFF7F;">"02"</span> <span style="color: #7FFF7F;">"03"</span> <span style="color: #7FFF7F;">"04"</span> <span style="color: #7FFF7F;">"05"</span> <span style="color: #7FFF7F;">"06"</span> <span style="color: #7FFF7F;">"07"</span> <span style="color: #7FFF7F;">"08"</span> <span style="color: #7FFF7F;">"09"</span> <span style="color: #7FFF7F;">"10"</span> <span style="color: #7FFF7F;">"11"</span> <span style="color: #7FFF7F;">"12"</span> <span style="color: #b0b1a3;">]</span>
        calendar-day-name-array
        <span style="color: #b0b1a3;">[</span><span style="color: #7FFF7F;">"&#26085;"</span> <span style="color: #7FFF7F;">"&#26376;"</span> <span style="color: #7FFF7F;">"&#28779;"</span> <span style="color: #7FFF7F;">"&#27700;"</span> <span style="color: #7FFF7F;">"&#26408;"</span> <span style="color: #7FFF7F;">"&#37329;"</span> <span style="color: #7FFF7F;">"&#22303;"</span><span style="color: #b0b1a3;">]</span>
        calendar-day-header-array
        <span style="color: #b0b1a3;">[</span><span style="color: #7FFF7F;">"&#26085;"</span> <span style="color: #7FFF7F;">"&#26376;"</span> <span style="color: #7FFF7F;">"&#28779;"</span> <span style="color: #7FFF7F;">"&#27700;"</span> <span style="color: #7FFF7F;">"&#26408;"</span> <span style="color: #7FFF7F;">"&#37329;"</span> <span style="color: #7FFF7F;">"&#22303;"</span><span style="color: #b0b1a3;">]</span>
        calendar-date-style 'iso         <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">ISO format (YYYY/MM/DD) &#12395;&#22793;&#26356;</span>
        japanese-holiday-weekend '<span style="color: #b0b1a3;">(</span>0 6<span style="color: #b0b1a3;">)</span>  <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#22303;&#26332;&#26085;&#12539;&#26085;&#26332;&#26085;&#12434;&#31069;&#26085;&#12392;&#12375;&#12390;&#34920;&#31034;</span>
        japanese-holiday-weekend-marker
        '<span style="color: #b0b1a3;">(</span>holiday nil nil nil nil nil japanese-holiday-saturday<span style="color: #b0b1a3;">)</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26085;&#26332;&#38283;&#22987;</span>
        calendar-week-start-day 0<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>calendar-set-date-style 'iso<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga0ec7b3" class="outline-2">
<h2 id="orga0ec7b3">Org</h2>
<div class="outline-text-2" id="text-orga0ec7b3">
<p>
<code>org-mode</code> が無いと生きていけない体になりました
</p>
</div>
<div id="outline-container-org8e67c0e" class="outline-3">
<h3 id="org8e67c0e">基本設定: <code>org</code></h3>
<div class="outline-text-3" id="text-org8e67c0e">
<p>
目新しい設定はしていない，と思う．強いて言えば
以前のメモの整理のために <a href="http://howm.osdn.jp/index-j.html">howm: Hitori Otegaru Wiki Modoki</a> も使っているので,
howm も有効にしている，ぐらい．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defvar</span> <span style="color: #7F7FFF;">my:d:org</span> <span style="color: #93a8c6;">(</span>concat <span style="color: #b0b1a3;">(</span>getenv <span style="color: #7FFF7F;">"HOME"</span><span style="color: #b0b1a3;">)</span> <span style="color: #7FFF7F;">"/Nextcloud/org/"</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x n s"</span> . org-narrow-to-subtree<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x n w"</span> . widen<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-directory my:d:org                 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">Nextcloud &#12395;&#20445;&#23384;&#12377;&#12427;</span>
        org-return-follows-link t              <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">return &#12391;&#12522;&#12531;&#12463;&#12434;&#36799;&#12427;</span>
        org-startup-folded t                   <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#35211;&#20986;&#12375;&#12434;&#30067;&#12435;&#12391;&#34920;&#31034;</span>
        org-startup-truncated t                <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#25240;&#12426;&#36820;&#12375;&#28961;&#12375;</span>
        org-emphasis-alist                     <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#22522;&#26412; "-nw" &#12394;&#12398;&#12391;&#33394;&#22793;&#26356;</span>
        <span style="color: #b0b1a3;">(</span>cons '<span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"+"</span> '<span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:strike-through</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#999999"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>cl-delete <span style="color: #7FFF7F;">"+"</span> org-emphasis-alist <span style="color: #7FBFFF;">:key</span> 'car <span style="color: #7FBFFF;">:test</span> 'equal<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">org-completion-use-ido nil</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">GTD: &#29366;&#24907;&#12398;&#36861;&#21152;</span>
        org-todo-keywords
        '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>sequence <span style="color: #7FFF7F;">"TODO(t)"</span> <span style="color: #7FFF7F;">"WAIT(w)"</span> <span style="color: #7FFF7F;">"|"</span> <span style="color: #7FFF7F;">"DONE(d)"</span> <span style="color: #7FFF7F;">"CANCEL(c)"</span> <span style="color: #7FFF7F;">"SOMEDAY(s)"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>type <span style="color: #7FFF7F;">"ARTICLE(a)"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>type <span style="color: #7FFF7F;">"MEMO(m)"</span><span style="color: #97b098;">)</span>
          <span style="color: #b0b1a3;">)</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">GTD: &#12479;&#12464;&#12398;&#36861;&#21152;</span>
        org-tag-alist '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"OFFICE"</span>     . ?o<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"HOME"</span>       . ?h<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"MAIL"</span>       . ?m<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"WORK"</span>       . ?w<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"Debian"</span>     . ?d<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"Computer"</span>   . ?c<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"Book"</span>       . ?b<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"Emacs"</span>      . ?e<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"TeX"</span>        . ?t<span style="color: #97b098;">)</span>
                        <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"Ruby"</span>       . ?r<span style="color: #97b098;">)</span>
                        <span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">GTD: TODO&#8594;...&#8594;DONE &#12392;&#12375;&#12383;&#12456;&#12531;&#12488;&#12522;&#12434; =Arhive.org= &#12395;&#31227;&#21205;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:org-archive-done-tasks</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">ARCHIVE &#12479;&#12464;&#12434;&#20184;&#12369;&#12427;&#12384;&#12369;&#12394;&#12425;&#20197;&#19979;</span>
    <span style="color: #a5a5a6;">;;   </span><span style="color: #a5a5a6;">(org-map-entries 'org-archive-set-tag "/DONE" 'file))</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">org-archive-location &#12395; refile &#12375;&#12383;&#12356;&#12394;&#12425;&#20197;&#19979;</span>
    <span style="color: #b0b1a3;">(</span>org-map-entries 'org-archive-subtree <span style="color: #7FFF7F;">"/DONE"</span> 'file<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-archive-location <span style="color: #7FFF7F;">"Archive.org::"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-todo-statistics-hook 'my:org-archive-done-tasks<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-todo-after-statistics-hook 'my:org-archive-done-tasks<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#25991;&#23383;&#12467;&#12540;&#12489;&#24375;&#21046; ... &#20170;&#26178;&#12356;&#12425;&#12394;&#12356;&#12363;&#12418;&#65294;</span>
  <span style="color: #93a8c6;">(</span>modify-coding-system-alist 'file <span style="color: #7FFF7F;">"\\.org\\'"</span> 'utf-8<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">howm &#12501;&#12449;&#12452;&#12523;&#12418; org-mode &#12391;&#65294;</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'auto-mode-alist '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"\\.org$"</span> . org-mode<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'auto-mode-alist '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"\\.howm$"</span> . org-mode<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">timestamp &#26356;&#26032;&#25991;&#23383;&#21015;&#12398;&#22793;&#26356;</span>
  <span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">org-mode &#12391;&#12399; &#65283;+DATE: &#12434;&#12402;&#12387;&#12363;&#12369;&#12427;&#29992;&#12395;(&#65283;&#12399;&#23567;&#25991;&#23383;)&#65294;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:org-timestamp-hook</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Change `</span><span style="color: #FFBF7F;">time-stamp-start</span><span style="color: #7FFF7F;">' in org-mode"</span>
    <span style="color: #b0b1a3;">(</span>set <span style="color: #97b098;">(</span>make-local-variable 'time-stamp-start<span style="color: #97b098;">)</span> <span style="color: #7FFF7F;">"#\\+DATE: 2"</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>set <span style="color: #97b098;">(</span>make-local-variable 'time-stamp-end<span style="color: #97b098;">)</span>   <span style="color: #7FFF7F;">"\$"</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-mode-hook 'my:org-timestamp-hook<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org125f283" class="outline-3">
<h3 id="org125f283">Org-Id, Orglink</h3>
<div class="outline-text-3" id="text-org125f283">
<p>
ファイル間のリンクを uuid で行なう設定
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-id</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c l"</span>   . org-store-link<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-l"</span> . org-insert-link<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-id-link-to-org-use-id 'create-if-interactive-and-no-custom-id
        org-id-track-globally t
        <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #b0b1a3;">(</span>file-directory-p <span style="color: #7FFF7F;">"~/Public/cc-env"</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> org-id-extra-files <span style="color: #97b098;">(</span>f-glob <span style="color: #7FFF7F;">"*.org"</span> <span style="color: #7FFF7F;">"~/Public/cc-env"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>add-to-list 'org-id-extra-files
                 <span style="color: #97b098;">(</span>concat user-emacs-directory <span style="color: #7FFF7F;">"README.org"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1f625ee" class="outline-3">
<h3 id="org1f625ee">Org-journal: 日記</h3>
<div class="outline-text-3" id="text-org1f625ee">
<p>
単一ファイルに記述すること，および
エントリ作成時に日付を入れるために <code>org-jounnal-new-entry</code> を <code>advice</code> している
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-journal</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-directory-p my:d:org<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-journal-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> truncate-lines t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unbind-key</span> <span style="color: #7FFF7F;">"C-c C-j"</span> org-journal-mode-map<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">bind-key</span>   <span style="color: #7FFF7F;">"C-c C-j"</span> 'browse-url-at-point<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-journal-dir my:d:org
        org-journal-file-format <span style="color: #7FFF7F;">"journal.org"</span>
        org-journal-date-format <span style="color: #7FFF7F;">"%x (%a)"</span>
        org-journal-date-prefix <span style="color: #7FFF7F;">"* "</span>
        org-journal-time-format <span style="color: #7FFF7F;">"&lt;%Y-%m-%d %R&gt; "</span>
        org-journal-time-prefix <span style="color: #7FFF7F;">"** MEMO "</span>
        org-journal-find-file 'find-file
        <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:org-journal-add-date-entry</span> <span style="color: #b0b1a3;">(</span>prefix <span style="color: #FFFF7F;">&amp;optional</span> time<span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Insert date entry to `</span><span style="color: #FFBF7F;">org-journal-file</span><span style="color: #7FFF7F;">'"</span>
    <span style="color: #b0b1a3;">(</span>find-file <span style="color: #97b098;">(</span>expand-file-name org-journal-file-format org-journal-dir<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>org-journal-decrypt<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">unless</span>
        <span style="color: #97b098;">(</span>string-match <span style="color: #aebed8;">(</span>format-time-string org-journal-date-format<span style="color: #aebed8;">)</span>
                      <span style="color: #aebed8;">(</span>buffer-substring-no-properties <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span> <span style="color: #b0b0b3;">(</span>point-max<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">progn</span>
        <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-max<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
        <span style="color: #aebed8;">(</span>insert <span style="color: #b0b0b3;">(</span>concat <span style="color: #7FFF7F;">"\n"</span> org-journal-date-prefix
                        <span style="color: #90a890;">(</span>format-time-string org-journal-date-format<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
        <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>advice-add 'org-journal-new-entry <span style="color: #7FBFFF;">:before</span> 'my:org-journal-add-date-entry<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">Key bindings -- &#20351;&#12360;&#12390;&#12394;&#12356;...</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key org-journal-mode-map (kbd "C-c C-f") 'org-journal-open-next-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key org-journal-mode-map (kbd "C-c C-b") 'org-journal-open-previous-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key org-journal-mode-map (kbd "C-c C-j") 'org-journal-new-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map "j" 'org-journal-read-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map (kbd "C-j") 'org-journal-display-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map "]" 'org-journal-next-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map "[" 'org-journal-previous-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map (kbd "i j") 'org-journal-new-date-entry)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map (kbd "f f") 'org-journal-search-forever)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map (kbd "f w") 'org-journal-search-calendar-week)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map (kbd "f m") 'org-journal-search-calendar-month)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(define-key calendar-mode-map (kbd "f y") 'org-journal-search-calendar-year)))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org76b0d85" class="outline-3">
<h3 id="org76b0d85">Capture: メモ取り</h3>
<div class="outline-text-3" id="text-org76b0d85">
<p>
キーバインドは以前 changelog memo をやっていた時の癖で <code>C-x m</code> をメモにしている.
他には wanderlust のメールを扱えるように <code>org-wl</code> を読み込んで template を追加したぐらい．
mu のインデックスの方が良いかもしれない，と最近思っている．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-wl</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #b0b1a3;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"wl-beta"</span><span style="color: #b0b1a3;">)</span>
           <span style="color: #b0b1a3;">(</span>file-directory-p org-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-capture</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x m"</span> . org-capture<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-directory-p org-directory<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:org-journal-add-date-entry-capture</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>my:org-journal-add-date-entry nil<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>goto-char <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">@see https://github.com/sprig/org-capture-extension/issues/37</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">Brackets '{' '}' in link description cause broken org-mode link #37]]</span>
<span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:transform-square-brackets-to-round-ones</span> <span style="color: #b0b1a3;">(</span>string-to-transform<span style="color: #b0b1a3;">)</span>
  <span style="color: #7FFF7F;">"Transforms [ into ( and ] into ), other chars left unchanged."</span>
  <span style="color: #b0b1a3;">(</span>concat
   <span style="color: #97b098;">(</span>mapcar #'<span style="color: #aebed8;">(</span>lambda <span style="color: #b0b0b3;">(</span>c<span style="color: #b0b0b3;">)</span> <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #90a890;">(</span>equal c ?<span style="color: #a2b6da;">[</span><span style="color: #88090B;">)</span> ?\( <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #9cb6ad;">(</span>equal c ?<span style="color: #88090B;">]</span><span style="color: #a2b6da;">)</span> ?\) c<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
           string-to-transform<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
  <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-default-notes-file <span style="color: #b0b1a3;">(</span>concat org-directory <span style="color: #7FFF7F;">"journal.org"</span><span style="color: #b0b1a3;">)</span>
        org-capture-templates
        `<span style="color: #b0b1a3;">(</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"t"</span> <span style="color: #7FFF7F;">"TODO"</span> plain
           <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">function</span> my:org-journal-add-date-entry-capture<span style="color: #aebed8;">)</span>
           <span style="color: #7FFF7F;">"** TODO %^{title} %^g\n  %?\n  %a"</span>
           <span style="color: #7FBFFF;">:prepend</span> nil
           <span style="color: #7FBFFF;">:unnarrowed</span> nil
           <span style="color: #7FBFFF;">:kill-buffer</span> t
           <span style="color: #97b098;">)</span>
          <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">"* TODO &lt;%&lt;%Y-%m-%d&gt;&gt; %:subject %^g\n  %?\n  %a\n  #+BEGIN_QUOTE\n%i\n  #+END_QUOTE"</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"e"</span> <span style="color: #7FFF7F;">"Email TODO"</span> plain
           <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">function</span> my:org-journal-add-date-entry-capture<span style="color: #aebed8;">)</span>
           <span style="color: #7FFF7F;">"** TODO [[wl:\%5Bmsgid:%:message-id-no-brackets\%5D][%(my:transform-square-brackets-to-round-ones \"%:subject\")]]\n  :PROPERTIES:\n  :CREATED: %u\n  :END:%?\n"</span>
           <span style="color: #7FBFFF;">:prepend</span> nil
           <span style="color: #7FBFFF;">:unnarrowed</span> nil
           <span style="color: #7FBFFF;">:kill-buffer</span> t
           <span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"m"</span> <span style="color: #7FFF7F;">"Memo/Journal Entry"</span> plain
           <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">function</span> my:org-journal-add-date-entry-capture<span style="color: #aebed8;">)</span>
           <span style="color: #7FFF7F;">"** MEMO %T %?"</span>
           <span style="color: #7FBFFF;">:prepend</span> nil
           <span style="color: #7FBFFF;">:unnarrowed</span> nil
           <span style="color: #7FBFFF;">:kill-buffer</span> t
           <span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"a"</span> <span style="color: #7FFF7F;">"Aritcle Entry"</span> plain
           <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">function</span> my:org-journal-add-date-entry-capture<span style="color: #aebed8;">)</span>
           <span style="color: #7FFF7F;">"** ARTICLE %T %? "</span>
           <span style="color: #7FBFFF;">:prepend</span> nil
           <span style="color: #7FBFFF;">:unnarrowed</span> nil
           <span style="color: #7FBFFF;">:kill-buffer</span> t
           <span style="color: #97b098;">)</span>
          <span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span>
<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3fbcc3a" class="outline-3">
<h3 id="org3fbcc3a">Agenda: スケジュール，TODO 表示</h3>
<div class="outline-text-3" id="text-org3fbcc3a">
<p>
GTD 用の設定．後述の <code>org-gcal</code> と <code>orgmine</code> で取得したデータも表示している．
ついでに
</p>
<ul class="org-ul">
<li>土曜日をの face を追加.</li>
<li>祝日, 休日を日曜と同じfaceにする.</li>
</ul>
<p>
なんて事もやっている．元ネタは <a href="https://julien.danjou.info/blog/2010/org-mode-and-holidays">Org-mode and holidays</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-agenda</span>
  <span style="color: #7FBFFF;">:diminish</span> org-agenda-mode
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-directory-p my:d:org<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c a"</span> . org-agenda<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-date-saturday</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FBFFF"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;&#12398;&#22303;&#26332;&#26085;&#29992;&#12398;face"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-date-today-saturday</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> my:org-agenda-date-saturday <span style="color: #7FBFFF;">:underline</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;&#12398;&#20170;&#26085;&#12363;&#12388;&#22303;&#26332;&#26085;&#29992;&#12398;face"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-date-today-weekend</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> org-agenda-date-weekend <span style="color: #7FBFFF;">:underline</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;&#12398;&#20170;&#26085;&#12363;&#12388;&#26085;&#12539;&#31069;&#26085;&#29992;&#12398;face"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12371;&#12387;&#12363;&#12425;&#12399; org-gcal &#12391;&#21516;&#26399;&#12375;&#12383;&#12459;&#12524;&#12531;&#12480;&#12540;&#12398;&#33394;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-calendar-KUSM</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFF7F"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;, KUSM.org &#12398;&#34920;&#31034; face"</span>
    <span style="color: #7FBFFF;">:group</span> 'org-agenda <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-calendar-Schedule</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFFFF"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;, Schedule.org &#12398;&#34920;&#31034; face"</span>
    <span style="color: #7FBFFF;">:group</span> 'org-agenda <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-calendar-GFD</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFF7F"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;, GFD.org &#12398;&#34920;&#31034; face"</span>
    <span style="color: #7FBFFF;">:group</span> 'org-agenda <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-calendar-DebianJP</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#BF7FFF"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;, DebianJP.org &#12398;&#34920;&#31034; face"</span>
    <span style="color: #7FBFFF;">:group</span> 'org-agenda <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">my:org-agenda-calendar-twitter</span>
    '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#CCCCCC"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Agenda &#34920;&#31034;&#20013;, Twitter log &#12398;&#34920;&#31034; face"</span>
    <span style="color: #7FBFFF;">:group</span> 'org-agenda <span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26356;&#26032;&#29992;&#12398;&#38306;&#25968; - &#12392;&#12426;&#12354;&#12360;&#12378;&#21205;&#12356;&#12390;&#12356;&#12427;&#12398;&#12391;&#33391;&#12375;&#12392;&#12377;&#12427;&#12364;&#65292;&#12522;&#12501;&#12449;&#12463;&#12479;&#12522;&#12531;&#12464;&#12375;&#12383;&#12356;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:org-agenda-day-face-function</span> <span style="color: #b0b1a3;">(</span>date<span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Compute DATE face for saturday, holidays."</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">cl-dolist</span> <span style="color: #97b098;">(</span>file <span style="color: #aebed8;">(</span>org-agenda-files nil 'ifmode<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">cond</span>
       <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>member <span style="color: #90a890;">(</span>calendar-day-of-week date<span style="color: #90a890;">)</span> '<span style="color: #90a890;">(</span>7<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #90a890;">(</span>org-agenda-todayp date<span style="color: #90a890;">)</span>
            <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">cl-return</span> 'my:org-agenda-date-today-weekend<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">cl-return</span> 'org-agenda-date-weekend<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
       <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>member <span style="color: #90a890;">(</span>calendar-day-of-week date<span style="color: #90a890;">)</span> '<span style="color: #90a890;">(</span>6<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #90a890;">(</span>org-agenda-todayp date<span style="color: #90a890;">)</span>
            <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">cl-return</span> 'my:org-agenda-date-today-saturday<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
        <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">cl-return</span> 'my:org-agenda-date-saturday<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>face
             <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">cl-dolist</span> <span style="color: #a2b6da;">(</span>entry <span style="color: #9cb6ad;">(</span>org-agenda-get-day-entries file date<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #9cb6ad;">(</span><span style="color: #8a8a8a;">(</span>category <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">with-temp-buffer</span>
                                 <span style="color: #b0b1a3;">(</span>insert entry<span style="color: #b0b1a3;">)</span>
                                 <span style="color: #b0b1a3;">(</span>org-get-category <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span>
                 <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">or</span> <span style="color: #93a8c6;">(</span>string= <span style="color: #7FFF7F;">"&#31069;&#26085;"</span> category<span style="color: #93a8c6;">)</span>
                           <span style="color: #93a8c6;">(</span>string= <span style="color: #7FFF7F;">"&#20241;&#26085;"</span> category<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
                   <span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #93a8c6;">(</span>org-agenda-todayp date<span style="color: #93a8c6;">)</span>
                       <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">cl-return</span> 'my:org-agenda-date-today-weekend<span style="color: #93a8c6;">)</span>
                     <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">cl-return</span> 'org-agenda-date-weekend<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
        <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">when</span> face <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">cl-return</span> face<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#20351;&#29992;&#12377;&#12427;&#12501;&#12449;&#12452;&#12523;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">dolist</span> <span style="color: #b0b1a3;">(</span>file
           '<span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"Archive.org"</span>
             <span style="color: #7FFF7F;">"Holidays.org"</span>
             <span style="color: #7FFF7F;">"Memo.org"</span>
             <span style="color: #7FFF7F;">"Schedule.org"</span>
             <span style="color: #7FFF7F;">"MHC.org"</span>
             <span style="color: #7FFF7F;">"GFD.org"</span>
             <span style="color: #7FFF7F;">"KUSM.org"</span>
             <span style="color: #7FFF7F;">"DebianJP.org"</span>
             <span style="color: #7FFF7F;">"twitter.org"</span>
             <span style="color: #7FFF7F;">"journal.org"</span>
             <span style="color: #7FFF7F;">"redmine_GFD.org"</span>
             <span style="color: #7FFF7F;">"redmine_FluidSoc.org"</span>
             <span style="color: #7FFF7F;">"redmine_KUSM.org"</span>
             <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>add-to-list 'org-agenda-files <span style="color: #97b098;">(</span>concat org-directory file<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'org-agenda-files <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #7FFF7F;">"README.org"</span> user-emacs-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#34920;&#31034;&#12398;&#12459;&#12473;&#12479;&#12510;&#12452;&#12474;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-agenda-span 'day                   <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">day or week</span>
        org-agenda-format-date <span style="color: #7FFF7F;">"%Y/%m/%d (%a)"</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">YY/MM/DD (&#26332;)</span>
        org-agenda-weekend-days '<span style="color: #b0b1a3;">(</span>0<span style="color: #b0b1a3;">)</span>           <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26085;&#26332;&#22987;&#12414;&#12426;</span>
        <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#34920;&#31034;&#38306;&#25968;</span>
        org-agenda-day-face-function 'my:org-agenda-day-face-function
        org-agenda-custom-commands             <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">GTD &#29992;&#12398;&#35373;&#23450;</span>
        '<span style="color: #b0b1a3;">(</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"n"</span> <span style="color: #7FFF7F;">"agenda and all TODO list"</span>
           <span style="color: #aebed8;">(</span>
            <span style="color: #b0b0b3;">(</span>agenda <span style="color: #7FFF7F;">""</span>
                    <span style="color: #90a890;">(</span><span style="color: #a2b6da;">(</span>org-agenda-ndays 1<span style="color: #a2b6da;">)</span>
                     <span style="color: #a2b6da;">(</span>org-agenda-entry-types '<span style="color: #9cb6ad;">(</span><span style="color: #7FBFFF;">:timestamp</span> <span style="color: #7FBFFF;">:sexp</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>todo <span style="color: #7FFF7F;">"TODO"</span>
                  <span style="color: #90a890;">(</span><span style="color: #a2b6da;">(</span>org-agenda-prefix-format <span style="color: #7FFF7F;">" %i %-22:c"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>todo <span style="color: #7FFF7F;">"&#26032;&#35215;|&#30528;&#25163;|&#36914;&#34892;&#20013;|&#30906;&#35469;"</span>
                  <span style="color: #90a890;">(</span><span style="color: #a2b6da;">(</span>org-agenda-prefix-format <span style="color: #7FFF7F;">" %i %-22:c"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>todo <span style="color: #7FFF7F;">"WAIT"</span>
                  <span style="color: #90a890;">(</span><span style="color: #a2b6da;">(</span>org-agenda-prefix-format <span style="color: #7FFF7F;">" %i %-22:c"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #b0b0b3;">)</span>
            <span style="color: #b0b0b3;">(</span>todo <span style="color: #7FFF7F;">"SOMEDAY"</span>
                  <span style="color: #90a890;">(</span><span style="color: #a2b6da;">(</span>org-agenda-prefix-format <span style="color: #7FFF7F;">" %i %-22:c"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span>
                  <span style="color: #b0b0b3;">)</span>
            <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"N"</span> <span style="color: #7FFF7F;">"All memo entry"</span>
           <span style="color: #aebed8;">(</span><span style="color: #a5a5a6;">;;</span>
            <span style="color: #b0b0b3;">(</span>todo <span style="color: #7FFF7F;">"MEMO"</span><span style="color: #b0b0b3;">)</span>
            <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
           <span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#33394;&#20184;&#12369;</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-agenda-finalize-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">save-excursion</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"KUSM:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                     '<span style="color: #90a890;">(</span>face my:org-agenda-calendar-KUSM<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"Schedule:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face my:org-agenda-calendar-Schedule<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"MHC:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face my:org-agenda-calendar-Schedule<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"DebianJP:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face my:org-agenda-calendar-DebianJP<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"GFD:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face my:org-agenda-calendar-GFD<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"twitter:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face my:org-agenda-calendar-twitter<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"&#31069;&#26085;:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face org-agenda-date-weekend<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span>goto-char <span style="color: #b0b0b3;">(</span>point-min<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">while</span> <span style="color: #b0b0b3;">(</span>re-search-forward <span style="color: #7FFF7F;">"&#20241;&#26085;:"</span> nil t<span style="color: #b0b0b3;">)</span>
                  <span style="color: #b0b0b3;">(</span>add-text-properties <span style="color: #90a890;">(</span>match-beginning 0<span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>point-at-eol<span style="color: #90a890;">)</span>
                                       '<span style="color: #90a890;">(</span>face org-agenda-date-weekend<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
                <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc3af6e6" class="outline-3">
<h3 id="orgc3af6e6">Babel</h3>
<div class="outline-text-3" id="text-orgc3af6e6">
</div>
<div id="outline-container-org7e2c56a" class="outline-4">
<h4 id="org7e2c56a">org-src</h4>
<div class="outline-text-4" id="text-org7e2c56a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-src</span>
  <span style="color: #7FBFFF;">:diminish</span> org-src-mode
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-src-fontify-natively t       <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">font-lock</span>
        org-src-tab-acts-natively t      <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">indent</span>
        org-edit-src-content-indentation 0
        org-src-preserve-indentation t
        <span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcaf668d" class="outline-4">
<h4 id="orgcaf668d">org-ditaa</h4>
<div class="outline-text-4" id="text-orgcaf668d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ob-ditaa</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-exists-p <span style="color: #b0b1a3;">(</span>concat <span style="color: #97b098;">(</span>getenv <span style="color: #7FFF7F;">"HOME"</span><span style="color: #97b098;">)</span> <span style="color: #7FFF7F;">"/bin/jditaa.jar"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-ditaa-jar-path <span style="color: #b0b1a3;">(</span>concat <span style="color: #97b098;">(</span>getenv <span style="color: #7FFF7F;">"HOME"</span><span style="color: #97b098;">)</span> <span style="color: #7FFF7F;">"/bin/jditaa.jar"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>org-babel-do-load-languages 'org-babel-load-languages
                               '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>ditaa . t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf6a1a21" class="outline-3">
<h3 id="orgf6a1a21">OrgとGoogle カレンダーの連携: <code>org-gcal</code></h3>
<div class="outline-text-3" id="text-orgf6a1a21">
</div>
<div id="outline-container-org6c0c67c" class="outline-4">
<h4 id="org6c0c67c">token 等の置き場所の変更</h4>
<div class="outline-text-4" id="text-org6c0c67c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">request</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> request-storage-directory <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"request"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>file-directory-p request-storage-directory<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>make-directory request-storage-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5145f84" class="outline-4">
<h4 id="org5145f84">org-gcal 本体の設定</h4>
<div class="outline-text-4" id="text-org5145f84">
<p>
実際の情報等は <code>password-store</code> を使って設定しておく.
ついでに agenda 表示の際の色付けを設定．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">org-gcal</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> my:d:password-store
           <span style="color: #b0b1a3;">(</span>file-directory-p my:d:org<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:commands</span> <span style="color: #93a8c6;">(</span>org-gcal-fetch<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-gcal-dir <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"org-gcal"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> org-gcal-dir
    <span style="color: #b0b1a3;">(</span>make-directory org-gcal-dir<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-gcal-token-file <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #7FFF7F;">".org-gcal-token"</span> org-gcal-dir<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> alert-log-messages t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> alert-default-style 'log<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-gcal-down-days   90<span style="color: #93a8c6;">)</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#36942;&#21435; 3 month</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-gcal-up-days    180<span style="color: #93a8c6;">)</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26410;&#26469; 6 month</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-gcal-auto-archive nil<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>load <span style="color: #b0b1a3;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/org-gcal.gpg"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
password-store には multiline で設定を書く．例えば以下:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> org-gcal-client-id <span style="color: #7FFF7F;">"XXXXXXXXXXX"</span>
      org-gcal-client-secret <span style="color: #7FFF7F;">"XXXXXXXXXXX"</span>
      org-gcal-file-alist
      '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"XXXXX@gmail.com"</span> . <span style="color: #7FFF7F;">"~/org/Schedule.org"</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"YYYYY@group.calendar.google.com"</span> . <span style="color: #7FFF7F;">"~/org/Project1.org"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org7bc46db" class="outline-3">
<h3 id="org7bc46db">OrgとRedmine の連携: <code>orgmine</code></h3>
<div class="outline-text-3" id="text-org7bc46db">
<p>
素晴しい!! <a href="https://github.com/kametoku/orgmine">kametoku/orgmine: Emacs minor mode for org-mode with redmine integration</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">orgmine</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> my:d:password-store
           <span style="color: #b0b1a3;">(</span>file-directory-p org-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:diminish</span> <span style="color: #93a8c6;">(</span>orgmine-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:commands</span> <span style="color: #93a8c6;">(</span>orgmine-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>package-installed-p 'orgmine<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>package-install 'elmine<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>quelpa '<span style="color: #97b098;">(</span>orgmine
              <span style="color: #7FBFFF;">:fetcher</span> github
              <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"kametoku/orgmine"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'safe-local-variable-values
               '<span style="color: #b0b1a3;">(</span>orgmine-note-block-begin . <span style="color: #7FFF7F;">"#+BEGIN_SRC textile"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #aebed8;">(</span>assoc <span style="color: #7FFF7F;">"om_server"</span> org-file-properties<span style="color: #aebed8;">)</span> <span style="color: #aebed8;">(</span>orgmine-mode<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> orgmine-note-block-begin <span style="color: #7FFF7F;">"#+BEGIN_SRC gfm"</span>   <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#35201;&#35519;&#25972;</span>
        orgmine-note-block-end   <span style="color: #7FFF7F;">"#+END_SRC\n"</span>
        orgmine-default-todo-keyword <span style="color: #7FFF7F;">"&#26032;&#35215;"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12469;&#12540;&#12496;&#35373;&#23450;</span>
  <span style="color: #93a8c6;">(</span>load <span style="color: #b0b1a3;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/orgmine.gpg"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org11356aa" class="outline-3">
<h3 id="org11356aa">Org-Export</h3>
<div class="outline-text-3" id="text-org11356aa">
</div>
<div id="outline-container-org962447a" class="outline-4">
<h4 id="org962447a">一般設定</h4>
<div class="outline-text-4" id="text-org962447a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ox</span>
    <span style="color: #7FBFFF;">:config</span>
    <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-export-with-toc nil
          org-export-with-section-numbers nil<span style="color: #93a8c6;">)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">for Beamer</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:shortdate</span>    <span style="color: #7FFF7F;">"SHORTDATE"</span> nil nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:shorttitle</span>   <span style="color: #7FFF7F;">"SHORTTITLE"</span> nil nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">for Jekyll</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:layout</span>    <span style="color: #7FFF7F;">"LAYOUT"</span> nil <span style="color: #7FFF7F;">"default"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:ref</span>       <span style="color: #7FFF7F;">"REF"</span> nil nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:permalink</span> <span style="color: #7FFF7F;">"PERMALINK"</span> nil nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:redirect_from</span> <span style="color: #7FFF7F;">"redirect_from"</span> nil nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #93a8c6;">(</span>add-to-list 'org-export-options-alist
                 '<span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:redirect_to</span> <span style="color: #7FFF7F;">"redirect_to"</span> nil nil<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
    <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org81b75c9" class="outline-4">
<h4 id="org81b75c9">Beamer export</h4>
<div class="outline-text-4" id="text-org81b75c9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ox-beamer</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'org-latex-classes
               '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"my:beamer"</span>
                 <span style="color: #7FFF7F;">"\\documentclass[dvipdfmx,presentation]{beamer}</span>
<span style="color: #7FFF7F;">                     [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]"</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\section\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\section*\&#123;%s\}"</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\subsection\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\subsection*\&#123;%s\}"</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\subsubsection\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\subsubsection*\&#123;%s\}"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
               <span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'org-latex-classes
               '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"my:beamer-uplatex"</span>
                 <span style="color: #7FFF7F;">"\\documentclass[dvipdfmx,presentation]{beamer}</span>
<span style="color: #7FFF7F;">                     [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]"</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\section\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\section*\&#123;%s\}"</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\subsection\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\subsection*\&#123;%s\}"</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\subsubsection\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\subsubsection*\&#123;%s\}"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
               <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'org-latex-classes
               '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"my:beamer-pdflatex"</span>
                 <span style="color: #7FFF7F;">"\\documentclass[unicode,presentation]{beamer}</span>
<span style="color: #7FFF7F;">                     [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]"</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\section\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\section*\&#123;%s\}"</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\subsection\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\subsection*\&#123;%s\}"</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"\\subsubsection\&#123;%s\}"</span> . <span style="color: #7FFF7F;">"\\subsubsection*\&#123;%s\}"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
               <span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
LATEX<sub>CLASS</sub> に <code>my:beamer</code> を指定すると，上記設定で export される．
</p>
</div>
</div>
<div id="outline-container-org2aabc57" class="outline-4">
<h4 id="org2aabc57">HTML export</h4>
<div class="outline-text-4" id="text-org2aabc57">
<p>
後述の Jekyll 用の設定も参照のこと．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ox-html</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-html-use-infojs nil
        org-html-html5-fancy t
        org-export-htmlize-output-type 'inline-css
        org-html-doctype <span style="color: #7FFF7F;">"html5"</span>
        org-html-text-markup-alist
        '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>bold           . <span style="color: #7FFF7F;">"&lt;strong&gt;%s&lt;/strong&gt;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>code           . <span style="color: #7FFF7F;">"&lt;code&gt;%s&lt;/code&gt;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>italic         . <span style="color: #7FFF7F;">"&lt;i&gt;%s&lt;/i&gt;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>strike-through . <span style="color: #7FFF7F;">"&lt;del&gt;%s&lt;/del&gt;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>underline      . <span style="color: #7FFF7F;">"&lt;span class=\"underline\"&gt;%s&lt;/span&gt;"</span><span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span>verbatim       . <span style="color: #7FFF7F;">"&lt;code&gt;%s&lt;/code&gt;"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org763dd29" class="outline-4">
<h4 id="org763dd29">Jekyll 用の Backend の定義</h4>
<div class="outline-text-4" id="text-org763dd29">
<p>
Web サイトは Jekyll で作成しています．
<a href="https://github.com/yoshinari-nomura/org-octopress">yoshinari-nomura/org-octopress: org-mode in octopress</a> の
<code>ox-jekyll</code> を参考に <del>改造して</del> ，
html export の際に必要な yaml front matter を出力できるようにしてます．
あと，src-block が liquid に解釈されない様に escape してます．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>org-export-define-derived-backend 'jekyll 'html
  <span style="color: #7FBFFF;">:menu-entry</span>
  '<span style="color: #93a8c6;">(</span>?j <span style="color: #7FFF7F;">"Jekyl: export to html with YAML front matter."</span>
       <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>?H <span style="color: #7FFF7F;">"To temporary buffer"</span>
            <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b0b3;">(</span>a s v b<span style="color: #b0b0b3;">)</span> <span style="color: #b0b0b3;">(</span>org-jekyll-export-as-html a s v<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>?h <span style="color: #7FFF7F;">"To file"</span> <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b0b3;">(</span>a s v b<span style="color: #b0b0b3;">)</span> <span style="color: #b0b0b3;">(</span>org-jekyll-export-to-html a s v<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:translate-alist</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>template  . org-jekyll-template<span style="color: #b0b1a3;">)</span>
    <span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:filters-alist</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FBFFF;">:filter-final-output</span> . org-jekyll-finalized<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">template</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-jekyll-template</span> <span style="color: #93a8c6;">(</span>contents info<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Return complete document string after HTML conversion."</span>
  <span style="color: #93a8c6;">(</span>concat <span style="color: #b0b1a3;">(</span>org-jekyll--yaml-front-matter info<span style="color: #b0b1a3;">)</span> contents<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">&#24190;&#12388;&#12363;&#12398;&#25991;&#23383;&#21015;&#12434;&#32622;&#25563;&#12377;&#12427;</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">- liquid template&#12395;&#35492;&#35469;&#12373;&#12428;&#12427; `</span><span style="color: #FFBF7F;">&#123;%</span><span style="color: #a5a5a6;">', `</span><span style="color: #FFBF7F;">%&#125;</span><span style="color: #a5a5a6;">'</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">- `:' &#12398; escape</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">- table-of-contents &#12398;&#20966;&#29702;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-jekyll-finalized</span> <span style="color: #93a8c6;">(</span>contents _backend info<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Publish src-block to html, Escape liquid tags, e.g. &#123;%, %&#125;"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">with-temp-buffer</span>
    <span style="color: #b0b1a3;">(</span>insert contents<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>perform-replace <span style="color: #7FFF7F;">"&amp;$58;"</span> <span style="color: #7FFF7F;">"&amp;#58;"</span> nil nil nil nil nil <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>perform-replace <span style="color: #7FFF7F;">"&#123;%"</span> <span style="color: #7FFF7F;">"&amp;#123;%"</span> nil nil nil nil nil <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>perform-replace <span style="color: #7FFF7F;">"%&#125;"</span> <span style="color: #7FFF7F;">"%&amp;#125;"</span> nil nil nil nil nil <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>perform-replace <span style="color: #7FFF7F;">"&lt;nav id=\"table-of-contents"</span> <span style="color: #7FFF7F;">"&lt;div id=\"toc-wrapper\"&gt;</span>
<span style="color: #7FFF7F;">&lt;nav id=\"table-of-contents"</span> nil nil nil nil nil <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>perform-replace <span style="color: #7FFF7F;">"&lt;/nav&gt;"</span> <span style="color: #97b098;">(</span>format <span style="color: #7FFF7F;">"&lt;/nav&gt;</span>
<span style="color: #7FFF7F;">&lt;/div&gt;</span>
<span style="color: #7FFF7F;">&lt;a href=\"#toc-toggle\" class=\"btn toc-btn\" id=\"toc-toggle\"&gt;%s&lt;/a&gt;"</span>
                                      <span style="color: #aebed8;">(</span>org-html--translate <span style="color: #7FFF7F;">"Table of Contents"</span> info<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
                     nil nil nil nil nil <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>set-auto-mode t<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>buffer-substring-no-properties <span style="color: #97b098;">(</span>point-min<span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>point-max<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-jekyll--get-option</span> <span style="color: #93a8c6;">(</span>info property-name <span style="color: #FFFF7F;">&amp;optional</span> default<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>property <span style="color: #aebed8;">(</span>org-export-data <span style="color: #b0b0b3;">(</span>plist-get info property-name<span style="color: #b0b0b3;">)</span> info<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>format <span style="color: #7FFF7F;">"%s"</span> <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">or</span> property default <span style="color: #7FFF7F;">""</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;;</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-jekyll--yaml-front-matter</span> <span style="color: #93a8c6;">(</span>info<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>title
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:title</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>date
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:date</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>language
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:language</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>layout
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:layout</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>jekyll-ref
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:ref</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>jekyll-permalink
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:permalink</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>jekyll-redirect-from
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:redirect_from</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>jekyll-redirect-to
         <span style="color: #aebed8;">(</span>org-jekyll--get-option info <span style="color: #7FBFFF;">:redirect_to</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
        <span style="color: #97b098;">(</span>convert-to-yaml-list
         <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b0b3;">(</span>arg<span style="color: #b0b0b3;">)</span>
           <span style="color: #b0b0b3;">(</span>mapconcat #'<span style="color: #90a890;">(</span>lambda <span style="color: #a2b6da;">(</span>text<span style="color: #a2b6da;">)</span><span style="color: #a2b6da;">(</span>concat <span style="color: #7FFF7F;">"\n- "</span> text<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span> <span style="color: #90a890;">(</span>split-string arg<span style="color: #90a890;">)</span> <span style="color: #7FFF7F;">" "</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>concat
     <span style="color: #7FFF7F;">"---"</span>
     <span style="color: #7FFF7F;">"\ntitle: "</span>      <span style="color: #97b098;">(</span>s-replace <span style="color: #7FFF7F;">":"</span> <span style="color: #7FFF7F;">"&amp;$58;"</span> title<span style="color: #97b098;">)</span>
     <span style="color: #7FFF7F;">"\ndate: "</span>       date
     <span style="color: #7FFF7F;">"\nlayout: "</span>     layout
     <span style="color: #7FFF7F;">"\nlang: "</span>       language
     <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #aebed8;">(</span>string-equal jekyll-ref <span style="color: #7FFF7F;">""</span><span style="color: #aebed8;">)</span>
       <span style="color: #aebed8;">(</span>concat <span style="color: #7FFF7F;">"\nref: "</span> jekyll-ref<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
     <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #aebed8;">(</span>string-equal jekyll-permalink <span style="color: #7FFF7F;">""</span><span style="color: #aebed8;">)</span>
       <span style="color: #aebed8;">(</span>concat <span style="color: #7FFF7F;">"\npermalink: "</span> jekyll-permalink<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
     <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #aebed8;">(</span>string-equal jekyll-redirect-from <span style="color: #7FFF7F;">""</span><span style="color: #aebed8;">)</span>
       <span style="color: #aebed8;">(</span>concat <span style="color: #7FFF7F;">"\nredirect_from: "</span> jekyll-redirect-from<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
     <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #aebed8;">(</span>string-equal jekyll-redirect-to <span style="color: #7FFF7F;">""</span><span style="color: #aebed8;">)</span>
       <span style="color: #aebed8;">(</span>concat <span style="color: #7FFF7F;">"\nredirect_to: "</span> jekyll-redirect-to<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
     <span style="color: #7FFF7F;">"\n---\n"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-jekyll-export-as-html</span>
    <span style="color: #93a8c6;">(</span><span style="color: #FFFF7F;">&amp;optional</span> async subtreep visible-only body-only ext-plist<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Export current buffer to a HTML buffer adding some YAML front matter."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>org-export-to-buffer 'jekyll <span style="color: #7FFF7F;">"*Org Jekyll HTML Export*"</span>
    async subtreep visible-only body-only ext-plist <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>html-mode<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-jekyll-export-to-html</span>
    <span style="color: #93a8c6;">(</span><span style="color: #FFFF7F;">&amp;optional</span> async subtreep visible-only body-only ext-plist<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"Export current buffer to a HTML file adding some YAML front matter."</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>outfile <span style="color: #aebed8;">(</span>org-export-output-file-name <span style="color: #7FFF7F;">".html"</span> subtreep<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>org-export-to-file 'jekyll outfile async subtreep visible-only body-only ext-plist<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8489a30" class="outline-3">
<h3 id="org8489a30">Org-Wiki</h3>
<div class="outline-text-3" id="text-org8489a30">
<p>
計算機関連のメモは <a href="https://github.com/uwabami/plain-org-wiki">uwabami/plain-org-wiki</a> で書いています．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>package-installed-p 'plain-org-wiki<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>plain-org-wiki
            <span style="color: #7FBFFF;">:fetcher</span> github
            <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"uwabami/plain-org-wiki"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:load-plain-org-wiki</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">plain-org-wiki</span>
      <span style="color: #7FBFFF;">:bind</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #7FFF7F;">"C-x M"</span> . plain-org-wiki <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #7FBFFF;">:config</span>
      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">setq</span> pow-directory <span style="color: #aebed8;">(</span>concat <span style="color: #b0b0b3;">(</span>getenv <span style="color: #7FFF7F;">"HOME"</span><span style="color: #b0b0b3;">)</span> <span style="color: #7FFF7F;">"/Public/cc-env/"</span><span style="color: #aebed8;">)</span>
            pow-extra-dirs <span style="color: #aebed8;">(</span>list user-emacs-directory<span style="color: #aebed8;">)</span>
            pow-template <span style="color: #7FFF7F;">"#+TITLE:</span>
<span style="color: #7FFF7F;">#+DATE: 20</span>
<span style="color: #7FFF7F;">#+LANGUAGE: ja</span>
<span style="color: #7FFF7F;">#+REF: cc-env/%s</span>
<span style="color: #7FFF7F;">#+LAYOUT: cc-env</span>
<span style="color: #7FFF7F;">#+SETUPFILE: ~/Public/_setup.org</span>
<span style="color: #7FFF7F;">#+PERMALINK: /cc-env/%s.html</span>
<span style="color: #7FFF7F;">Related [[wiki:index][Index]]</span>
<span style="color: #7FFF7F;">"</span><span style="color: #97b098;">)</span>
      <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:load-plain-org-wiki<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6f47a64" class="outline-3">
<h3 id="org6f47a64">Org-Project</h3>
<div class="outline-text-3" id="text-org6f47a64">
<p>
<code>org-publish-all</code> 等で batch で一括出力できるようにしておきます．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">htmlize</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ox-publish</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-directory-p <span style="color: #7FFF7F;">"~/Public/.git"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span> <span style="color: #93a8c6;">(</span>my:load-plain-org-wiki<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">org-publish-to-jekyll</span> <span style="color: #b0b1a3;">(</span>plist filename pub-dir<span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"publishing org to html with Jekyll YAML front matter."</span>
    <span style="color: #b0b1a3;">(</span>org-id-update-id-locations<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>org-publish-org-to 'jekyll filename <span style="color: #7FFF7F;">".html"</span> plist pub-dir<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> org-publish-use-timestamps-flag t
        org-publish-timestamp-directory <span style="color: #7FFF7F;">"~/Public/.org-timestamps/"</span>
        org-publish-project-alist
        '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"org"</span>
           <span style="color: #7FBFFF;">:base-directory</span> <span style="color: #7FFF7F;">"~/Public/"</span>
           <span style="color: #7FBFFF;">:base-extension</span> <span style="color: #7FFF7F;">"org"</span>
           <span style="color: #7FBFFF;">:exclude</span> <span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">_.*</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">cc-env</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span>
           <span style="color: #7FBFFF;">:publishing-directory</span> <span style="color: #7FFF7F;">"~/Public/"</span>
           <span style="color: #7FBFFF;">:publishing-function</span> org-publish-to-jekyll
           <span style="color: #7FBFFF;">:recursive</span> t
           <span style="color: #7FBFFF;">:with-toc</span> nil
           <span style="color: #7FBFFF;">:headline-levels</span> 5
           <span style="color: #97b098;">)</span>
          <span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"cc-env"</span>
           <span style="color: #7FBFFF;">:base-directory</span> <span style="color: #7FFF7F;">"~/Public/cc-env/"</span>
           <span style="color: #7FBFFF;">:base-extension</span> <span style="color: #7FFF7F;">"org"</span>
           <span style="color: #7FBFFF;">:publishing-directory</span> <span style="color: #7FFF7F;">"~/Public/cc-env/"</span>
           <span style="color: #7FBFFF;">:publishing-function</span> org-publish-to-jekyll
           <span style="color: #7FBFFF;">:recursive</span> t
           <span style="color: #7FBFFF;">:with-toc</span> t
           <span style="color: #7FBFFF;">:headline-levels</span> 5
           <span style="color: #97b098;">)</span>
          <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">("web" :components ("org" "cc-env"))</span>
          <span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdd9121d" class="outline-2">
<h2 id="orgdd9121d">Howm</h2>
<div class="outline-text-2" id="text-orgdd9121d">
<p>
Org を使う前は Howm を使っていました.
過去のメモを検索するためだけに未だに Howm を使っています.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">howm</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #b0b1a3;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"howm"</span><span style="color: #b0b1a3;">)</span>
           <span style="color: #b0b1a3;">(</span>executable-find <span style="color: #7FFF7F;">"ag"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:diminish</span> howm-mode
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #7FBFFF;">:map</span> howm-mode-map
              <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c , ,"</span>     . howm-menu<span style="color: #b0b1a3;">)</span>
              <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-c"</span>     . nil<span style="color: #b0b1a3;">)</span>
              <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x C-z C-c"</span> . howm-save-and-kill-buffer/screen<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'howm-menu-hook <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
                              <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">setq</span> truncate-lines t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12398;&#35373;&#23450;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12513;&#12514;&#12398;&#20869;&#23481;&#12399; Nextcloud &#12391;&#21516;&#26399;&#12377;&#12427;&#12371;&#12392;&#12395;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-directory <span style="color: #7FFF7F;">"~/Nextcloud/org"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12513;&#12491;&#12517;&#12540;&#12392;&#23653;&#27508;&#12434;&#26908;&#32034;&#23550;&#35937;&#12363;&#12425;&#38500;&#22806;&#12377;&#12427;&#12383;&#12417;&#12395;&#21029;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12408;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-keyword-file <span style="color: #7FFF7F;">"~/Nextcloud/howm/keys"</span>
        howm-history-file <span style="color: #7FFF7F;">"~/Nextcloud/howm/history"</span>
        howm-menu-file <span style="color: #7FFF7F;">"~/Nextcloud/howm/menu"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12513;&#12514;&#12501;&#12449;&#12452;&#12523;&#12399;&#26085;&#20184;&#26178;&#21051;&#27598;&#12395;&#20998;&#38626;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-file-name-format <span style="color: #7FFF7F;">"%Y%m%d-%H%M%S.howm"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;;  </span><span style="color: #a5a5a6;">&#12513;&#12514;&#12399;org&#12391;&#26360;&#12367;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">- org-mode &#12398; hook &#12392;&#12375;&#12390; howm-mode &#12434;&#30331;&#37682;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">- C-c &#12364; org &#12395;&#21462;&#12425;&#12428;&#12427;&#12398;&#12391;, howm &#12398; prefix &#12399; C-xC-z &#12395;</span>
  <span style="color: #93a8c6;">(</span>add-hook 'org-mode-hook 'howm-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>global-unset-key <span style="color: #b0b1a3;">(</span>kbd <span style="color: #7FFF7F;">"C-x C-z"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-prefix <span style="color: #b0b1a3;">(</span>kbd <span style="color: #7FFF7F;">"C-x C-z"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">title header &#12399; "*"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-view-title-header <span style="color: #7FFF7F;">"*"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #7FFF7F;">"elscreen-howm"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#33394;&#20184;&#12369;&#12399; org-mode &#20219;&#12379;: howm &#12398; font-lock &#12434;&#28961;&#21177;&#21270;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-use-color nil<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">&#20197;&#19979;&#65292;&#27770;&#12414;&#12426;&#25991;&#21477;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26908;&#32034;&#12391;&#22823;&#25991;&#23383;&#23567;&#25991;&#23383;&#12434;&#21306;&#21029;&#12375;&#12394;&#12356;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-keyword-case-fold-search t<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">grep &#12398; &#20195;&#12431;&#12426;&#12395; ag &#12434;&#20351;&#12358;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-view-use-grep t
        howm-view-grep-command <span style="color: #7FFF7F;">"ag"</span>
        howm-view-grep-option <span style="color: #7FFF7F;">"--nocolor --nogroup"</span>
        howm-view-grep-extended-option nil
        howm-view-grep-fixed-option <span style="color: #7FFF7F;">"-F"</span>
        howm-view-grep-expr-option nil
        howm-view-grep-file-stdin-option nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:howm:add-dev-null</span> <span style="color: #b0b1a3;">(</span>args<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>str   <span style="color: #b0b0b3;">(</span>car args<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>               <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26908;&#32034;&#25991;&#23383;&#21015;</span>
          <span style="color: #aebed8;">(</span>files <span style="color: #b0b0b3;">(</span>nth 1 args<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>            <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12501;&#12449;&#12452;&#12523;&#12522;&#12473;&#12488;</span>
      <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #aebed8;">(</span>= 1 <span style="color: #b0b0b3;">(</span>length files<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>           <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#21336;&#19968;&#12501;&#12449;&#12452;&#12523;&#65311;</span>
        <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">if</span> <span style="color: #b0b0b3;">(</span>file-regular-p <span style="color: #90a890;">(</span>car files<span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>   <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#36890;&#24120;&#12501;&#12449;&#12452;&#12523;&#65311;</span>
            <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#21336;&#19968;&#12398;&#36890;&#24120;&#12501;&#12449;&#12452;&#12523;&#12364;&#25351;&#23450;&#12373;&#12428;&#12383;&#22580;&#21512;&#12395; /dev/null &#12434;&#36861;&#21152;</span>
            <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">setq</span> files <span style="color: #90a890;">(</span>append files '<span style="color: #a2b6da;">(</span><span style="color: #7FFF7F;">"/dev/null"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>list str files<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>advice-add 'howm-real-grep-single <span style="color: #7FBFFF;">:filter-args</span> #'my:howm:add-dev-null<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26908;&#32034;&#23550;&#35937;&#12398;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12398;&#36861;&#21152;...&#12392;&#12426;&#12354;&#12360;&#12378;&#36861;&#21152;&#12375;&#12394;&#12356;&#12371;&#12392;&#12395;&#65294;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-search-other-dir nil<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26908;&#32034;&#23550;&#35937;&#22806;&#12398;&#12501;&#12449;&#12452;&#12523;: ad hoc &#12395;&#12393;&#12435;&#12393;&#12435;&#22679;&#12360;&#12390;&#12356;&#12367;&#12394;&#12353;...</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-excluded-file-regexp
        <span style="color: #7FFF7F;">"/\\.#</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">[~#]$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.bak$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">/CVS/</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.doc</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.pdf</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.txt$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.html$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.tex$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.dvi$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.fdb_latexmk$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.ppt$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.xls$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.howm-menu$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">.howm-keys$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.png$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.gif$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.tif$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.tiff$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.jpg$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.jpeg$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.el$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.aux$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.log$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">Makefile</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.txt$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">EUC-UCS2</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.fdb_latexmk$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">latexmkrc</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.gpg$</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\\.org$"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">org-mode &#12398;&#26085;&#20184;&#26908;&#32034;&#29992;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-reminder-regexp-grep-format
        <span style="color: #b0b1a3;">(</span>concat <span style="color: #7FFF7F;">"&lt;"</span> howm-date-regexp-grep <span style="color: #7FFF7F;">"[ :0-9]*&gt;%s"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-reminder-regexp-format
        <span style="color: #b0b1a3;">(</span>concat <span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">&lt;"</span> howm-date-regexp <span style="color: #7FFF7F;">"[ :0-9]*&gt;</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">%s</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">[0-9]*</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">&#34920;&#31034;&#35373;&#23450;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-menu-top nil
        howm-menu-lang 'ja<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#19968;&#35239;&#12395;&#12479;&#12452;&#12488;&#12523;&#34920;&#31034;&#12375;&#12394;&#12356;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-list-title nil<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">save &#26178;&#12395;&#12513;&#12491;&#12517;&#12540;&#12434;&#26356;&#26032;&#12375;&#12394;&#12356;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-menu-refresh-after-save nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-refresh-after-save nil<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#26032;&#35215;&#12513;&#12514;&#12434;&#19978;&#12395;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-prepend t<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#20840;&#12513;&#12514;&#19968;&#35239;&#26178;&#12395;&#12479;&#12452;&#12488;&#12523;&#34920;&#31034;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-list-all-title t<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12300;&#26368;&#36817;&#12398;&#12513;&#12514;&#12301;&#19968;&#35239;&#26178;&#12395;&#12479;&#12452;&#12488;&#12523;&#34920;&#31034;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-list-recent-title t<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12300;&#26368;&#36817;&#12398;&#12513;&#12514;&#12301;&#12398;&#34920;&#31034;&#20214;&#25968;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-menu-recent-num 20<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#12513;&#12491;&#12517;&#12540;&#12434; 2 &#26178;&#38291;&#12461;&#12515;&#12483;&#12471;&#12517;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-menu-expiry-hours 2<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">RET &#12391;&#12501;&#12449;&#12452;&#12523;&#12434;&#38283;&#12367;&#38555;, &#19968;&#35239;&#12496;&#12483;&#12501;&#12449;&#12434;&#28040;&#12377;. C-u RET &#12394;&#12425;&#27531;&#12427;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-view-summary-persistent nil<span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">&#12513;&#12491;&#12517;&#12540;&#34920;&#31034;&#29992;&#12398;&#38306;&#25968;&#23450;&#32681;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#27491;&#35215;&#34920;&#29694;&#12391;&#26908;&#32034;, &#36870;&#38918;,  &#34920;&#31034;&#20214;&#25968;&#12399; =howm-menu-recent-num=, &#12392;&#12356;&#12358; ad hoc &#12394;&#38306;&#25968;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:howm-menu-search</span> <span style="color: #b0b1a3;">(</span>key <span style="color: #FFFF7F;">&amp;optional</span> formatter regexp-p<span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Embed search result of KEY into menu, reverse-order, howm-menu-recent-num"</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>fixed-p <span style="color: #b0b0b3;">(</span>not regexp-p<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>howm-menu-general <span style="color: #7FFF7F;">"menu-search"</span>
                         formatter
                         <span style="color: #aebed8;">(</span>howm-first-n
                          <span style="color: #b0b0b3;">(</span>howm-sort-items-by-reverse-date
                           <span style="color: #90a890;">(</span>howm-view-search-folder-items key <span style="color: #a2b6da;">(</span>howm-folder<span style="color: #a2b6da;">)</span> nil fixed-p<span style="color: #90a890;">)</span>
                           <span style="color: #b0b0b3;">)</span> <span style="color: #FF7FBF; font-weight: bold;">howm-menu-recent-num</span><span style="color: #aebed8; font-weight: bold;">)</span>
                         <span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-menu-allow
        <span style="color: #b0b1a3;">(</span>append '<span style="color: #97b098;">(</span>my:howm-menu-search<span style="color: #97b098;">)</span> howm-menu-allow<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">&#32232;&#38598;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12398;</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> howm-dtime-format <span style="color: #b0b1a3;">(</span>concat <span style="color: #7FFF7F;">"&lt;"</span> howm-dtime-body-format <span style="color: #7FFF7F;">"&gt;"</span><span style="color: #b0b1a3;">)</span>
        howm-insert-date-format <span style="color: #7FFF7F;">"&lt;%s&gt;"</span>
        howm-template-date-format <span style="color: #7FFF7F;">"&lt;%Y-%m-%d %a %H:%M:%S&gt;"</span>
        howm-template-file-format <span style="color: #7FFF7F;">"==&gt;%s"</span>
        howm-template <span style="color: #7FFF7F;">"* MEMO %date %cursor\n%file\n"</span>
        howm-reminder-today-format <span style="color: #b0b1a3;">(</span>format howm-insert-date-format howm-date-format<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org063216c" class="outline-2">
<h2 id="org063216c">日記: <code>tDiary</code></h2>
<div class="outline-text-2" id="text-org063216c">
<p>
tdiary-mode をちまちまと弄っている所
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>locate-library <span style="color: #7FFF7F;">"tdiary-mode"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>tdiary-mode
            <span style="color: #7FBFFF;">:fetcher</span> github
            <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"uwabami/tdiary-mode"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">tdiary-mode</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-directory-p <span style="color: #7FFF7F;">"~/Nextcloud/tdiary"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:commands</span> <span style="color: #93a8c6;">(</span>tdiary-mode tdiary-new tdiary-new-directory tdiary-replace<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>load <span style="color: #b0b1a3;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/tdiary-mode.gpg"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> tdiary-browser-function 'browser-url
        tdiary-coding-system 'utf-8-dos
        tdiary-style-mode 'rd-mode
        tdiary-hour-offset 2
        tdiary-text-save-p t
        tdiary-text-suffix <span style="color: #7FFF7F;">".rd"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge537040" class="outline-2">
<h2 id="orge537040">MoinMoin: <code>moinmoin-mode</code>, <code>moomin.el</code></h2>
<div class="outline-text-2" id="text-orge537040">
<p>
Debian Wiki や職場の Wiki を編集するための
MoinMoin の設定.
</p>
</div>
<div id="outline-container-orga90f25b" class="outline-3">
<h3 id="orga90f25b"><code>moinmoin-mode</code></h3>
<div class="outline-text-3" id="text-orga90f25b">
<p>
MoinMoin 本体の moinmoin-mode 自体は古くて
screen-lines に依存していたりするので folk して更新中.
<a href="https://github.com/uwabami/moinmoin-mode">uwabami/moinmoin-mode: Fork from EmacsForMoinMoin, for Emacs &gt;= 25</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>locate-library <span style="color: #7FFF7F;">"moinmoin-mode"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>moinmoin-mode
            <span style="color: #7FBFFF;">:fetcher</span> github
            <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"uwabami/moinmoin-mode"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">moinmoin-mode</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
そのうち気になる所を弄る，ということで．
</p>
</div>
</div>
<div id="outline-container-org19e2ce0" class="outline-3">
<h3 id="org19e2ce0"><code>moomin</code></h3>
<div class="outline-text-3" id="text-org19e2ce0">
<p>
元々は <code>moomin = emacs-request + helm + moinmoin-mode</code>
という奴. folk して ido-vertical-mode を support する様に
多少弄った版を使う。
<a href="https://github.com/uwabami/moomin-el">uwabami/moomin-el: Edit MoinMoin with Emacs</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>locate-library <span style="color: #7FFF7F;">"moomin"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>moomin
            <span style="color: #7FBFFF;">:fetcher</span> github
            <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"uwabami/moomin-el"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">moomin</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>file-directory-p my:d:password-store<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x w"</span> . ido-moomin<span style="color: #b0b1a3;">)</span>
         <span style="color: #7FBFFF;">:map</span> moinmoin-mode-map
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-c"</span> . moomin-save-current-buffer<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-s"</span> . moomin-save-current-buffer<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-o"</span> . moomin-browse-current-page<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-c C-r"</span> . moomin-reload-current-page<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> moomin-history-file
        <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">".moomin_history"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>load <span style="color: #b0b1a3;">(</span>concat my:d:password-store <span style="color: #7FFF7F;">"/moomin.gpg"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf8825e1" class="outline-2">
<h2 id="orgf8825e1">プログラム環境</h2>
<div class="outline-text-2" id="text-orgf8825e1">
</div>
<div id="outline-container-orgef0f195" class="outline-3">
<h3 id="orgef0f195">VCS: <code>magit</code></h3>
<div class="outline-text-3" id="text-orgef0f195">
<p>
magit は Emacs の Git Frontend.
結局の所 CUI でコマンド叩く事も多いけれど，これはこれで重宝している．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">magit</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x g"</span> . magit-status<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(setq magit-completing-read-function 'magit-ido-completing-read)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org53a4498" class="outline-3">
<h3 id="org53a4498">VCS: <code>ido-ghq</code></h3>
<div class="outline-text-3" id="text-org53a4498">
<p>
ghq list を ido で選んで dired で開く
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #93a8c6;">(</span>locate-library <span style="color: #7FFF7F;">"ido-ghq"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>quelpa '<span style="color: #b0b1a3;">(</span>ido-ghq
            <span style="color: #7FBFFF;">:fetcher</span> github
            <span style="color: #7FBFFF;">:repo</span> <span style="color: #7FFF7F;">"uwabami/ido-ghq"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ido-ghq</span>
  <span style="color: #7FBFFF;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"C-x f"</span> . ido-ghq-open<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ido-ghq-short-list t<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb98a563" class="outline-3">
<h3 id="orgb98a563">対応する括弧を見易く: <code>rainbow-delimiters</code></h3>
<div class="outline-text-3" id="text-orgb98a563">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">rainbow-delimiters</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'emacs-lisp-mode-hook #'rainbow-delimiters-mode<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org80a0cd9" class="outline-3">
<h3 id="org80a0cd9">設定ファイル: <code>generic-x</code></h3>
<div class="outline-text-3" id="text-org80a0cd9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">generic-x</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf50558b" class="outline-3">
<h3 id="orgf50558b">Textile</h3>
<div class="outline-text-3" id="text-orgf50558b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">textile-mode</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:diminish</span> textile-mode
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org524a4c9" class="outline-3">
<h3 id="org524a4c9">Markdown</h3>
<div class="outline-text-3" id="text-org524a4c9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">markdown-mode</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>executable-find <span style="color: #7FFF7F;">"pandoc"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"\\.</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">md</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">markdown</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">\\'"</span> . gfm-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'markdown-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>electric-indent-local-mode -1<span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>orgtbl-mode<span style="color: #97b098;">)</span>
              <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'gfm-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>electric-indent-local-mode -1<span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>orgtbl-mode<span style="color: #97b098;">)</span>
              <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> markdown-command
        <span style="color: #7FFF7F;">"pandoc --from markdown_github -t html5 --mathjax --highlight-style pygments"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2934785" class="outline-3">
<h3 id="org2934785">SCSS</h3>
<div class="outline-text-3" id="text-org2934785">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">scss-mode</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span>executable-find <span style="color: #7FFF7F;">"sass"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #7FFF7F;">"\\.scss\\'"</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> scss-sass-command <span style="color: #b0b1a3;">(</span>executable-find <span style="color: #7FFF7F;">"sass"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc73f534" class="outline-3">
<h3 id="orgc73f534">rainbow-mode</h3>
<div class="outline-text-3" id="text-orgc73f534">
<p>
<code>#RRGGBB</code> のカラーコードに勝手に色が付く．CSS の編集中なんかで地味に便利．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">rainbow-mode</span>
  <span style="color: #7FBFFF;">:diminish</span> rainbow-mode
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org423a5fe" class="outline-3">
<h3 id="org423a5fe">YAML</h3>
<div class="outline-text-3" id="text-org423a5fe">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">yaml-mode</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">\.yml</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">|</span><span style="color: #7FFF7F;">\.yaml</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2624c9f" class="outline-3">
<h3 id="org2624c9f">Ruby</h3>
<div class="outline-text-3" id="text-org2624c9f">
<p>
素の <code>ruby-mode</code>. <code>Gemfile</code> も ruby-mode で扱う
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ruby-mode</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #7FFF7F;">"\\.rb\\'"</span>
  <span style="color: #7FBFFF;">:interpreter</span> <span style="color: #7FFF7F;">"ruby"</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'auto-mode-alist '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"Gemfile$"</span> . ruby-mode<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>ruby-electric</code>: 括弧や <code>do ... end</code> の補完
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">ruby-electric</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'ruby-mode-hook <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>ruby-electric-mode t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ruby-electric-expand-delimiters-list nil<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>ruby-block</code>: <code>do...end</code> の対応をハイライト
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(use-package ruby-block</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">:diminish ruby-block-mode</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">:config</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">(ruby-block-mode t)</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">(setq ruby-block-highlight-toggle 'overlay)</span>
<span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">)</span>
</pre>
</div>
<p>
<code>rspec-mode</code>:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">rspec-mode</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> rspec-use-rake-flag nil<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>rabbit-mode</code>: <a href="http://rabbit-shocker.org/ja/">Rabbit</a> 編集用
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">rabbit-mode</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #7FFF7F;">"\\.rab$"</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>rdoc-mode</code>: 本体の方はどうも動かないなぁ&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">rdoc-header-1</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-1<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"rdoc mode header level 1"</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">rdoc-header-2</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-2<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"rdoc mode header level 2"</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">rdoc-header-3</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-3<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"rdoc mode header level 3"</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defface</span> <span style="color: #7F7FFF;">rdoc-header-4</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>t <span style="color: #97b098;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-4<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"rdoc mode header level 4"</span><span style="color: #8a8a8a;">)</span>

<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">define-generic-mode</span> '<span style="color: #BF7FFF;">rdoc-mode</span>
  <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>                    <span style="color: #a5a5a6;">;</span><span style="color: #a5a5a6;">comment-list</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>                   <span style="color: #a5a5a6;">;</span><span style="color: #a5a5a6;">keyword-list</span>
  '<span style="color: #93a8c6;">(</span>                    <span style="color: #a5a5a6;">;</span><span style="color: #a5a5a6;">font-lock-list</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"^=[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">=].*"</span>                                             . 'rdoc-header-1<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"^==[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">=].*"</span>                                            . 'rdoc-header-2<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"^===[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">=].*"</span>                                           . 'rdoc-header-3<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"^====[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">=].*"</span>                                          . 'rdoc-header-4<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"^[\\*#]\\{1,9\\} "</span>                                    . 'bold<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(?:</span><span style="color: #7FFF7F;">[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">a-zA-Z0-9]</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">?\\*[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">*]+\\*</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(?:</span><span style="color: #7FFF7F;">[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">a-zA-Z0-9]</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span> . 'bold<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(?:</span><span style="color: #7FFF7F;">[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">a-zA-Z0-9]</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">?\\_[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">_]+\\_</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(?:</span><span style="color: #7FFF7F;">[</span><span style="color: #7FFFFF; font-weight: bold;">^</span><span style="color: #7FFF7F;">a-zA-Z0-9]</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">"</span> . 'italic<span style="color: #b0b1a3;">)</span>
    <span style="color: #93a8c6;">)</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"README_FOR_APP"</span> <span style="color: #7FFF7F;">"\\.rdoc$"</span><span style="color: #93a8c6;">)</span>    <span style="color: #a5a5a6;">;</span><span style="color: #a5a5a6;">auto-mode-list</span>
  '<span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span> <span style="color: #97b098;">(</span>auto-fill-mode t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span> <span style="color: #a5a5a6;">;</span><span style="color: #a5a5a6;">function-list</span>
  <span style="color: #7FFF7F;">"Major mode for editing RDOC files."</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
<code>rd-mode</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">rd-mode</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #7FFF7F;">"\\.rd$"</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'rd-mode-hook
            'rd-show-other-block-all<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdbc034c" class="outline-3">
<h3 id="orgdbc034c">C</h3>
<div class="outline-text-3" id="text-orgdbc034c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">cc-mode</span>
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>c-add-style <span style="color: #7FFF7F;">"my:bsd-like"</span>
               '<span style="color: #b0b1a3;">(</span><span style="color: #7FFF7F;">"bsd"</span>
                 <span style="color: #97b098;">(</span>c-basic-offset . 2<span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span>c-hanging-braces-alist . <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>inline-open       before after<span style="color: #b0b0b3;">)</span>
                                            <span style="color: #b0b0b3;">(</span>block-open        before after<span style="color: #b0b0b3;">)</span>
                                            <span style="color: #b0b0b3;">(</span>substatement-open before after<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
                 <span style="color: #97b098;">(</span>c-offsets-alist . <span style="color: #aebed8;">(</span><span style="color: #b0b0b3;">(</span>brace-list-entry . +<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
                 <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq-default</span> c-default-style <span style="color: #7FFF7F;">"my:bsd-like"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'c-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>c-set-style <span style="color: #7FFF7F;">"my:bsd-like"</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>electric-indent-local-mode -1<span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>set <span style="color: #aebed8;">(</span>make-local-variable 'eldoc-idle-delay<span style="color: #aebed8;">)</span> 0.20<span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>c-turn-on-eldoc-mode<span style="color: #97b098;">)</span>
              <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org507e517" class="outline-3">
<h3 id="org507e517">Fortran</h3>
<div class="outline-text-3" id="text-org507e517">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">f90</span>
  <span style="color: #7FBFFF;">:mode</span> <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"\\.</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">f|F</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">(</span><span style="color: #7FFF7F;">90|95|03|08</span><span style="color: #A5EE4C; font-weight: bold;">\\</span><span style="color: #7F7FFF; font-weight: bold;">)</span><span style="color: #7FFF7F;">$"</span> . f90-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'f90-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #97b098;">(</span><span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">setq</span> f90-do-indent 2
                    f90-if-indent 2
                    f90-type-indent 2
                    f90-program-indent 2
                    f90-continuation-indent 2
                    f90-directive-comment-re <span style="color: #7FFF7F;">"!omp\\$"</span>
                    f90-indented-comment-re <span style="color: #7FFF7F;">"!"</span>
                    f90-break-delimiters <span style="color: #7FFF7F;">"[-+\\*/&gt;&lt;=,% \t]"</span>
                    f90-break-before-delimiters t
                    f90-beginning-ampersand nil
                    f90-smart-end 'blink
                    f90-auto-keyword-case nil
                    f90-leave-line-no nil
                    f90-comment-region <span style="color: #7FFF7F;">"!! "</span>
                    f90-indent-comment <span style="color: #7FFF7F;">"! "</span>
                    indent-tabs-mode nil
                    f90-font-lock-keywords f90-font-lock-keywords-2<span style="color: #97b098;">)</span>
              <span style="color: #97b098;">(</span>ggtags-mode 1<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org85ed76a" class="outline-3">
<h3 id="org85ed76a">AUCTeX</h3>
<div class="outline-text-3" id="text-org85ed76a">
<p>
Debian パッケージ版を使う．やっている事は
</p>
<ul class="org-ul">
<li><code>japanese-latex-mode</code> において, 幾つかのコマンドが追加/上書きされているが，
あまり使うことの無いコマンドが表示されるのが嫌なのでそれらを削除．</li>
<li><p>
コンパイルには <code>latexmk</code> を使う，です．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">tex-jp</span>
  <span style="color: #7FBFFF;">:if</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #b0b1a3;">(</span>executable-find <span style="color: #7FFF7F;">"uplatex"</span><span style="color: #b0b1a3;">)</span>
           <span style="color: #b0b1a3;">(</span>my:dpkg-status <span style="color: #7FFF7F;">"auctex"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:defer</span> t
  <span style="color: #7FBFFF;">:init</span> <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">progn</span>
          <span style="color: #b0b1a3;">(</span>add-hook 'LaTeX-mode-hook #'TeX-source-correlate-mode<span style="color: #b0b1a3;">)</span>
          <span style="color: #b0b1a3;">(</span>add-hook 'LaTeX-mode-hook #'TeX-PDF-mode<span style="color: #b0b1a3;">)</span>
          <span style="color: #b0b1a3;">(</span>add-hook 'LaTeX-mode-hook #'turn-on-reftex<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'LaTeX-mode-hook
            <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">function</span>
             <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #aebed8;">(</span><span style="color: #aebed8;">)</span>
               <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">dolist</span> <span style="color: #b0b0b3;">(</span>command '<span style="color: #90a890;">(</span><span style="color: #7FFF7F;">"pTeX"</span> <span style="color: #7FFF7F;">"LaTeX"</span> <span style="color: #7FFF7F;">"pLaTeX"</span> <span style="color: #7FFF7F;">"pBibTeX"</span> <span style="color: #7FFF7F;">"jTeX"</span> <span style="color: #7FFF7F;">"jLaTeX"</span> <span style="color: #7FFF7F;">"jBibTeX"</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
                 <span style="color: #b0b0b3;">(</span>delq <span style="color: #90a890;">(</span>assoc command TeX-command-list<span style="color: #90a890;">)</span> TeX-command-list<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
               <span style="color: #aebed8;">(</span><span style="color: #FF7F7F;">setq</span> TeX-command-default <span style="color: #7FFF7F;">"LaTeX"</span>
                     japanese-LaTeX-command-default <span style="color: #7FFF7F;">"LaTeX"</span>
                     TeX-PDF-mode t
                     TeX-command-output-list '<span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span><span style="color: #7FFF7F;">"LaTeX"</span> <span style="color: #a2b6da;">(</span><span style="color: #7FFF7F;">"pdf"</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
                     <span style="color: #aebed8;">)</span>
               <span style="color: #aebed8;">(</span>add-to-list 'TeX-expand-list
                            '<span style="color: #b0b0b3;">(</span><span style="color: #7FFF7F;">"%(LATEXENC)"</span>
                              <span style="color: #90a890;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #a2b6da;">(</span><span style="color: #a2b6da;">)</span>
                                <span style="color: #a2b6da;">(</span><span style="color: #FF7F7F;">let</span> <span style="color: #9cb6ad;">(</span><span style="color: #8a8a8a;">(</span>str <span style="color: #93a8c6;">(</span>japanese-TeX-get-encoding-string<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span>
                                  <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">if</span> str <span style="color: #8a8a8a;">(</span>format <span style="color: #7FFF7F;">"%s"</span> str<span style="color: #8a8a8a;">)</span> <span style="color: #7FFF7F;">""</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
               <span style="color: #aebed8;">(</span>add-to-list 'TeX-command-list
                            '<span style="color: #b0b0b3;">(</span><span style="color: #7FFF7F;">"LaTeX"</span>
                              <span style="color: #7FFF7F;">"LATEXENC=%(LATEXENC) latexmk -gg %t"</span>
                              TeX-run-TeX nil <span style="color: #90a890;">(</span>latex-mode<span style="color: #90a890;">)</span> <span style="color: #7FBFFF;">:help</span> <span style="color: #7FFF7F;">"Run Latexmk"</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> TeX-source-correlate-method 'synctex
        TeX-source-correlate-start-server t
        TeX-view-program-selection '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>output-dvi <span style="color: #7FFF7F;">"xdvi"</span><span style="color: #97b098;">)</span>
                                     <span style="color: #97b098;">(</span>output-pdf <span style="color: #7FFF7F;">"Evince"</span><span style="color: #97b098;">)</span>
                                     <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(output-pdf "Okular")</span>
                                     <span style="color: #97b098;">(</span>output-html <span style="color: #7FFF7F;">"xdg-open"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        TeX-auto-save t
        TeX-auto-local  <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #7FFF7F;">"auctex/auto"</span> my:d:tmp<span style="color: #b0b1a3;">)</span>
        TeX-style-local <span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #7FFF7F;">"auctex/style"</span> my:d:tmp<span style="color: #b0b1a3;">)</span>
        TeX-parse-self t
        TeX-auto-untabify t
        font-latex-fontify-script nil
        font-latex-fontify-sectioning 1.0
        font-latex-script-display nil
        reftex-plug-into-AUCTeX t
        <span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div></li>
</ul>
<p>
<code>~/.latexmkrc</code> の設定は以下の通り．
</p>
<div class="org-src-container">
<pre class="src src-perl">      <span style="color: #a5a5a6;">#!/usr/bin/env perl</span>
      $<span style="color: #7F7FFF;">kanji</span>  = defined $<span style="color: #7F7FFF;">ENV</span>{<span style="color: #7FFF7F;">"LATEXENC"</span>} ? <span style="color: #7FFF7F;">"-kanji=$ENV{\"LATEXENC\"}"</span> : <span style="color: #7FFF7F;">"-kanjii=utf8"</span> ;
      $<span style="color: #7F7FFF;">latex</span>  = <span style="color: #7FFF7F;">"platex -interaction=nonstopmode -src-specials -shell-escape --synctex=1 $kanji"</span>;
      $<span style="color: #7F7FFF;">latex_silent</span> = <span style="color: #7FFF7F;">"platex -interaction=batchmode -src-specials -shell-escape --synctex=1 $kanji"</span>;
      $<span style="color: #7F7FFF;">bibtex</span> = <span style="color: #7FFF7F;">"pbibtex $kanji"</span>;
      $<span style="color: #7F7FFF;">makeindex</span> = <span style="color: #7FFF7F;">"touch -m %D"</span>;
      $<span style="color: #7F7FFF;">dvipdf</span> = <span style="color: #7FFF7F;">"dvipdfmx %O -o %D %S"</span>;
      $<span style="color: #7F7FFF;">dvips</span> = <span style="color: #7FFF7F;">'dvips %O -z -f %S | convbkmk -u &gt; %D'</span>;
      $<span style="color: #7F7FFF;">ps2pdf</span> = <span style="color: #7FFF7F;">'ps2pdfwr %O %S %D'</span>;
      $<span style="color: #7F7FFF;">pdf_mode</span> = 3;
      $<span style="color: #7F7FFF;">pdf_previewer</span> = <span style="color: #7FFF7F;">'start xdg-open'</span>;
      $<span style="color: #7F7FFF;">pdf_update_method</span> = 0;
      $<span style="color: #7F7FFF;">clean_ext</span> = <span style="color: #7FFF7F;">"snm nav vrb synctex.gz"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgee12fc9" class="outline-3">
<h3 id="orgee12fc9">AUCTeX と Zotero との連携</h3>
<div class="outline-text-3" id="text-orgee12fc9">
<p>
イマイチ使いこなせてないけれど．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">zotelo</span>
  <span style="color: #7FBFFF;">:ensure</span> t
  <span style="color: #7FBFFF;">:disabled</span> t
  <span style="color: #7FBFFF;">:init</span>
  <span style="color: #93a8c6;">(</span>add-hook 'LaTeX-mode-hook 'zotelo-minor-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-hook 'TeX-mode-hook   'zotelo-minor-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> zotelo-translator-charsets '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>BibTeX . <span style="color: #7FFF7F;">"Unicode"</span><span style="color: #97b098;">)</span>
                                     <span style="color: #97b098;">(</span>Default . <span style="color: #7FFF7F;">"Unicode"</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
        zotelo-use-journal-abbreviation t<span style="color: #93a8c6;">)</span>
<span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9fcfe2c" class="outline-3">
<h3 id="org9fcfe2c">補完: <code>auto-complete</code></h3>
<div class="outline-text-3" id="text-org9fcfe2c">
<p>
ちょいちょい上手く動かなかったりするんだけれど、どうしたモンかな.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">auto-complete-config</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span>ac-flyspell-workaround<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>ac-set-trigger-key <span style="color: #7FFF7F;">"M-TAB"</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>ac-config-default<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'ac-dictionary-directories <span style="color: #b0b1a3;">(</span>concat my:d:share <span style="color: #7FFF7F;">"ac-dict"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> ac-comphist-file <span style="color: #b0b1a3;">(</span>concat my:d:tmp <span style="color: #7FFF7F;">"ac-comphist.dat"</span><span style="color: #b0b1a3;">)</span>
        ac-auto-start 4                          <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">4 &#25991;&#23383;&#20197;&#19978;&#12391;&#36215;&#21205;</span>
        ac-use-menu-map t                        <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#12461;&#12540;&#12496;&#12452;&#12531;&#12489;</span>
        ac-auto-show-menu 1                      <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">1&#31186;&#12391;&#12513;&#12491;&#12517;&#12540;&#34920;&#31034;</span>
        ac-use-comphist t                        <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#35036;&#23436;&#20505;&#35036;&#12434;&#12477;&#12540;&#12488;</span>
        ac-candidate-limit nil                   <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">&#35036;&#23436;&#20505;&#35036;&#34920;&#31034;&#12434;&#28961;&#21046;&#38480;&#12395;</span>
        ac-use-quick-help nil<span style="color: #93a8c6;">)</span>                   <span style="color: #a5a5a6;">; </span><span style="color: #a5a5a6;">tool tip &#28961;&#12375;</span>
  <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">(dolist (mode</span>
  <span style="color: #a5a5a6;">;;          </span><span style="color: #a5a5a6;">'(</span>
  <span style="color: #a5a5a6;">;;            </span><span style="color: #a5a5a6;">))</span>
  <span style="color: #a5a5a6;">;;  </span><span style="color: #a5a5a6;">(add-to-list 'ac-modes mode))</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org429fe53" class="outline-2">
<h2 id="org429fe53">基本的なキーバインドの設定</h2>
<div class="outline-text-2" id="text-org429fe53">
<p>
既に手癖になってしまっているアレコレ．
特に <code>[home]</code> と <code>[end]</code> は無いと途方に暮れます．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">bind-keys*</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"&lt;f2&gt;"</span>    . eww<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-h"</span>     . backward-delete-char<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c M-a"</span> . align-regexp<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c ;"</span>   . comment-region<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c M-;"</span> . uncomment-region<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-/"</span>     . undo<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-x M-b"</span> . ibuffer-other-window<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c M-r"</span> . replace-regexp<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c r"</span>   . replace-string<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"&lt;home&gt;"</span>  . beginning-of-buffer<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"&lt;end&gt;"</span>   . end-of-buffer<span style="color: #93a8c6;">)</span>
 <span style="color: #93a8c6;">(</span><span style="color: #7FFF7F;">"C-c C-j"</span> . browse-url-at-point<span style="color: #93a8c6;">)</span>
 <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6c61839" class="outline-2">
<h2 id="org6c61839"><code>diminish</code>: モードラインの短縮表示</h2>
<div class="outline-text-2" id="text-org6c61839">
<p>
<code>use-package</code> で読み込まれているので，可能な限りそちらで指定するように変更．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">diminish</span> <span style="color: #7FBFFF;">:ensure</span> t<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defmacro</span> <span style="color: #BF7FFF;">my:diminish</span> <span style="color: #93a8c6;">(</span>file mode <span style="color: #FFFF7F;">&amp;optional</span> new-name<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"original: https://github.com/larstvei/dot-emacs/blob/master/init.org"</span>
  `<span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">with-eval-after-load</span> ,file
     <span style="color: #b0b1a3;">(</span>diminish ,mode ,new-name<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">my:diminish</span> <span style="color: #7FFF7F;">"isearch"</span> 'isearch-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">my:diminish</span> <span style="color: #7FFF7F;">""</span>        'develock-mode<span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> auto-revert-mode-text <span style="color: #7FFF7F;">""</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
メジャーモードは <code>hook</code> で設定.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-hook 'emacs-lisp-mode-hook '<span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mode-name <span style="color: #7FFF7F;">""</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'lisp-interaction-mode-hook '<span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mode-name <span style="color: #7FFF7F;">""</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'wl-folder-mode-hook  '<span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mode-name <span style="color: #7FFF7F;">""</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'wl-summary-mode-hook '<span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mode-name <span style="color: #7FFF7F;">""</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'wl-draft-mode-hook   '<span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mode-name <span style="color: #7FFF7F;">""</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>add-hook 'mime-view-mode-hook  '<span style="color: #93a8c6;">(</span>lambda <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span> <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> mode-name <span style="color: #7FFF7F;">""</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org035bcc6" class="outline-2">
<h2 id="org035bcc6">フォントと色</h2>
<div class="outline-text-2" id="text-org035bcc6">
<p>
そろそろテーマにした方が良い，とは思ってはいる．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:load-window-config</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"load window-system specific settings"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">when</span> window-system
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">progn</span>
      <span style="color: #97b098;">(</span>set-face-attribute 'default nil
                          <span style="color: #7FBFFF;">:family</span> <span style="color: #7FFF7F;">"Cica"</span>
                          <span style="color: #7FBFFF;">:height</span> 135<span style="color: #97b098;">)</span> <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">135pt</span>
      <span style="color: #97b098;">(</span>set-background-color <span style="color: #7FFF7F;">"#242424"</span><span style="color: #97b098;">)</span>
      <span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> frame-background-mode <span style="color: #93a8c6;">(</span>frame-parameter nil 'background-mode<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">setq</span> default-frame-alist
      '<span style="color: #93a8c6;">(</span>
        <span style="color: #b0b1a3;">(</span>foreground-color . <span style="color: #7FFF7F;">"#F6F3E8"</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span>scroll-bar-foreground-color . <span style="color: #7FFF7F;">"red"</span><span style="color: #b0b1a3;">)</span>
        <span style="color: #b0b1a3;">(</span>vertical-scroll-bars . right<span style="color: #b0b1a3;">)</span>
        <span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #93a8c6;">(</span>window-system<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>my:load-window-config<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
現在修正中．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>custom-set-faces
 '<span style="color: #93a8c6;">(</span>default                             <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>cursor                              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFF4C"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#4CFF4C"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">basic</span>
 '<span style="color: #93a8c6;">(</span>font-lock-builtin-face              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FBFFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-comment-delimiter-face    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#a5a5a6"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-comment-face              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#a5a5a6"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-constant-face             <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFBF7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-doc-face                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFF7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-doc-string-face           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFF7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-function-name-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#BF7FFF"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-keyword-face              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF7F7F"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-link-face                 <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFFFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-negation-char-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFFFF"</span> <span style="color: #7FBFFF;">:bold</span> t   <span style="color: #7FBFFF;">:italic</span> nil<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-preprocessor-face         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF4C4C"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #7FBFFF;">:italic</span> nil<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-regexp-grouping-backslash <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#A5EE4C"</span> <span style="color: #7FBFFF;">:bold</span> t   <span style="color: #7FBFFF;">:italic</span> nil<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-regexp-grouping-construct <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7F7FFF"</span> <span style="color: #7FBFFF;">:bold</span> t   <span style="color: #7FBFFF;">:italic</span> nil<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-string-face               <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFF7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-type-face                 <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFF7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-variable-name-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7F7FFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-lock-warning-face              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF7FBF"</span> <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>mode-line                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#222244"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>mode-line-inactive                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#666666"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#999999"</span> <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>fringe                              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#666666"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#282828"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(hl-line                             ((t (:inherit highlight :underline t ))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(highlight                           ((t (:background "#333333" ))))</span>
 '<span style="color: #93a8c6;">(</span>minibuffer-prompt                   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#BF7FFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>region                              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#222244"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">dired</span>
 '<span style="color: #93a8c6;">(</span>dired-directory                     <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7F7FFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>dired-flagged                       <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> error <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(dired-header</span>
 '<span style="color: #93a8c6;">(</span>dired-ignored                       <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> shadow <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(dired-mark</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(dired-marked</span>
 '<span style="color: #93a8c6;">(</span>dired-perm-write                    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFF7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>dired-symlink                       <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFFFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>dired-warning                       <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-warning-face <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">helm</span>
 '<span style="color: #93a8c6;">(</span>helm-source-header                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#224488"</span> <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-visible-mark                   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> highlight <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-selection                      <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> highlight <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-selection-line                 <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> highlight <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-directory                   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> dired-directory <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-bookmark-directory             <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-directory <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-buffer-directory               <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-directory <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-dotted-directory            <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-directory <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-file                        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-bookmark-file                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-file <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-buffer-file                    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-file <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-grep-file                      <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-file <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-etags-file                     <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-file <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-executable                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-file <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFF7F"</span> <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-symlink                     <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7FFFFF"</span> <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-dotted-symlink-directory    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> helm-ff-symlink <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>helm-ff-invalid-symlink             <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF7F7F"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">ido</span>
 '<span style="color: #93a8c6;">(</span>ido-first-match                     <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:underline</span> t <span style="color: #7FBFFF;">:weight</span> bold<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>ido-only-match                      <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFF4C"</span> <span style="color: #7FBFFF;">:overline</span> nil <span style="color: #7FBFFF;">:weight</span> bold<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>ido-subdir                          <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> dired-directory<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(ido-vertical-first-match-face       ((t (:inherit ido-first-match))))</span>
 <span style="color: #a5a5a6;">;;</span><span style="color: #a5a5a6;">'(ido-vertical-match-face             ((t (:foreground "#4CFF4C"))))</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(ido-grid-mode-match ((t (:inherit ido-first-match ))))</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">powerline</span>
 '<span style="color: #93a8c6;">(</span>powerline-active1                   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#000000"</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>powerline-active2                   <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#666666"</span> <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>powerline-inactive1                 <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> modeline-inactive<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>powerline-inactive2                 <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> modeline-inactive<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">preview-latex</span>
 '<span style="color: #93a8c6;">(</span>font-latex-sectioning-0-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-latex-sectioning-1-face<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-sectioning-1-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-latex-sectioning-2-face<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-sectioning-2-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-latex-sectioning-3-face<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-sectioning-3-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-latex-sectioning-4-face<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-sectioning-4-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-latex-sectioning-5-face <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-sectioning-5-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-type-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-slide-title-face         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-type-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-subscript-face           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-superscript-face         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t nil<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-math-face                <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-constant-face <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-script-char-face         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-preprocessor-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>font-latex-verbatim-face            <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-doc-string-face <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">elscreen</span>
 '<span style="color: #93a8c6;">(</span>elscreen-tab-control-face           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#222244"</span> <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#f6f3e8"</span> <span style="color: #7FBFFF;">:underline</span> t <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>elscreen-tab-current-screen-face    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#222244"</span> <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#f6f3e8"</span> <span style="color: #7FBFFF;">:underline</span> t <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>elscreen-tab-other-screen-face      <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#222244"</span> <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#aaaaaa"</span> <span style="color: #7FBFFF;">:underline</span> t <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>elscreen-tab-background-face        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#222244"</span> <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#aaaaaa"</span> <span style="color: #7FBFFF;">:underline</span> t <span style="color: #7FBFFF;">:bold</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">git-gutter</span>
 '<span style="color: #93a8c6;">(</span>git-gutter:added                    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFF4C"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#666666"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>git-gutter:deleted                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF7FBF"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#666666"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>git-gutter:modified                 <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFF4C"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#666666"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>git-gutter:unchanged                <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#666666"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>git-gutter:separator-face           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> default <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF4C4C"</span> <span style="color: #7FBFFF;">:background</span> <span style="color: #7FFF7F;">"#666666"</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #a5a5a6;">;;; </span><span style="color: #a5a5a6;">howm</span>
 '<span style="color: #93a8c6;">(</span>howm-mode-keyword-face              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#7F7FFF"</span> <span style="color: #7FBFFF;">:background</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>howm-mode-title-face                <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4CFFFF"</span> <span style="color: #7FBFFF;">:background</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>howm-reminder-deadline-face         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF4C4C"</span> <span style="color: #7FBFFF;">:background</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>howm-reminder-late-deadline-face    <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:underline</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF0000"</span> <span style="color: #7FBFFF;">:background</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>howm-reminder-today-face            <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFBF7F"</span> <span style="color: #7FBFFF;">:background</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>howm-reminder-tomorrow-face         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:bold</span> t <span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF7FBF"</span> <span style="color: #7FBFFF;">:background</span> nil <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">outline</span>
 '<span style="color: #93a8c6;">(</span>outline-1                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-function-name-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-2                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-string-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-3                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-keyword-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-4                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-type-face <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-5                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-constant-face <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-6                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-variable-name-face <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-7                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-builtin-face <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>outline-8                           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-comment-face <span style="color: #7FBFFF;">:bold</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">org</span>
 '<span style="color: #93a8c6;">(</span>org-agenda-date-today               <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:underline</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>org-agenda-date                     <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FFFFFF"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>org-agenda-date-weekend             <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#FF7F7F"</span> <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>org-agenda-calendar-event           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#F6F3E8"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>org-hide                            <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:foreground</span> <span style="color: #7FFF7F;">"#4C4C4C"</span> <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #a5a5a6;">;;</span>
 <span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">moinmoin</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-h1                         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-1<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-h2                         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-2<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-h3                         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-3<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-h4                         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-4<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-h5                         <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> outline-5<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-url                        <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-link-face<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-url-title                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> moinmoin-url <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-anchor-ref-id              <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> moinmoin-url <span style="color: #7FBFFF;">:underline</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-anchor-ref-title           <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> moinmoin-url <span style="color: #7FBFFF;">:bold</span> t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-wiki-link                  <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> moinmoin-url <span style="color: #7FBFFF;">:underline</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-inter-wiki-link            <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> moinmoin-url <span style="color: #7FBFFF;">:underline</span> t <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-item                       <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-doc-face <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 '<span style="color: #93a8c6;">(</span>moinmoin-item-2                     <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>t <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:inherit</span> font-lock-doc-face <span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
 <span style="color: #8a8a8a;">)</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">review</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(review-mode-header1-face  ((t (:inherit outline-1))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(review-mode-header2-face  ((t (:inherit outline-2))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(review-mode-header3-face  ((t (:inherit outline-3))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(review-mode-header4-face  ((t (:inherit outline-4))))</span>
<span style="color: #a5a5a6;">;; </span><span style="color: #a5a5a6;">'(review-mode-header5-face  ((t (:inherit outline-5))))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf83f40f" class="outline-2">
<h2 id="orgf83f40f"><code>powerline</code>: モードラインを綺麗に</h2>
<div class="outline-text-2" id="text-orgf83f40f">
</div>
<div id="outline-container-orge4c002a" class="outline-3">
<h3 id="orge4c002a">ddskk の表示のカスタマイズ</h3>
<div class="outline-text-3" id="text-orge4c002a">
<p>
SKK の状態がヒョコヒョコ動くのが嫌なので，
<code>skk-modeline-input-mode</code> に常に現在の状況を表示する様にしておく．
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:skk-modeline-input-mode</span> <span style="color: #93a8c6;">(</span><span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"skk &#12364;&#35501;&#12415;&#36796;&#12414;&#12428;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#12391;&#12418; skk-modeline-input-mode &#12395;&#25991;&#23383;&#12434;&#20837;&#12428;&#12390;&#36820;&#12377;"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">unless</span> <span style="color: #b0b1a3;">(</span>boundp 'skk-modeline-inpt-mode<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq</span> skk-modeline-input-mode <span style="color: #7FFF7F;">"--[--]:"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
<span style="color: #8a8a8a;">(</span>my:skk-modeline-input-mode<span style="color: #8a8a8a;">)</span>
</pre>
</div>
<p>
ddskk そのものに modeline を更新する関数があるので無効化する
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">defadvice</span> <span style="color: #BF7FFF;">skk-setup-modeline</span> <span style="color: #93a8c6;">(</span>around my:disable-skk-setup-modeline activate<span style="color: #93a8c6;">)</span>
  <span style="color: #7FFF7F;">"skk-setup-modeline &#12395;&#12424;&#12427; modeline &#12398;&#26356;&#26032;&#12434;&#28961;&#21177;&#21270;"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> skk-indicator-alist <span style="color: #b0b1a3;">(</span>skk-make-indicator-alist<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>force-mode-line-update t<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8e6b879" class="outline-3">
<h3 id="org8e6b879">powerline 本体の設定．</h3>
<div class="outline-text-3" id="text-org8e6b879">
<p>
default-theme をベースに見たい物だけ表示するようにしてみた．
変更点として,
</p>
<ul class="org-ul">
<li>separater は環境によってズレるので，半角スペースに変更</li>
<li>vc-mode でのアイコン表示に U+26A1⚡ High Voltage を使う</li>
</ul>
<p>
といった事をしている. East Asian ambiguous Width char の扱いは面倒ですね
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span><span style="color: #FF7F7F;">use-package</span> <span style="color: #FFBF7F;">powerline</span>
  <span style="color: #7FBFFF;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">setq</span> powerline-default-separator 'utf-8
        powerline-utf-8-separator-left  #x20
        powerline-utf-8-separator-right #x20
        <span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defpowerline</span> my:powerline-vc
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">when</span> <span style="color: #97b098;">(</span><span style="color: #FF7F7F;">and</span> <span style="color: #aebed8;">(</span>buffer-file-name <span style="color: #b0b0b3;">(</span>current-buffer<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span> vc-mode<span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>format <span style="color: #7FFF7F;">"%s%s"</span>
              <span style="color: #aebed8;">(</span>char-to-string #x26a1<span style="color: #aebed8;">)</span>
              <span style="color: #aebed8;">(</span>format-mode-line '<span style="color: #b0b0b3;">(</span>vc-mode vc-mode<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">defun</span> <span style="color: #BF7FFF;">my:powerline-theme</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #7FFF7F;">"Setup customize theme."</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">interactive</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #FF7F7F;">setq-default</span>
     mode-line-format
     '<span style="color: #97b098;">(</span><span style="color: #7FFF7F;">"%e"</span>
       <span style="color: #aebed8;">(</span><span style="color: #7FBFFF;">:eval</span>
        <span style="color: #b0b0b3;">(</span><span style="color: #FF7F7F;">let*</span> <span style="color: #90a890;">(</span><span style="color: #a2b6da;">(</span>active <span style="color: #9cb6ad;">(</span>powerline-selected-window-active<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>mode-line-buffer-id <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">if</span> active 'mode-line-buffer-id 'mode-line-buffer-id-inactive<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>mode-line <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">if</span> active 'mode-line 'mode-line-inactive<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>face1 <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">if</span> active 'powerline-active1 'powerline-inactive1<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>face2 <span style="color: #9cb6ad;">(</span><span style="color: #FF7F7F;">if</span> active 'powerline-active2 'powerline-inactive2<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>separator-left <span style="color: #9cb6ad;">(</span>intern <span style="color: #8a8a8a;">(</span>format <span style="color: #7FFF7F;">"powerline-%s-%s"</span>
                                               <span style="color: #93a8c6;">(</span>powerline-current-separator<span style="color: #93a8c6;">)</span>
                                               <span style="color: #93a8c6;">(</span>car powerline-default-separator-dir<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>separator-right <span style="color: #9cb6ad;">(</span>intern <span style="color: #8a8a8a;">(</span>format <span style="color: #7FFF7F;">"powerline-%s-%s"</span>
                                                <span style="color: #93a8c6;">(</span>powerline-current-separator<span style="color: #93a8c6;">)</span>
                                                <span style="color: #93a8c6;">(</span>cdr powerline-default-separator-dir<span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span><span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>lhs <span style="color: #9cb6ad;">(</span>list
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #93a8c6;">(</span>substring skk-modeline-input-mode 2 -1<span style="color: #93a8c6;">)</span> nil 'l<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw mode-line-mule-info mode-line 'l<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #7FFF7F;">"%*"</span> mode-line 'l<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-buffer-id mode-line-buffer-id 'l<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #7FFF7F;">" "</span><span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>funcall separator-left mode-line face1<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-major-mode face1 'l<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-process face1<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-narrow face1 'l<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #7FFF7F;">" "</span> face1<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>funcall separator-left face1 face2<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>my:powerline-vc face2 'r<span style="color: #8a8a8a;">)</span>
                     <span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #a2b6da;">(</span>rhs <span style="color: #9cb6ad;">(</span>list
                     <span style="color: #8a8a8a;">(</span>powerline-raw global-mode-string face2 'r<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>funcall separator-right face2 face1<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #7FFF7F;">" "</span> face1<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-minor-modes face1 'r<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>funcall separator-right face1 mode-line<span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #7FFF7F;">"  "</span><span style="color: #8a8a8a;">)</span>
                     <span style="color: #8a8a8a;">(</span>powerline-raw <span style="color: #7FFF7F;">"%6p"</span> mode-line 'r<span style="color: #8a8a8a;">)</span>
                     <span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
               <span style="color: #90a890;">)</span>
          <span style="color: #90a890;">(</span>concat <span style="color: #a2b6da;">(</span>powerline-render lhs<span style="color: #a2b6da;">)</span>
                  <span style="color: #a2b6da;">(</span>powerline-fill face2 <span style="color: #9cb6ad;">(</span>powerline-width rhs<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
                  <span style="color: #a2b6da;">(</span>powerline-render rhs<span style="color: #a2b6da;">)</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>my:powerline-theme<span style="color: #93a8c6;">)</span>
  <span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc441e9b" class="outline-2">
<h2 id="orgc441e9b">起動時間の計測</h2>
<div class="outline-text-2" id="text-orgc441e9b">
<p>
<a href="http://memo.sugyan.com/entry/20120120/1327037494">起動時間を計測する 改訂版 - すぎゃーんメモ</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #8a8a8a;">(</span>add-hook 'after-init-hook
          <span style="color: #93a8c6;">(</span><span style="color: #FF7F7F;">lambda</span> <span style="color: #b0b1a3;">(</span><span style="color: #b0b1a3;">)</span>
            <span style="color: #b0b1a3;">(</span>message <span style="color: #7FFF7F;">"init time: %.3f sec"</span>
                     <span style="color: #97b098;">(</span>float-time <span style="color: #aebed8;">(</span>time-subtract after-init-time before-init-time<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8a8a8a;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org58506ac" class="outline-2">
<h2 id="org58506ac">LICENSE</h2>
<div class="outline-text-2" id="text-org58506ac">
<p>
幾つかの関数の元ネタとして Emacs 本体のコードを参照したので，GPL-3 or later です．
</p>
<pre class="example">
Copyright (C) 2011--2017 Youhei SASAKI &lt;uwabami@gfd-dennou.org&gt;
.
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
.
This package is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
.
You should have received a copy of the GNU General Public License
along with this program. If not, see &lt;https://www.gnu.org/licenses/&gt;.
</pre>
</div>
</div>

          </div>
          <a href="#page-top" class="pagetop btn top-btn">Top</a>
        </div> <!-- /.row -->
      </div> <!-- /.content -->
    </div> <!-- /.container -->
    <footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-12 col-xs-12">
        <p>
          
          &copy; 2006 - 2018
          <a href="mailto:uwabami@gfd-dennou.org"></a>,
          Lastupdate: 2018-04-26 00:29:22 +0000
          <br />
          <span class="generator"> Powered by
            <a href="http://orgmode.org/" target="_blank" title="Org-mode">Org-mode</a>
            +
            <a href="http://jekyllrb.com/" target="_blank" title="Jekyll" >Jekyll</a>
            +
            <a href="http://nkmr6194.github.io/Umi/" target="_blank">Umi</a> &amp;
            <a href="http://getbootstrap.com/" target="_blank">Bootstrap</a>
          </span>
        </p>
      </div> <!-- /.col-sm-12 -->
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</footer>
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90872419-1', 'auto');
  ga('send', 'pageview');
</script>

    <script src="/assets/js/org-toc.js"></script>
  </body>
</html>
