<!doctype html>
<html ⚡ lang="ja">
    <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <title>Squid で広告避け</title>
  <meta name="description" content="My Interest: Fluid Dynamics, Convection, MHD Dynamo, Numerical Computing, Unix, Linux, Debian">
  <link rel="canonical" href="/cc-env/DebianSquid.html">
  
  <link rel="alternate" hreflang="ja" href="/cc-env/DebianSquid.html" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <script type="application/ld+json">
        {
      "@context": "http://schema.org",
      "@type": "NewsArticle",
      "mainEntityOfPage": "/cc-env/DebianSquid.html",
      "headline": "Squid で広告避け",
      "datePublished": "2018-10-16T19:45:53+00:00",
      "dateModified": "2018-10-16T19:45:53+00:00",
      "description": "My Interest: Fluid Dynamics, Convection, MHD Dynamo, Numerical Computing, Unix, Linux, Debian",
      "author": {
        "@type": "Person",
        "name": ""
      },
      "publisher": {
        "@type": "Organization",
        "name": "Youhei SASAKI's official site",
        "logo": {
          "@type": "ImageObject",
          "url": "",
          "width": "60",
          "height": "60"
        }
      },
      "image": {
        "@type": "ImageObject",
        "url": "",
        "height": "60",
        "width": "60"
      }
    }

  </script>
  <style amp-custom>
    
    /* Basscss Type Scale */.h1 {  font-size: 2rem; }.h2 {  font-size: 1.5rem; }.h3 {  font-size: 1.25rem; }.h4 {  font-size: 1rem; }.h5 {  font-size: 0.875rem; }.h6 {  font-size: 0.75rem; }/* Basscss Typography */.font-family-inherit {  font-family: inherit; }.font-size-inherit {  font-size: inherit; }.text-decoration-none {  text-decoration: none; }.bold {  font-weight: bold; }.regular {  font-weight: normal; }.italic {  font-style: italic; }.caps {  text-transform: uppercase;  letter-spacing: 0.2em; }.left-align {  text-align: left; }.center {  text-align: center; }.right-align {  text-align: right; }.justify {  text-align: justify; }.nowrap {  white-space: nowrap; }.break-word {  word-wrap: break-word; }.line-height-1 {  line-height: 1; }.line-height-2 {  line-height: 1.125; }.line-height-3 {  line-height: 1.25; }.line-height-4 {  line-height: 1.5; }.list-style-none {  list-style: none; }.underline {  text-decoration: underline; }.truncate {  max-width: 100%;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap; }.list-reset {  list-style: none;  padding-left: 0; }/* Basscss Layout */.inline {  display: inline; }.block {  display: block; }.inline-block {  display: inline-block; }.table {  display: table; }.table-cell {  display: table-cell; }.overflow-hidden {  overflow: hidden; }.overflow-scroll {  overflow: scroll; }.overflow-auto {  overflow: auto; }.clearfix:before,.clearfix:after {  content: " ";  display: table; }.clearfix:after {  clear: both; }.left {  float: left; }.right {  float: right; }.fit {  max-width: 100%; }.max-width-1 {  max-width: 24rem; }.max-width-2 {  max-width: 32rem; }.max-width-3 {  max-width: 48rem; }.max-width-4 {  max-width: 64rem; }.border-box {  box-sizing: border-box; }/* Basscss Align */.align-baseline {  vertical-align: baseline; }.align-top {  vertical-align: top; }.align-middle {  vertical-align: middle; }.align-bottom {  vertical-align: bottom; }/* Basscss Margin */.m0 {  margin: 0; }.mt0 {  margin-top: 0; }.mr0 {  margin-right: 0; }.mb0 {  margin-bottom: 0; }.ml0 {  margin-left: 0; }.mx0 {  margin-left: 0;  margin-right: 0; }.my0 {  margin-top: 0;  margin-bottom: 0; }.m1 {  margin: 0.5rem; }.mt1 {  margin-top: 0.5rem; }.mr1 {  margin-right: 0.5rem; }.mb1 {  margin-bottom: 0.5rem; }.ml1 {  margin-left: 0.5rem; }.mx1 {  margin-left: 0.5rem;  margin-right: 0.5rem; }.my1 {  margin-top: 0.5rem;  margin-bottom: 0.5rem; }.m2 {  margin: 1rem; }.mt2 {  margin-top: 1rem; }.mr2 {  margin-right: 1rem; }.mb2 {  margin-bottom: 1rem; }.ml2 {  margin-left: 1rem; }.mx2 {  margin-left: 1rem;  margin-right: 1rem; }.my2 {  margin-top: 1rem;  margin-bottom: 1rem; }.m3 {  margin: 2rem; }.mt3 {  margin-top: 2rem; }.mr3 {  margin-right: 2rem; }.mb3 {  margin-bottom: 2rem; }.ml3 {  margin-left: 2rem; }.mx3 {  margin-left: 2rem;  margin-right: 2rem; }.my3 {  margin-top: 2rem;  margin-bottom: 2rem; }.m4 {  margin: 4rem; }.mt4 {  margin-top: 4rem; }.mr4 {  margin-right: 4rem; }.mb4 {  margin-bottom: 4rem; }.ml4 {  margin-left: 4rem; }.mx4 {  margin-left: 4rem;  margin-right: 4rem; }.my4 {  margin-top: 4rem;  margin-bottom: 4rem; }.mxn1 {  margin-left: -0.5rem;  margin-right: -0.5rem; }.mxn2 {  margin-left: -1rem;  margin-right: -1rem; }.mxn3 {  margin-left: -2rem;  margin-right: -2rem; }.mxn4 {  margin-left: -4rem;  margin-right: -4rem; }.ml-auto {  margin-left: auto; }.mr-auto {  margin-right: auto; }.mx-auto {  margin-left: auto;  margin-right: auto; }/* Basscss Padding */.p0 {  padding: 0; }.pt0 {  padding-top: 0; }.pr0 {  padding-right: 0; }.pb0 {  padding-bottom: 0; }.pl0 {  padding-left: 0; }.px0 {  padding-left: 0;  padding-right: 0; }.py0 {  padding-top: 0;  padding-bottom: 0; }.p1 {  padding: 0.5rem; }.pt1 {  padding-top: 0.5rem; }.pr1 {  padding-right: 0.5rem; }.pb1 {  padding-bottom: 0.5rem; }.pl1 {  padding-left: 0.5rem; }.py1 {  padding-top: 0.5rem;  padding-bottom: 0.5rem; }.px1 {  padding-left: 0.5rem;  padding-right: 0.5rem; }.p2 {  padding: 1rem; }.pt2 {  padding-top: 1rem; }.pr2 {  padding-right: 1rem; }.pb2 {  padding-bottom: 1rem; }.pl2 {  padding-left: 1rem; }.py2 {  padding-top: 1rem;  padding-bottom: 1rem; }.px2 {  padding-left: 1rem;  padding-right: 1rem; }.p3 {  padding: 2rem; }.pt3 {  padding-top: 2rem; }.pr3 {  padding-right: 2rem; }.pb3 {  padding-bottom: 2rem; }.pl3 {  padding-left: 2rem; }.py3 {  padding-top: 2rem;  padding-bottom: 2rem; }.px3 {  padding-left: 2rem;  padding-right: 2rem; }.p4 {  padding: 4rem; }.pt4 {  padding-top: 4rem; }.pr4 {  padding-right: 4rem; }.pb4 {  padding-bottom: 4rem; }.pl4 {  padding-left: 4rem; }.py4 {  padding-top: 4rem;  padding-bottom: 4rem; }.px4 {  padding-left: 4rem;  padding-right: 4rem; }/* Basscss Grid */.col {  float: left;  box-sizing: border-box; }.col-right {  float: right;  box-sizing: border-box; }.col-1 {  width: 8.3333333333%; }.col-2 {  width: 16.6666666667%; }.col-3 {  width: 25%; }.col-4 {  width: 33.3333333333%; }.col-5 {  width: 41.6666666667%; }.col-6 {  width: 50%; }.col-7 {  width: 58.3333333333%; }.col-8 {  width: 66.6666666667%; }.col-9 {  width: 75%; }.col-10 {  width: 83.3333333333%; }.col-11 {  width: 91.6666666667%; }.col-12 {  width: 100%; }@media (min-width: 40em) {  .sm-col {    float: left;    box-sizing: border-box; }  .sm-col-right {    float: right;    box-sizing: border-box; }  .sm-col-1 {    width: 8.3333333333%; }  .sm-col-2 {    width: 16.6666666667%; }  .sm-col-3 {    width: 25%; }  .sm-col-4 {    width: 33.3333333333%; }  .sm-col-5 {    width: 41.6666666667%; }  .sm-col-6 {    width: 50%; }  .sm-col-7 {    width: 58.3333333333%; }  .sm-col-8 {    width: 66.6666666667%; }  .sm-col-9 {    width: 75%; }  .sm-col-10 {    width: 83.3333333333%; }  .sm-col-11 {    width: 91.6666666667%; }  .sm-col-12 {    width: 100%; } }@media (min-width: 52em) {  .md-col {    float: left;    box-sizing: border-box; }  .md-col-right {    float: right;    box-sizing: border-box; }  .md-col-1 {    width: 8.3333333333%; }  .md-col-2 {    width: 16.6666666667%; }  .md-col-3 {    width: 25%; }  .md-col-4 {    width: 33.3333333333%; }  .md-col-5 {    width: 41.6666666667%; }  .md-col-6 {    width: 50%; }  .md-col-7 {    width: 58.3333333333%; }  .md-col-8 {    width: 66.6666666667%; }  .md-col-9 {    width: 75%; }  .md-col-10 {    width: 83.3333333333%; }  .md-col-11 {    width: 91.6666666667%; }  .md-col-12 {    width: 100%; } }@media (min-width: 64em) {  .lg-col {    float: left;    box-sizing: border-box; }  .lg-col-right {    float: right;    box-sizing: border-box; }  .lg-col-1 {    width: 8.3333333333%; }  .lg-col-2 {    width: 16.6666666667%; }  .lg-col-3 {    width: 25%; }  .lg-col-4 {    width: 33.3333333333%; }  .lg-col-5 {    width: 41.6666666667%; }  .lg-col-6 {    width: 50%; }  .lg-col-7 {    width: 58.3333333333%; }  .lg-col-8 {    width: 66.6666666667%; }  .lg-col-9 {    width: 75%; }  .lg-col-10 {    width: 83.3333333333%; }  .lg-col-11 {    width: 91.6666666667%; }  .lg-col-12 {    width: 100%; } }.flex {  display: flex; }@media (min-width: 40em) {  .sm-flex {    display: flex; } }@media (min-width: 52em) {  .md-flex {    display: flex; } }@media (min-width: 64em) {  .lg-flex {    display: flex; } }.flex-column {  flex-direction: column; }.flex-wrap {  flex-wrap: wrap; }.items-start {  align-items: flex-start; }.items-end {  align-items: flex-end; }.items-center {  align-items: center; }.items-baseline {  align-items: baseline; }.items-stretch {  align-items: stretch; }.self-start {  align-self: flex-start; }.self-end {  align-self: flex-end; }.self-center {  align-self: center; }.self-baseline {  align-self: baseline; }.self-stretch {  align-self: stretch; }.justify-start {  justify-content: flex-start; }.justify-end {  justify-content: flex-end; }.justify-center {  justify-content: center; }.justify-between {  justify-content: space-between; }.justify-around {  justify-content: space-around; }.content-start {  align-content: flex-start; }.content-end {  align-content: flex-end; }.content-center {  align-content: center; }.content-between {  align-content: space-between; }.content-around {  align-content: space-around; }.content-stretch {  align-content: stretch; }/* 1. Fix for Chrome 44 bug. https://code.google.com/p/chromium/issues/detail?id=506893 */.flex-auto {  flex: 1 1 auto;  min-width: 0;  /* 1 */  min-height: 0;  /* 1 */ }.flex-none {  flex: none; }.order-0 {  order: 0; }.order-1 {  order: 1; }.order-2 {  order: 2; }.order-3 {  order: 3; }.order-last {  order: 99999; }/* Basscss Position */.relative {  position: relative; }.absolute {  position: absolute; }.fixed {  position: fixed; }.top-0 {  top: 0; }.right-0 {  right: 0; }.bottom-0 {  bottom: 0; }.left-0 {  left: 0; }.z1 {  z-index: 1; }.z2 {  z-index: 2; }.z3 {  z-index: 3; }.z4 {  z-index: 4; }/* Basscss Border */.border {  border-style: solid;  border-width: 1px; }.border-top {  border-top-style: solid;  border-top-width: 1px; }.border-right {  border-right-style: solid;  border-right-width: 1px; }.border-bottom {  border-bottom-style: solid;  border-bottom-width: 1px; }.border-left {  border-left-style: solid;  border-left-width: 1px; }.border-none {  border: 0; }.rounded {  border-radius: 3px; }.circle {  border-radius: 50%; }.rounded-top {  border-radius: 3px 3px 0 0; }.rounded-right {  border-radius: 0 3px 3px 0; }.rounded-bottom {  border-radius: 0 0 3px 3px; }.rounded-left {  border-radius: 3px 0 0 3px; }.not-rounded {  border-radius: 0; }/* Basscss Hide */.hide {  position: absolute;  height: 1px;  width: 1px;  overflow: hidden;  clip: rect(1px, 1px, 1px, 1px); }@media (max-width: 40em) {  .xs-hide {    display: none; } }@media (min-width: 40em) and (max-width: 52em) {  .sm-hide {    display: none; } }@media (min-width: 52em) and (max-width: 64em) {  .md-hide {    display: none; } }@media (min-width: 64em) {  .lg-hide {    display: none; } }.display-none {  display: none; }.navbar {  background-color: #082d74;  color: #ffffff; }  .navbar a {    color: #ffffff;    text-decoration: none; }  .navbar a:active, .navbar a:visited {    color: inherit; }  .navbar a:hover {    color: #18bc9c;    text-decoration: underline; }  .navbar ul.navbar-items {    display: flex; }    .navbar ul.navbar-items li {      width: 9rem; }  .navbar .navbar-button {    font-size: 1.5rem; }  .navbar .navbar-brand {    font-size: 1.25rem;    weight: bold; }  .navbar amp-accordion {    position: absolute; }    .navbar amp-accordion header {      background-color: #082d74;      color: #ffffff;      border-style: none;      padding: 0; }    .navbar amp-accordion section {      background-color: #ffffff;      color: #000000;      border-style: none; }    .navbar amp-accordion ul.dropdown-items li {      width: 13rem;      margin: .5rem; }footer {  line-height: 1.5;  background-color: #082d74;  color: #ffffff; }.breadcrumb {  list-style: none; }  .breadcrumb > li {    display: inline-block; }    .breadcrumb > li + li:before {      content: "/ ";      padding: 0 .5rem;      color: #ccc; }body {  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAACUFjqAAAAFXRFWHRDcmVhdGlvbiBUaW1lAAfbBhwTDDqAejMsAAAAB3RJTUUH2wYeEi8EgXgYKgAAAAlwSFlzAAAOdAAADnQBaySz1gAAABxJREFUeNpj/PLxFwNuwALEbJw4pZkY8IJhKw0AlAcDBIeyUC8AAAAASUVORK5CYII=); }span.anchor {  display: none; }main {  line-height: 1.5; }dd {  margin-left: .5rem; }strong {  font-size: 1.5rem;  line-height: 30px;  font-weight: normal; }#gpgkey {  font-size: 85%;  background: white; }.helo-unit {  background-color: #f2f2f2;  border-bottom: 3px solid #b4bcc2;  box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.1); }h1 {  font-weight: normal; }h2 {  border-bottom: 1px solid #5af;  font-weight: normal; }h3 {  border-bottom: 1px dashed #4ae;  font-weight: normal; }@media (max-width: 40em) {  main {    padding: 0 0.5rem; }  .helo-unit {    margin-top: 3.375rem; }  h1 {    padding-top: 2rem;    font-size: 1.5rem; }  header {    padding-left: 1rem;    padding-right: 1rem; } }@media (min-width: 40em) and (max-width: 52em) {  main {    padding: 0 1rem; }  .helo-unit {    margin-top: 3.375rem; }  h1 {    padding-top: 2rem;    font-size: 1.5rem; }  header {    padding-left: 1rem;    padding-right: 1rem; } }@media (min-width: 52em) {  main {    padding: 0 1rem; }  .helo-unit {    margin-top: 5.5rem; }  h1 {    padding-top: 1rem;    padding-bottom: 0.5rem; }  header {    padding-left: 1rem;    padding-right: 1rem; } }@media (min-width: 64em) {  main {    padding: 0 4rem; }  .helo-unit {    margin-top: 5.5rem; }  h1 {    padding-top: 1rem; }  header {    padding-left: 4rem;    padding-right: 4rem; } }.bg-white {  background-color: #fff; }a, a:active, a:visited, a:hover {  color: #18bc9c;  text-decoration: none; }a:hover {  text-decoration: underline; }.icon-envelop {  color: #242424; }.icon-key {  color: #ff8c00; }.icon-keybase {  color: #ff8c00; }.icon-twitter {  color: #55acee; }.icon-facebook {  color: #3B5998; }.icon-github {  color: #4c4c4c; }.icon-mastodon {  color: #3B5998; }
  </style>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async custom-element="amp-geo" src="https://cdn.ampproject.org/v0/amp-geo-0.1.js"></script>
  <script async custom-element="amp-consent" src="https://cdn.ampproject.org/v0/amp-consent-0.1.js"></script>
  <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
  <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
  <script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script>
  <script async src="https://cdn.ampproject.org/v0.js"></script>

  <body>
        <!-- First we need to set up the amp-geo extension. We define a group: `eea` which includes all European Economic Area countries. You will need to keep this list up-to-date as membership in the EEA may change over time. -->
    <amp-geo layout="nodisplay">
      <script type="application/json">
      {
          "ISOCountryGroups": {
              "eea": [ "at", "be", "bg", "cy", "cz", "de", "dk", "ee", "es", "fi",
                       "fr", "gb", "gr", "hr", "hu", "ie", "is", "it", "li", "lt",
                       "lu", "lv", "mt", "nl", "no", "pl", "pt", "ro", "se", "si",
                       "sk"]
          }
      }

      </script>
    </amp-geo>
    <!-- Next we need to setup the consent for users in the “eea” country group -->
    <amp-consent layout="nodisplay" id="consent-element">
      <script type="application/json">
     {
         "consents": {
             "my_consent": {
                 "promptIfUnknownForGeoGroup": "eea",
                 "promptUI": "consent-ui"
             }
         }
     }
      </script>
      <div id="consent-ui">
        <button on="tap:consent-element.accept" role="button">Accept</button>
        <button on="tap:consent-element.reject" role="button">Reject</button>
        <button on="tap:consent-element.dismiss" role="button">Dismiss</button>
      </div>
    </amp-consent>

    <header class="fixed flex flex-wrap items-center top-0 left-0 right-0 py2 z4 navbar">
  <div class="pr2 nowrap">
    <a class="navbar-brand" href="/index.html">
      Youhei SASAKI's official site
    </a>
  </div>
  <nav class="flex-auto xs-hide sm-hide">
    <ul class="list-reset navbar-items">
      
      
      <li>
        <a href="/research/index.html">Research</a>
      </li>
      <!-- Start Dropdown -->
      <li>
        <amp-accordion layout="container" disable-session-states="">
          <section>
            <header>Software &#9662;</header>
            <ul class="list-reset dropdown-items">
              <li>
                <a href="/software/index.html">
                  Repository
                </a>
              </li>
              <li class="nowrap">
                <a href="/cc-env/index.html">
                  Computer Memo
                </a>
              </li>
            </ul>
          </section>
        </amp-accordion>
      </li>
      <!-- End Dropdown -->
      <li>
        <a href="https://uwabami.junkhub.org/log">Blog</a>
      </li>
      
    </ul>
  </nav>
  <div class="xs-hide sm-hide">
    <ul class="list-reset">
      <li>
        
        
        
        
      </li>
    </ul>
  </div>
  <div class="md-hide lg-hide ml-auto navbar-button nowrap"
       role="button"
       on="tap:sidebar.toggle"
       tabindex="0">☰</div>
</header>
<!-- End Navbar -->

    <!-- Start Sidebar -->
<amp-sidebar id="sidebar"
             layout="nodisplay"
             side="right"
             class="md-hide lg-hide p2 navbar">
  <nav>
    <div role="button"
         on="tap:sidebar.toggle"
         tabindex="0"
         class="right-align navbar-button">✕</div>
    <ul class="list-reset">
      
      
      <li>
        <a href="/index.html">Top</a>
      </li>
      <li>
        <a href="/research/index.html">Research</a>
      </li>
      <li>
        Software &#9662;
        <ul class="list-reset pl2">
          <li>
            <a  href="/software/index.html">
              Repository
            </a>
          </li>
          <li class="nowrap">
            <a  href="/cc-env/index.html">
              Computer Memo
            </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://uwabami.junkhub.org/log">Blog</a>
      </li>
      
    </ul>
    <hr />
    <ul class="list-reset">
      <li>
        
        
        
        
      </li>
    </ul>
  </nav>
</amp-sidebar>
<!-- End Sidebar -->

    <main role="main" class="sm-px2 md-px2 lg-px4">
      <div class="helo-unit px1">
        
        <h1>Squid で広告避け</h1>
        
        <ul class="breadcrumb list-reset z1 px1">
  
  <li><a href="/index.html">Top</a></li>
  
  
    
    
      
  <li><a href="/cc-env/index.html">Cc-env</a></li>
      
    
 
    
    
 
</ul>

      </div>
      <div class="clearfix px1 bg-white">
        <!-- main content -->
        <p>Related <a href="index">Index</a> <a href="id:591f6b0d-55ff-48eb-b095-401cdfa0d536.html">Debian</a></p>
<h2><a id="はじめに"><span class='anchor'>_</span></a>はじめに</h2>
<p>手元で squid を上げています.</p>
<p>最初は職場, 居室, モバイル等でネットワーク環境が変わる際に
  いちいちプロキシの設定を変えるとかやってられん, ということで</p>
<ul>
  <li>手元で透過 proxy を立ち上げる</li>
  <li>アプリケーションは常に proxy として localhost を見に行くようにする</li>
  <li>ネットワーク接続の切り替え時に 上流の proxy を切り替える</li>
</ul>
<p>という目的で上げていました.</p>
<p>それに加えて</p>
<ul>
  <li>そういえば squid って hosts ファイル読めたよね</li>
  <li>職場のプロキシが透過プロキシになってる</li>
</ul>
<p>ということで, これは広告避けにつかえるな, ということに.</p>
<p>Web 広告については, まあ, いろんな意見があって良いと思います.
  邪魔にならない広告ならまあ良いんですけれど，</p>
<ul>
  <li>Flash とか mp4 で動画バリバリ</li>
  <li>閲覧中にポップアップ</li>
</ul>
<p>とか, そういう奴が多すぎます.</p>
<h2><a id="導入と設定"><span class='anchor'>_</span></a>導入と設定</h2>
<p>導入</p>
<pre class="example">
% sudo apt-get install squid
</pre>
<p>apt 万歳</p>
<p>現状の設定は以下の通り:</p>
<h3><a id="広告避けの host ファイル"><span class='anchor'>_</span></a>広告避けの host ファイル</h3>
<p>以下のスクリプトで適当に生成</p>
<p>リストを保守して下さっている皆様に感謝.</p>
<h3><a id="=/etc/squid/common.conf="><span class='anchor'>_</span></a><code>/etc/squid/common.conf</code></h3>
<p>昔プロキシを切り替えていた頃の名残で,
  上流を問わず全て同じ設定とする部分は <code>common.conf</code> に書いている.
  現状は</p>
<ul>
  <li>キャッシュはしない(した方が良いのかな&#8230;?)</li>
  <li>匿名化したいわけでも無いので, ヘッダは適当</li>
  <li>20080 番で動作</li>
</ul>
<p>といった所.</p>
<h3><a id="=/etc/squid/squid.conf="><span class='anchor'>_</span></a><code>/etc/squid/squid.conf</code></h3>
<p>中身は現状これだけ</p>
<p>もはや分割する意味が無い, とも言える.</p>
<h3><a id="systemd と仲良く: =/etc/systemd/system/squid.service="><span class='anchor'>_</span></a>systemd と仲良く: <code>/etc/systemd/system/squid.service</code></h3>
<p>キャッシュを動かす気も無いので子プロセスは生成されない.
  ということで, systemd 用の service ファイルを以下の様にでっち上げた.</p>
<p>あとは</p>
<pre class="example">
% sudo systemctl daemon-reload
% sudo systemctl enable squid
% sudo systemctl start squid
</pre>
<p>で快適. 適宜 <code>HTTP_PROXY</code> 等を設定しておくと良いだろう.</p>


      </div>
    </main>
    <footer class="flex justify-end bottom-0 left-0 right-0 m0 py1 px2">
  <p class="right-align">
    
    &copy; 2006 - 2018
    <a href="mailto:uwabami@gfd-dennou.org"></a>,
    Lastupdate: 2018-10-16 19:45:53
    <br/>
    Powered by
    <a href="http://orgmode.org/" target="_blank" title="Org mode">
      Org mode
    </a>
    +
    <a href="http://jekyllrb.com/" target="_blank" title="Jekyll" >
      Jekyll
    </a>
    +
    <a href="http://basscss.com/" target="_blank" title="Basscss" >
      Basscss
    </a>
  </p>
</footer>
<amp-analytics data-block-on-consent type="googleanalytics" id="amp-analytics">
  <script type="application/json">
  {
      "vars": {
          "account": "UA-90872419-1"
      },
      "triggers": {
          "trackPageview" : {
              "on": "visible",
              "request": "pageview"
          }
      }
  }

  </script>
</amp-analytics>

  </body>
</html>
